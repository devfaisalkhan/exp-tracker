<!-- Banners, outside of any nav container -->
<div class="alert alert-info text-center py-2 m-0" *ngIf="showInstallButton && !isOnline">
  <small><i class="bi bi-download me-1"></i> Install Expense Tracker for offline use <button class="btn btn-sm btn-primary ms-2" (click)="installPWA()">Install</button></small>
</div>
<div class="alert alert-info text-center py-2 m-0" *ngIf="showInstallButton && isOnline">
  <small><i class="bi bi-download me-1"></i> Install Expense Tracker app for offline use <button class="btn btn-sm btn-primary ms-2" (click)="installPWA()">Install</button></small>
</div>
<div class="alert alert-warning text-center py-1 m-0" *ngIf="!isOnline && !showInstallButton">
  <small><i class="bi bi-wifi-off me-1"></i> You are offline. Data may not be up to date.</small>
</div>

<!-- Desktop Top Tab Navigation -->
<div class="d-none d-md-block">
  <nav mat-tab-nav-bar class="app-tab-nav" [tabPanel]="tabPanel" [selectedIndex]="selectedIndex">
    <a mat-tab-link *ngFor="let link of links; let i = index"
       [routerLink]="link.path"
       [active]="selectedIndex === i">
      {{ link.label }}
    </a>
  </nav>
  <mat-tab-nav-panel #tabPanel></mat-tab-nav-panel>
</div>

<!-- Main content with swipe support -->
<div class="main-content" 
     #swipeContainer 
     appSwipe 
     (swipeLeft)="onSwipeLeft()" 
     (swipeRight)="onSwipeRight()"
     [enableSwipe]="isMobile">
  <router-outlet></router-outlet>
</div>

<!-- Mobile Bottom Navigation -->
<div class="mobile-nav d-block d-md-none fixed-bottom">
  <div class="nav d-flex justify-content-around align-items-center py-2 bg-white border-top shadow">
    <a *ngFor="let link of links"
       [routerLink]="link.path"
       routerLinkActive="active-nav"
       [routerLinkActiveOptions]="{exact: true}"
       class="nav-link text-center flex-column d-flex align-items-center justify-content-center">
      <i [class]="'bi ' + link.icon + ' fs-5 mb-1'"></i>
      <span class="small">{{ link.label }}</span>
    </a>
  </div>
</div>

<!-- Toast notifications -->
<app-toast></app-toast>
