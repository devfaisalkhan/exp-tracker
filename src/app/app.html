<header class="app-header">
  <!-- Show install banner on mobile if installable -->
  <div class="alert alert-info text-center py-2 m-0"
       *ngIf="showInstallButton && !isOnline"
       style="position: sticky; top: 0; z-index: 1050; border-radius: 0; background-color: #e7f3ff;">
    <small>
      <i class="bi bi-download me-1"></i>
      Install Expense Tracker for offline use
      <button class="btn btn-sm btn-primary ms-2" (click)="installPWA()">Install</button>
    </small>
  </div>

  <!-- Show install button on mobile if installable but not offline banner -->
  <div class="alert alert-info text-center py-2 m-0"
       *ngIf="showInstallButton && isOnline"
       style="position: sticky; top: 0; z-index: 1050; border-radius: 0; background-color: #e7f3ff;">
    <small>
      <i class="bi bi-download me-1"></i>
      Install Expense Tracker app for offline use
      <button class="btn btn-sm btn-primary ms-2" (click)="installPWA()">Install</button>
    </small>
  </div>

  <!-- Online/Offline indicator -->
  <div class="alert alert-warning text-center py-1 m-0"
       *ngIf="!isOnline && !showInstallButton"
       style="position: sticky; top: 0; z-index: 1049; border-radius: 0;">
    <small><i class="bi bi-wifi-off me-1"></i> You are offline. Data may not be up to date.</small>
  </div>

  <nav mat-tab-nav-bar class="app-tab-nav" [tabPanel]="tabPanel" [selectedIndex]="selectedIndex" (selectedTabChange)="tabChanged($event)">
    <a mat-tab-link *ngFor="let link of links; let i = index"
       [routerLink]="link.path"
       [active]="selectedIndex === i"
       (click)="selectedIndex = i">
      {{ link.label }}
    </a>
  </nav>
</header>
<mat-tab-nav-panel #tabPanel></mat-tab-nav-panel>

<!-- Main content with swipe support -->
<div class="main-content" 
     #swipeContainer 
     appSwipe 
     (swipeLeft)="onSwipeLeft()" 
     (swipeRight)="onSwipeRight()"
     [enableSwipe]="isMobile">
  <router-outlet></router-outlet>
</div>

<!-- Toast notifications -->
<app-toast></app-toast>
