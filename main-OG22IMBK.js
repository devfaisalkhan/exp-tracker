import{a as ae,b as se,c as le,d as ce,e as pe,f as de,g as me}from"./chunk-HG2EZ55G.js";import{a as ue}from"./chunk-IIL4ITLS.js";import{$ as Z,B as b,Ea as q,Ia as J,J as C,Kb as ie,La as Q,M as h,Mb as re,N as H,P as k,Pa as X,Ra as B,Rb as oe,S as K,T as D,Ta as m,U as _,Ua as o,V as G,Va as a,Wa as p,Xa as F,Ya as j,Z as R,Za as U,_ as N,a as z,db as l,e as P,ea as $,fa as Y,h as x,i as V,lb as M,mb as ee,p as f,sb as te,ta as g,w as u,x as L,xb as ne,ya as E}from"./chunk-7T257EYH.js";var W="Service workers are disabled or not supported by this browser",w=class{serviceWorker;worker;registration;events;constructor(r,e){if(this.serviceWorker=r,!r)this.worker=this.events=this.registration=new P(n=>n.error(new h(5601,!1)));else{let n=null,i=new x;this.worker=new P(d=>(n!==null&&d.next(n),i.subscribe(y=>d.next(y))));let c=()=>{let{controller:d}=r;d!==null&&(n=d,i.next(n))};r.addEventListener("controllerchange",c),c(),this.registration=this.worker.pipe(C(()=>r.getRegistration().then(d=>{if(!d)throw new h(5601,!1);return d})));let s=new x;this.events=s.asObservable();let v=d=>{let{data:y}=d;y?.type&&s.next(y)};r.addEventListener("message",v),e?.get(B,null,{optional:!0})?.onDestroy(()=>{r.removeEventListener("controllerchange",c),r.removeEventListener("message",v)})}}postMessage(r,e){return new Promise(n=>{this.worker.pipe(b(1)).subscribe(i=>{i.postMessage(z({action:r},e)),n()})})}postMessageWithOperation(r,e,n){let i=this.waitForOperationCompleted(n),c=this.postMessage(r,e);return Promise.all([c,i]).then(([,s])=>s)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(r){let e;return typeof r=="string"?e=n=>n.type===r:e=n=>r.includes(n.type),this.events.pipe(L(e))}nextEventOfType(r){return this.eventsOfType(r).pipe(b(1))}waitForOperationCompleted(r){return new Promise((e,n)=>{this.eventsOfType("OPERATION_COMPLETED").pipe(L(i=>i.nonce===r),b(1),f(i=>{if(i.result!==void 0)return i.result;throw new Error(i.error)})).subscribe({next:e,error:n})})}get isEnabled(){return!!this.serviceWorker}},Oe=(()=>{class t{sw;messages;notificationClicks;notificationCloses;pushSubscriptionChanges;subscription;get isEnabled(){return this.sw.isEnabled}pushManager=null;subscriptionChanges=new x;constructor(e){if(this.sw=e,!e.isEnabled){this.messages=u,this.notificationClicks=u,this.notificationCloses=u,this.pushSubscriptionChanges=u,this.subscription=u;return}this.messages=this.sw.eventsOfType("PUSH").pipe(f(i=>i.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(f(i=>i.data)),this.notificationCloses=this.sw.eventsOfType("NOTIFICATION_CLOSE").pipe(f(i=>i.data)),this.pushSubscriptionChanges=this.sw.eventsOfType("PUSH_SUBSCRIPTION_CHANGE").pipe(f(i=>i.data)),this.pushManager=this.sw.registration.pipe(f(i=>i.pushManager));let n=this.pushManager.pipe(C(i=>i.getSubscription()));this.subscription=new P(i=>{let c=n.subscribe(i),s=this.subscriptionChanges.subscribe(i);return()=>{c.unsubscribe(),s.unsubscribe()}})}requestSubscription(e){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(W));let n={userVisibleOnly:!0},i=this.decodeBase64(e.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),c=new Uint8Array(new ArrayBuffer(i.length));for(let s=0;s<i.length;s++)c[s]=i.charCodeAt(s);return n.applicationServerKey=c,new Promise((s,v)=>{this.pushManager.pipe(C(O=>O.subscribe(n)),b(1)).subscribe({next:O=>{this.subscriptionChanges.next(O),s(O)},error:v})})}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(W));let e=n=>{if(n===null)throw new h(5602,!1);return n.unsubscribe().then(i=>{if(!i)throw new h(5603,!1);this.subscriptionChanges.next(null)})};return new Promise((n,i)=>{this.subscription.pipe(b(1),C(e)).subscribe({next:n,error:i})})}decodeBase64(e){return atob(e)}static \u0275fac=function(n){return new(n||t)(D(w))};static \u0275prov=k({token:t,factory:t.\u0275fac})}return t})(),Ce=(()=>{class t{sw;versionUpdates;unrecoverable;get isEnabled(){return this.sw.isEnabled}ongoingCheckForUpdate=null;constructor(e){if(this.sw=e,!e.isEnabled){this.versionUpdates=u,this.unrecoverable=u;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED","VERSION_FAILED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(W));if(this.ongoingCheckForUpdate)return this.ongoingCheckForUpdate;let e=this.sw.generateNonce();return this.ongoingCheckForUpdate=this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:e},e).finally(()=>{this.ongoingCheckForUpdate=null}),this.ongoingCheckForUpdate}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new h(5601,!1));let e=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:e},e)}static \u0275fac=function(n){return new(n||t)(D(w))};static \u0275prov=k({token:t,factory:t.\u0275fac})}return t})();var fe=new K("");function ke(){let t=_(S);if(!("serviceWorker"in navigator&&t.enabled!==!1))return;let r=_(fe),e=_(Q),n=_(B);e.runOutsideAngular(()=>{let i=navigator.serviceWorker,c=()=>i.controller?.postMessage({action:"INITIALIZE"});i.addEventListener("controllerchange",c),n.onDestroy(()=>{i.removeEventListener("controllerchange",c)})}),e.runOutsideAngular(()=>{let i,{registrationStrategy:c}=t;if(typeof c=="function")i=new Promise(s=>c().subscribe(()=>s()));else{let[s,...v]=(c||"registerWhenStable:30000").split(":");switch(s){case"registerImmediately":i=Promise.resolve();break;case"registerWithDelay":i=ge(+v[0]||0);break;case"registerWhenStable":i=Promise.race([n.whenStable(),ge(+v[0])]);break;default:throw new h(5600,!1)}}i.then(()=>{n.destroyed||navigator.serviceWorker.register(r,{scope:t.scope,updateViaCache:t.updateViaCache,type:t.type}).catch(s=>console.error(H(5604,!1)))})})}function ge(t){return new Promise(r=>setTimeout(r,t))}function _e(t,r){return new w(t.enabled!==!1?navigator.serviceWorker:void 0,r)}var S=class{enabled;updateViaCache;type;scope;registrationStrategy};function he(t,r={}){return G([Oe,Ce,{provide:fe,useValue:t},{provide:S,useValue:r},{provide:w,useFactory:_e,deps:[S,Z]},X(ke)])}var be=[{path:"",redirectTo:"dashboard",pathMatch:"full"},{path:"dashboard",loadComponent:()=>import("./chunk-KCKNY7WG.js").then(t=>t.DashboardComponent)},{path:"add",loadComponent:()=>import("./chunk-WVWPSCQA.js").then(t=>t.AddExpense)},{path:"expenses",loadComponent:()=>import("./chunk-C37IJ63P.js").then(t=>t.ExpensesList)},{path:"budgets",loadComponent:()=>import("./chunk-HY65VWCE.js").then(t=>t.BudgetsComponent)},{path:"profile",loadComponent:()=>import("./chunk-ZXIY7JTO.js").then(t=>t.UserProfileComponent)}];var we={providers:[$(),te(),de(be,me()),he("ngsw-worker.js",{enabled:!ne(),registrationStrategy:"registerWhenStable:30000"})]};var I=class t{networkStatus=new V(navigator.onLine);networkStatus$=this.networkStatus.asObservable();constructor(){window.addEventListener("online",()=>{this.networkStatus.next(!0)}),window.addEventListener("offline",()=>{this.networkStatus.next(!1)})}isOnline(){return navigator.onLine}static \u0275fac=function(e){return new(e||t)};static \u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"root"})};var Se=(t,r)=>({"mt-3":t,"mt-4":r}),A=()=>({exact:!0});function ye(t,r){if(t&1){let e=F();o(0,"div",32)(1,"small"),p(2,"i",33),l(3," Install Expense Tracker for offline use "),o(4,"button",34),j("click",function(){R(e);let i=U();return N(i.installPWA())}),l(5,"Install"),a()()()}}function Pe(t,r){if(t&1){let e=F();o(0,"div",32)(1,"small"),p(2,"i",33),l(3," Install Expense Tracker app for offline use "),o(4,"button",34),j("click",function(){R(e);let i=U();return N(i.installPWA())}),l(5,"Install"),a()()()}}function xe(t,r){t&1&&(o(0,"div",35)(1,"small"),p(2,"i",36),l(3," You are offline. Data may not be up to date."),a()())}var T=class t{constructor(r,e,n){this.router=r;this.networkService=e;this.pwaService=n}title=Y("exp-tracker");isOnline=!0;showInstallButton=!1;ngOnInit(){console.log("App component initialized"),this.networkService.networkStatus$.subscribe(e=>{this.isOnline=e,console.log("Network status changed:",e?"Online":"Offline")}),window.addEventListener("beforeinstallprompt",e=>{console.log("beforeinstallprompt event fired"),this.showInstallButton=this.pwaService.isInstallable()&&!this.hasSeenInstallBanner(),console.log("Install button visibility after event:",this.showInstallButton)}),window.addEventListener("appinstalled",()=>{console.log("App was installed"),this.showInstallButton=!1,this.setInstallBannerSeen()});let r=()=>{let e=this.pwaService.isInstallable(),n=this.pwaService.canInstall();console.log("Periodic install check - isInstallable:",e,"canInstall:",n,"hasSeenBanner:",this.hasSeenInstallBanner()),n&&!this.hasSeenInstallBanner()&&(this.showInstallButton=!0,console.log("Install button now shown"))};setTimeout(()=>{r()},1e3),setInterval(r,5e3)}installPWA(){console.log("Install PWA button clicked"),this.setInstallBannerSeen(),this.pwaService.showInstallPrompt()}hasSeenInstallBanner(){return localStorage.getItem("installBannerSeen")==="true"}setInstallBannerSeen(){localStorage.setItem("installBannerSeen","true")}isActiveRoute(r){return this.router.url.includes(r)}static \u0275fac=function(e){return new(e||t)(E(le),E(I),E(ue))};static \u0275cmp=q({type:t,selectors:[["app-root"]],decls:55,vars:15,consts:[["class","alert alert-info text-center py-2 m-0","style","position: sticky; top: 0; z-index: 1050; border-radius: 0; background-color: #e7f3ff;",4,"ngIf"],["class","alert alert-warning text-center py-1 m-0","style","position: sticky; top: 0; z-index: 1049; border-radius: 0;",4,"ngIf"],[1,"navbar","navbar-expand-md","navbar-light","bg-primary","bg-gradient","text-white","sticky-top","d-none","d-md-block",3,"ngClass"],[1,"container-fluid"],["href","#",1,"navbar-brand","text-white","fw-bold"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarNav","aria-controls","navbarNav","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon","text-white"],["id","navbarNav",1,"collapse","navbar-collapse"],[1,"navbar-nav","ms-auto"],[1,"nav-item"],["routerLink","/dashboard","routerLinkActive","active",1,"nav-link","text-white",3,"routerLinkActiveOptions"],["routerLink","/add","routerLinkActive","active",1,"nav-link","text-white",3,"routerLinkActiveOptions"],["routerLink","/expenses","routerLinkActive","active",1,"nav-link","text-white"],["routerLink","/budgets","routerLinkActive","active",1,"nav-link","text-white"],[1,"nav-item","dropdown"],["href","#","role","button","data-bs-toggle","dropdown","aria-expanded","false",1,"nav-link","dropdown-toggle","text-white"],[1,"dropdown-menu","dropdown-menu-end","dropdown-menu-dark"],["routerLink","/profile","routerLinkActive","active",1,"dropdown-item"],[1,"dropdown-divider"],["href","#",1,"dropdown-item"],[1,"main-content"],[1,"mobile-nav","d-block","d-md-none","fixed-bottom"],[1,"nav","d-flex","justify-content-around","align-items-center","py-2","bg-white","border-top","shadow"],["routerLink","/dashboard","routerLinkActive","active-nav",1,"nav-link","text-center","flex-column","d-flex","align-items-center","justify-content-center",3,"routerLinkActiveOptions"],[1,"bi","bi-house-door","fs-5","mb-1"],[1,"small"],["routerLink","/add","routerLinkActive","active-nav",1,"nav-link","text-center","flex-column","d-flex","align-items-center","justify-content-center",3,"routerLinkActiveOptions"],[1,"bi","bi-plus-circle","fs-5","mb-1"],["routerLink","/expenses","routerLinkActive","active-nav",1,"nav-link","text-center","flex-column","d-flex","align-items-center","justify-content-center"],[1,"bi","bi-receipt","fs-5","mb-1"],["routerLink","/budgets","routerLinkActive","active-nav",1,"nav-link","text-center","flex-column","d-flex","align-items-center","justify-content-center"],[1,"bi","bi-wallet2","fs-5","mb-1"],[1,"alert","alert-info","text-center","py-2","m-0",2,"position","sticky","top","0","z-index","1050","border-radius","0","background-color","#e7f3ff"],[1,"bi","bi-download","me-1"],[1,"btn","btn-sm","btn-primary","ms-2",3,"click"],[1,"alert","alert-warning","text-center","py-1","m-0",2,"position","sticky","top","0","z-index","1049","border-radius","0"],[1,"bi","bi-wifi-off","me-1"]],template:function(e,n){e&1&&(J(0,ye,6,0,"div",0)(1,Pe,6,0,"div",0)(2,xe,4,0,"div",1),o(3,"nav",2)(4,"div",3)(5,"a",4),l(6,"Expense Tracker"),a(),o(7,"button",5),p(8,"span",6),a(),o(9,"div",7)(10,"ul",8)(11,"li",9)(12,"a",10),l(13,"Dashboard"),a()(),o(14,"li",9)(15,"a",11),l(16,"Add Expense"),a()(),o(17,"li",9)(18,"a",12),l(19,"View Expenses"),a()(),o(20,"li",9)(21,"a",13),l(22,"Budgets"),a()(),o(23,"li",14)(24,"a",15),l(25," Profile "),a(),o(26,"ul",16)(27,"li")(28,"a",17),l(29,"Settings"),a()(),o(30,"li"),p(31,"hr",18),a(),o(32,"li")(33,"a",19),l(34,"Sign Out"),a()()()()()()()(),o(35,"div",20),p(36,"router-outlet"),a(),o(37,"div",21)(38,"div",22)(39,"a",23),p(40,"i",24),o(41,"span",25),l(42,"Home"),a()(),o(43,"a",26),p(44,"i",27),o(45,"span",25),l(46,"Add"),a()(),o(47,"a",28),p(48,"i",29),o(49,"span",25),l(50,"Expenses"),a()(),o(51,"a",30),p(52,"i",31),o(53,"span",25),l(54,"Budget"),a()()()()),e&2&&(m("ngIf",n.showInstallButton&&!n.isOnline),g(),m("ngIf",n.showInstallButton&&n.isOnline),g(),m("ngIf",!n.isOnline&&!n.showInstallButton),g(),m("ngClass",ee(8,Se,!n.isOnline&&!n.showInstallButton||n.isOnline&&!n.showInstallButton,n.showInstallButton)),g(9),m("routerLinkActiveOptions",M(11,A)),g(3),m("routerLinkActiveOptions",M(12,A)),g(24),m("routerLinkActiveOptions",M(13,A)),g(4),m("routerLinkActiveOptions",M(14,A)))},dependencies:[oe,ie,re,se,ce,pe],styles:["body[_ngcontent-%COMP%]{margin:0;padding:56px 0 0;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;background-color:#f8f9fa}body.standalone[_ngcontent-%COMP%]{padding-top:0}@media all and (display-mode: standalone){body[_ngcontent-%COMP%]{padding-top:0}.navbar.sticky-top[_ngcontent-%COMP%]{padding-top:env(safe-area-inset-top)}.mobile-nav.fixed-bottom[_ngcontent-%COMP%]{padding-bottom:env(safe-area-inset-bottom)}}.navbar[_ngcontent-%COMP%]{padding:.5rem 1rem!important;height:56px;box-shadow:0 2px 4px #0000001a}.navbar-brand[_ngcontent-%COMP%]{font-size:1.25rem!important;font-weight:600}.nav-link[_ngcontent-%COMP%]{font-size:.9rem!important;padding:.5rem 1rem!important}.main-content[_ngcontent-%COMP%]{padding:0;min-height:calc(100vh - 116px)}@media (min-width: 768px){.main-content[_ngcontent-%COMP%]{min-height:calc(100vh - 56px)}}.container[_ngcontent-%COMP%]{padding:.5rem!important;max-width:100%!important}.form-control[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%]{padding:.75rem 1rem!important;font-size:1rem!important;border-radius:8px!important;border:1px solid #ddd!important}.btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem!important;font-size:1rem!important;border-radius:8px!important;font-weight:500!important}.table[_ngcontent-%COMP%]{font-size:.85rem!important}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.75rem .5rem!important}.mobile-nav[_ngcontent-%COMP%]{z-index:1000}.mobile-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{color:#6c757d;transition:all .2s ease}.mobile-nav[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%], .mobile-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:active{color:#4361ee}.mobile-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.25rem;margin-bottom:.25rem}.mobile-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.75rem;line-height:1}.nav-link.active-nav[_ngcontent-%COMP%], .nav-link.active-nav[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#4361ee!important}@media (max-width: 768px){.main-content[_ngcontent-%COMP%]{padding-bottom:60px}}@media (max-width: 576px){body[_ngcontent-%COMP%]{padding-top:50px}.navbar[_ngcontent-%COMP%]{height:50px;padding:.25rem .5rem!important}.container[_ngcontent-%COMP%]{padding:.25rem!important}.form-control[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%]{padding:.6rem .75rem!important;font-size:.95rem!important}.btn[_ngcontent-%COMP%]{padding:.65rem 1.25rem!important;font-size:.95rem!important}.table[_ngcontent-%COMP%]{font-size:.75rem!important}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.5rem .25rem!important}.navbar-brand[_ngcontent-%COMP%]{font-size:1.1rem!important}.nav-link[_ngcontent-%COMP%]{font-size:.85rem!important;padding:.4rem .75rem!important}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{font-size:1.2rem!important}.mobile-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.1rem}.mobile-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.7rem}}"]})};ae(T,we).catch(t=>console.error(t));
