import{d as P,h as M}from"./chunk-HG2EZ55G.js";import{a as k,b as F,c as T,d as I,e as A,f as B,g as R,h as L,i as N,j as K,k as j,l as U,m as V}from"./chunk-FR7GTYEC.js";import{a as W}from"./chunk-ADOJRJQE.js";import{Ea as C,Ia as h,Lb as E,Mb as S,Ob as w,Pb as D,Qb as _,Rb as O,Ta as m,Ua as e,Va as t,Wa as s,Za as v,db as a,eb as p,fb as u,nb as c,pb as g,qb as f,ta as d,ya as y}from"./chunk-7T257EYH.js";function q(l,i){if(l&1&&(e(0,"h3",10),a(1),c(2,"number"),t()),l&2){let r=v();d(),u("PKR ",g(2,1,r.totalAmount/r.totalExpenses,"1.2-2"))}}function z(l,i){l&1&&(e(0,"h3",10),a(1,"PKR 0.00"),t())}function G(l,i){if(l&1&&(e(0,"div",39)(1,"div",40)(2,"div")(3,"h6",2),a(4),t(),e(5,"small",41),a(6),c(7,"date"),t()(),e(8,"div",42)(9,"h6",43),a(10),c(11,"number"),t(),e(12,"span",44),a(13),t()()()()),l&2){let r=i.$implicit;d(4),p(r.title),d(2),p(g(7,4,r.date,"MMM d")),d(4),u("- PKR ",g(11,7,r.amount,"1.2-2")),d(3),p(r.category)}}function H(l,i){l&1&&(e(0,"div",39)(1,"p",45),a(2,"No expenses recorded yet"),t()())}I.register(T,k,F,j,U,R,B,N,K,L,A);var Y=class l{constructor(i){this.expenseService=i}expenses=[];totalExpenses=0;totalAmount=0;weeklyExpenses=[];categorySummaries=[];weeklyChartType="line";categoryChartType="doughnut";weeklyChartData={labels:[],datasets:[{data:[],label:"Amount (PKR)",borderColor:"#42A5F5",backgroundColor:"rgba(66, 165, 245, 0.2)",fill:!0}]};categoryChartData={labels:[],datasets:[{data:[],backgroundColor:["#FF6384","#36A2EB","#FFCE56","#4BC0C0","#9966FF","#FF9F40","#FF6384","#C9CBCF","#4BC0C0","#FF6384","#36A2EB","#FFCE56"]}]};chartOptions={responsive:!0,maintainAspectRatio:!1};ngOnInit(){this.loadDashboardData()}loadDashboardData(){this.expenses=this.expenseService.getExpenses(),this.calculateDashboardStats(),this.updateCharts()}calculateDashboardStats(){this.totalExpenses=this.expenses.length,this.totalAmount=this.expenses.reduce((n,o)=>n+o.amount,0),this.weeklyExpenses=[];let i=new Date;for(let n=6;n>=0;n--){let o=new Date(i);o.setDate(i.getDate()-n);let $=this.expenses.filter(b=>new Date(b.date).toDateString()===o.toDateString()).reduce((b,x)=>b+x.amount,0);this.weeklyExpenses.push({day:o.toLocaleDateString("en-US",{weekday:"short"}),amount:$})}let r=new Map;this.expenses.forEach(n=>{r.has(n.category)||r.set(n.category,{total:0,count:0});let o=r.get(n.category);o.total+=n.amount,o.count+=1}),this.categorySummaries=Array.from(r.entries()).map(([n,o])=>({category:n,total:o.total,count:o.count})).sort((n,o)=>o.total-n.total)}updateCharts(){this.weeklyChartData.labels=this.weeklyExpenses.map(i=>i.day),this.weeklyChartData.datasets[0].data=this.weeklyExpenses.map(i=>i.amount),this.categoryChartData.labels=this.categorySummaries.map(i=>i.category),this.categoryChartData.datasets[0].data=this.categorySummaries.map(i=>i.total)}getTopCategory(){return this.categorySummaries.length>0?this.categorySummaries[0]:null}static \u0275fac=function(r){return new(r||l)(y(W))};static \u0275cmp=C({type:l,selectors:[["app-dashboard"]],decls:80,vars:20,consts:[[1,"container-fluid"],[1,"dashboard-header","mb-4"],[1,"mb-0"],[1,"row","mb-4"],[1,"col-6","col-md-3","mb-3"],[1,"card","summary-card","h-100","border-0","shadow-sm"],[1,"card-body","text-center"],[1,"card-icon","bg-primary","rounded-circle","mb-3","mx-auto"],[1,"bi","bi-receipt","text-white","fs-4"],[1,"card-title","text-muted"],[1,"card-text","text-dark","mb-0"],[1,"card-text","text-primary","mb-0","small"],[1,"card-icon","bg-success","rounded-circle","mb-3","mx-auto"],[1,"bi","bi-currency-rupee","text-white","fs-4"],[1,"card-text","text-success","mb-0","small"],[1,"card-icon","bg-info","rounded-circle","mb-3","mx-auto"],[1,"bi","bi-list-task","text-white","fs-4"],[1,"card-text","text-info","mb-0","small"],[1,"card-icon","bg-warning","rounded-circle","mb-3","mx-auto"],[1,"bi","bi-graph-up","text-white","fs-4"],["class","card-text text-dark mb-0",4,"ngIf"],[1,"card-text","text-warning","mb-0","small"],[1,"col-12","col-md-8","mb-4","mb-md-0"],[1,"card","border-0","shadow-sm"],[1,"card-body"],[1,"card-title","mb-4"],[1,"chart-container",2,"height","300px"],["baseChart","",3,"data","options","type"],[1,"col-12","col-md-4"],[1,"card","border-0","shadow-sm","mb-4"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],[1,"card-title","mb-0"],["routerLink","/expenses",1,"btn","btn-outline-primary","btn-sm"],[1,"list-group","list-group-flush"],["class","list-group-item border-0 px-0 py-3",4,"ngFor","ngForOf"],["class","list-group-item border-0 px-0 py-3",4,"ngIf"],[1,"text-center"],["routerLink","/add",1,"btn","btn-primary","btn-lg","rounded-pill","px-5","py-3","shadow"],[1,"bi","bi-plus-lg","me-2"],[1,"list-group-item","border-0","px-0","py-3"],[1,"d-flex","justify-content-between"],[1,"text-muted"],[1,"text-end"],[1,"mb-0","text-danger"],[1,"badge","bg-secondary"],[1,"text-center","text-muted","mb-0"]],template:function(r,n){if(r&1&&(e(0,"div",0)(1,"div",1)(2,"h2",2),a(3,"Dashboard"),t()(),e(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7),s(9,"i",8),t(),e(10,"h5",9),a(11,"Total Expenses"),t(),e(12,"h3",10),a(13),t(),e(14,"p",11),a(15,"items"),t()()()(),e(16,"div",4)(17,"div",5)(18,"div",6)(19,"div",12),s(20,"i",13),t(),e(21,"h5",9),a(22,"Total Spent"),t(),e(23,"h3",10),a(24),c(25,"number"),t(),e(26,"p",14),a(27,"overall"),t()()()(),e(28,"div",4)(29,"div",5)(30,"div",6)(31,"div",15),s(32,"i",16),t(),e(33,"h5",9),a(34,"Top Category"),t(),e(35,"h3",10),a(36),t(),e(37,"p",17),a(38,"highest spending"),t()()()(),e(39,"div",4)(40,"div",5)(41,"div",6)(42,"div",18),s(43,"i",19),t(),e(44,"h5",9),a(45,"Average"),t(),h(46,q,3,4,"h3",20)(47,z,2,0,"h3",20),e(48,"p",21),a(49,"per expense"),t()()()()(),e(50,"div",3)(51,"div",22)(52,"div",23)(53,"div",24)(54,"h5",25),a(55,"Category Breakdown"),t(),e(56,"div",26),s(57,"canvas",27),t()()()(),e(58,"div",28)(59,"div",23)(60,"div",24)(61,"h5",25),a(62,"Weekly Overview"),t(),e(63,"div",26),s(64,"canvas",27),t()()()()(),e(65,"div",29)(66,"div",24)(67,"div",30)(68,"h5",31),a(69,"Recent Expenses"),t(),e(70,"a",32),a(71,"View All"),t()(),e(72,"div",33),h(73,G,14,10,"div",34),c(74,"slice"),h(75,H,3,0,"div",35),t()()(),e(76,"div",36)(77,"a",37),s(78,"i",38),a(79,"Add Expense "),t()()()),r&2){let o;d(13),p(n.totalExpenses),d(11),u("PKR ",g(25,13,n.totalAmount,"1.2-2")),d(12),p(((o=n.getTopCategory())==null?null:o.category)||"N/A"),d(10),m("ngIf",n.totalExpenses>0),d(),m("ngIf",n.totalExpenses===0),d(10),m("data",n.categoryChartData)("options",n.chartOptions)("type",n.categoryChartType),d(7),m("data",n.weeklyChartData)("options",n.chartOptions)("type",n.weeklyChartType),d(9),m("ngForOf",f(74,16,n.expenses,0,5)),d(2),m("ngIf",n.expenses.length===0)}},dependencies:[O,E,S,M,P,V,_,D,w],styles:[".dashboard-container[_ngcontent-%COMP%]{padding:20px 0}.chart-container[_ngcontent-%COMP%]{position:relative;width:100%;height:100%}.card[_ngcontent-%COMP%]{border:none;border-radius:12px;transition:transform .2s,box-shadow .2s}.card[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.summary-card[_ngcontent-%COMP%]{background:#fff;transition:all .3s ease}.summary-card[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]{width:50px;height:50px;display:flex;align-items:center;justify-content:center}.list-group-item[_ngcontent-%COMP%]{border:none;padding:12px 0}.list-group-item[_ngcontent-%COMP%]:not(:last-child){border-bottom:1px solid #eee}.dashboard-header[_ngcontent-%COMP%]{padding-top:10px}.card-title[_ngcontent-%COMP%]{font-weight:600}.shadow-sm[_ngcontent-%COMP%]{box-shadow:0 .125rem .25rem #00000013!important}.shadow[_ngcontent-%COMP%]{box-shadow:0 .5rem 1rem #00000026!important}.btn-primary[_ngcontent-%COMP%]{background-color:#4361ee;border-color:#4361ee}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#3651d8;border-color:#3651d8}.btn-outline-primary[_ngcontent-%COMP%]{color:#4361ee;border-color:#4361ee}.btn-outline-primary[_ngcontent-%COMP%]:hover{background-color:#4361ee;border-color:#4361ee}.text-danger[_ngcontent-%COMP%]{color:#e63946!important}.bg-primary[_ngcontent-%COMP%]{background-color:#4361ee!important}.bg-success[_ngcontent-%COMP%]{background-color:#4caf50!important}.bg-info[_ngcontent-%COMP%]{background-color:#2196f3!important}.bg-warning[_ngcontent-%COMP%]{background-color:#ff9800!important}@media (max-width: 768px){.dashboard-container[_ngcontent-%COMP%]{padding:10px 0}.card-body[_ngcontent-%COMP%]{padding:1rem}.summary-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:1rem .5rem}}"]})};export{Y as DashboardComponent};
