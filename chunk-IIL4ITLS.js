import{P as s}from"./chunk-7T257EYH.js";var r=class n{deferredPrompt=null;isStandalone=!1;constructor(){this.listenForInstallPrompt(),this.checkStandaloneMode()}listenForInstallPrompt(){window.addEventListener("beforeinstallprompt",t=>{t.preventDefault(),this.deferredPrompt=t,console.log("Install prompt event captured and deferred"),console.log("PWA is now installable")}),window.addEventListener("appinstalled",()=>{console.log("PWA was installed"),this.deferredPrompt=null})}checkStandaloneMode(){this.isStandalone=window.matchMedia("(display-mode: standalone)").matches||navigator.standalone||document.referrer.includes("android-app://"),console.log("App is running in standalone mode:",this.isStandalone)}showInstallPrompt(){if(this.deferredPrompt)return console.log("Showing install prompt to user"),this.deferredPrompt.prompt();console.log("No install prompt available, showing manual installation instructions"),this.hasShownInstallInstructions()||(this.showManualInstallInstructions(),this.setInstallInstructionsShown())}showManualInstallInstructions(){let t=navigator.userAgent,e=/iPad|iPhone|iPod/.test(t),o=/Android/.test(t);alert(e?`To install this app on iOS:
1. Tap the Share button (box with arrow)
2. Select "Add to Home Screen"
3. Tap "Add"`:o?`To install this app on Android:
1. Tap the menu button (3 dots)
2. Select "Install app" or "Add to home screen"`:`To install this app:
1. Look for the install icon in the address bar
2. Or look for "Install" option in the browser menu (3 dots)`)}isInstallable(){let t=this.deferredPrompt!==null&&!this.isStandalone;return console.log("PWA installability status:",t),console.log("Deferred prompt exists:",this.deferredPrompt!==null),console.log("App is standalone:",this.isStandalone),t}getDeferredPrompt(){return this.deferredPrompt}async getInstallPromptResult(){if(this.deferredPrompt){let t=await this.deferredPrompt.userChoice;return console.log("Install prompt result:",t),this.deferredPrompt=null,t}return null}isInStandaloneMode(){return this.isStandalone||window.matchMedia("(display-mode: standalone)").matches||navigator.standalone||document.referrer.includes("android-app://")}canInstall(){let t="serviceWorker"in navigator&&"PushManager"in window,e=!this.isInStandaloneMode();return console.log("PWA support check:",{supportsPWA:t,isNotStandalone:e,deferredPromptExists:this.deferredPrompt!==null}),t&&e}getInstallInstructions(){let t=navigator.userAgent,e=/iPad|iPhone|iPod/.test(t),o=/Android/.test(t);return e?'To install on iOS: Tap the Share button (box with arrow) \u2192 "Add to Home Screen" \u2192 "Add"':o?'To install on Android: Tap the menu button (3 dots) \u2192 "Install app" or "Add to home screen"':"To install: Look for the install icon in the address bar or browser menu"}hasShownInstallInstructions(){return localStorage.getItem("installInstructionsShown")==="true"}setInstallInstructionsShown(){localStorage.setItem("installInstructionsShown","true")}resetInstallInstructions(){localStorage.removeItem("installInstructionsShown")}static \u0275fac=function(e){return new(e||n)};static \u0275prov=s({token:n,factory:n.\u0275fac,providedIn:"root"})};export{r as a};
