import{a as R,b as U,c as L,d as Y,e as K,f as N,g as j,h as V,i as W,j as $,k as q,l as z,m as G}from"./chunk-LVMBWIBF.js";import{a as J}from"./chunk-CFUGR756.js";import"./chunk-CZV4CW5C.js";import{d as T,h as A}from"./chunk-SA2NUYQQ.js";import{b as H}from"./chunk-ZG5GLZP6.js";import{Ea as S,Ia as u,Mb as B,Nb as _,Ob as I,Sa as f,Sb as P,Ta as p,Tb as O,Ua as n,Ub as k,Va as e,Vb as F,Wa as c,Za as y,bb as E,cb as b,eb as i,fb as g,gb as h,hb as M,ob as D,pb as l,rb as s,sb as w,ta as a,ya as x}from"./chunk-SNEZJZPV.js";var Z=(d,r,o)=>({"bg-success":d,"bg-warning":r,"bg-danger":o});function ee(d,r){if(d&1&&(n(0,"div",60),c(1,"i",61),n(2,"strong"),i(3,"Warning:"),e(),i(4),l(5,"number"),e()),d&2){let o=y();a(4),h(" You are over budget by PKR ",s(5,1,o.currentMonthSpent-(o.currentMonthIncome||0),"1.2-2"),"! ")}}function te(d,r){if(d&1&&(n(0,"h3",28),i(1),l(2,"number"),e()),d&2){let o=y();a(),h("PKR ",s(2,1,o.totalAmount/o.totalExpenses,"1.2-2"))}}function ne(d,r){d&1&&(n(0,"h3",28),i(1,"PKR 0.00"),e())}function ie(d,r){if(d&1&&(n(0,"div",62)(1,"div",63)(2,"div")(3,"h6",2),i(4),e(),n(5,"small",46),i(6),l(7,"date"),e()(),n(8,"div",64)(9,"h6",16),i(10),l(11,"number"),e(),n(12,"span",65),i(13),e()()()()),d&2){let o=r.$implicit;a(4),g(o.title),a(2),g(s(7,4,o.date,"MMM d")),a(4),h("- PKR ",s(11,7,o.amount,"1.2-2")),a(3),g(o.category)}}function ae(d,r){d&1&&(n(0,"div",62)(1,"p",66),i(2,"No expenses recorded yet"),e()())}Y.register(L,R,U,q,z,j,N,W,$,V,K);var Q=class d{constructor(r,o){this.expenseService=r;this.incomeService=o}expenses=[];totalExpenses=0;totalAmount=0;weeklyExpenses=[];categorySummaries=[];currentMonthIncome=null;currentMonthSpent=0;remainingBudget=0;percentageUsed=0;isOverBudget=!1;weeklyChartType="line";categoryChartType="doughnut";budgetChartType="doughnut";weeklyChartData={labels:[],datasets:[{data:[],label:"Amount (PKR)",borderColor:"#42A5F5",backgroundColor:"rgba(66, 165, 245, 0.2)",fill:!0}]};categoryChartData={labels:[],datasets:[{data:[],backgroundColor:["#FF6384","#36A2EB","#FFCE56","#4BC0C0","#9966FF","#FF9F40","#FF6384","#C9CBCF","#4BC0C0","#FF6384","#36A2EB","#FFCE56"]}]};monthlyBudgetChartData={labels:[],datasets:[{data:[],backgroundColor:["#36A2EB","#4BC0C0"]}]};chartOptions={responsive:!0,maintainAspectRatio:!1};currentYear=new Date().getFullYear();currentMonth=new Date().getMonth()+1;Math=Math;ngOnInit(){this.loadDashboardData()}loadDashboardData(){this.expenses=this.expenseService.getExpenses(),this.loadIncomeData(),this.calculateDashboardStats(),this.updateCharts()}loadIncomeData(){let r=this.incomeService.getMonthlyIncome(this.currentYear,this.currentMonth);this.currentMonthIncome=r?r.amount:null,this.currentMonthSpent=this.incomeService.getMonthlySpent(this.currentYear,this.currentMonth),this.remainingBudget=this.incomeService.getRemainingBudget(this.currentYear,this.currentMonth),this.percentageUsed=this.incomeService.getPercentageUsed(this.currentYear,this.currentMonth),this.isOverBudget=this.incomeService.isOverBudget(this.currentYear,this.currentMonth)}calculateDashboardStats(){this.totalExpenses=this.expenses.length,this.totalAmount=this.expenses.reduce((t,m)=>t+m.amount,0),this.weeklyExpenses=[];let r=new Date;for(let t=6;t>=0;t--){let m=new Date(r);m.setDate(r.getDate()-t);let X=this.expenses.filter(v=>new Date(v.date).toDateString()===m.toDateString()).reduce((v,C)=>v+C.amount,0);this.weeklyExpenses.push({day:m.toLocaleDateString("en-US",{weekday:"short"}),amount:X})}let o=new Map;this.expenses.forEach(t=>{o.has(t.category)||o.set(t.category,{total:0,count:0});let m=o.get(t.category);m.total+=t.amount,m.count+=1}),this.categorySummaries=Array.from(o.entries()).map(([t,m])=>({category:t,total:m.total,count:m.count})).sort((t,m)=>m.total-t.total)}updateCharts(){this.weeklyChartData.labels=this.weeklyExpenses.map(r=>r.day),this.weeklyChartData.datasets[0].data=this.weeklyExpenses.map(r=>r.amount),this.categoryChartData.labels=this.categorySummaries.map(r=>r.category),this.categoryChartData.datasets[0].data=this.categorySummaries.map(r=>r.total),this.currentMonthIncome!==null?(this.monthlyBudgetChartData.labels=["Spent","Remaining"],this.monthlyBudgetChartData.datasets[0].data=[this.currentMonthSpent,Math.max(0,this.currentMonthIncome-this.currentMonthSpent)],this.monthlyBudgetChartData.datasets[0].backgroundColor=[this.isOverBudget?"#dc3545":"#36A2EB",this.isOverBudget?"#ffc107":"#4BC0C0"]):(this.monthlyBudgetChartData.labels=["No Income Set"],this.monthlyBudgetChartData.datasets[0].data=[1],this.monthlyBudgetChartData.datasets[0].backgroundColor=["#999999"])}getTopCategory(){return this.categorySummaries.length>0?this.categorySummaries[0]:null}static \u0275fac=function(o){return new(o||d)(x(J),x(H))};static \u0275cmp=S({type:d,selectors:[["app-dashboard"]],decls:150,vars:69,consts:[[1,"container-fluid"],[1,"dashboard-header","mb-4"],[1,"mb-0"],[1,"row","mb-4"],[1,"col-12","mb-3"],[1,"card","border-0","shadow-sm"],[1,"card-body"],[1,"d-flex","justify-content-between","align-items-center"],[1,"card-title","mb-0"],[1,"card-text","mb-0","text-muted"],["routerLink","/set-income",1,"btn","btn-outline-primary","btn-sm","me-2"],["routerLink","/incomes",1,"btn","btn-outline-secondary","btn-sm"],[1,"row","mt-3"],[1,"col-md-3","col-6","mb-3"],[1,"text-center"],[1,"text-muted","small"],[1,"mb-0","text-danger"],[1,"mt-3"],[1,"d-flex","justify-content-between","mb-1"],[1,"progress",2,"height","15px"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar",3,"ngClass"],["class","alert alert-danger mt-3 mb-0",4,"ngIf"],[1,"col-6","col-md-3","mb-3"],[1,"card","summary-card","h-100","border-0","shadow-sm"],[1,"card-body","text-center"],[1,"card-icon","bg-primary","rounded-circle","mb-3","mx-auto"],[1,"bi","bi-receipt","text-white","fs-4"],[1,"card-title","text-muted"],[1,"card-text","text-dark","mb-0"],[1,"card-text","text-primary","mb-0","small"],[1,"card-icon","bg-success","rounded-circle","mb-3","mx-auto"],[1,"bi","bi-cash","text-white","fs-4"],[1,"card-text","text-success","mb-0","small"],[1,"card-icon","bg-info","rounded-circle","mb-3","mx-auto"],[1,"bi","bi-list-task","text-white","fs-4"],[1,"card-text","text-info","mb-0","small"],[1,"card-icon","bg-warning","rounded-circle","mb-3","mx-auto"],[1,"bi","bi-graph-up","text-white","fs-4"],["class","card-text text-dark mb-0",4,"ngIf"],[1,"card-text","text-warning","mb-0","small"],[1,"col-12","col-md-4","mb-4","mb-md-0"],[1,"card","border-0","shadow-sm","h-100"],[1,"card-title","mb-4"],[1,"chart-container",2,"height","250px"],["baseChart","",3,"data","options","type"],[1,"text-center","mt-2"],[1,"text-muted"],[1,"badge","bg-primary","me-2"],[1,"badge","bg-info"],[1,"col-12","col-md-5","mb-4","mb-md-0"],[1,"col-12","col-md-3"],[1,"card","border-0","shadow-sm","mb-4"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],["routerLink","/expenses",1,"btn","btn-outline-primary","btn-sm"],[1,"list-group","list-group-flush"],["class","list-group-item border-0 px-0 py-3",4,"ngFor","ngForOf"],["class","list-group-item border-0 px-0 py-3",4,"ngIf"],[1,"text-center","mt-1","mb-5"],["routerLink","/add",1,"btn","btn-primary","btn-lg","rounded-pill","px-5","py-3","shadow"],[1,"bi","bi-plus-lg","me-2"],[1,"alert","alert-danger","mt-3","mb-0"],[1,"bi","bi-exclamation-triangle-fill","me-2"],[1,"list-group-item","border-0","px-0","py-3"],[1,"d-flex","justify-content-between"],[1,"text-end"],[1,"badge","bg-secondary"],[1,"text-center","text-muted","mb-0"]],template:function(o,t){if(o&1&&(n(0,"div",0)(1,"div",1)(2,"h2",2),i(3,"Dashboard"),e()(),n(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"div")(10,"h5",8),i(11,"Monthly Budget"),e(),n(12,"p",9),i(13),l(14,"date"),e()(),n(15,"div")(16,"a",10),i(17,"Set Income"),e(),n(18,"a",11),i(19,"View All"),e()()(),n(20,"div",12)(21,"div",13)(22,"div",14)(23,"h6",15),i(24,"Income"),e(),n(25,"h4",2),i(26),l(27,"number"),e()()(),n(28,"div",13)(29,"div",14)(30,"h6",15),i(31,"Spent"),e(),n(32,"h4",16),i(33),l(34,"number"),e()()(),n(35,"div",13)(36,"div",14)(37,"h6",15),i(38,"Remaining"),e(),n(39,"h4",2),i(40),l(41,"number"),e()()(),n(42,"div",13)(43,"div",14)(44,"h6",15),i(45,"Used"),e(),n(46,"h4",2),i(47),l(48,"number"),e()()()(),n(49,"div",17)(50,"div",18)(51,"small"),i(52,"0%"),e(),n(53,"small"),i(54),l(55,"number"),e(),n(56,"small"),i(57,"100%"),e()(),n(58,"div",19),c(59,"div",20),e()(),u(60,ee,6,4,"div",21),e()()()(),n(61,"div",3)(62,"div",22)(63,"div",23)(64,"div",24)(65,"div",25),c(66,"i",26),e(),n(67,"h5",27),i(68,"Total Expenses"),e(),n(69,"h3",28),i(70),e(),n(71,"p",29),i(72,"items"),e()()()(),n(73,"div",22)(74,"div",23)(75,"div",24)(76,"div",30),c(77,"i",31),e(),n(78,"h5",27),i(79,"Total Spent"),e(),n(80,"h3",28),i(81),l(82,"number"),e(),n(83,"p",32),i(84,"overall"),e()()()(),n(85,"div",22)(86,"div",23)(87,"div",24)(88,"div",33),c(89,"i",34),e(),n(90,"h5",27),i(91,"Top Category"),e(),n(92,"h3",28),i(93),e(),n(94,"p",35),i(95,"highest spending"),e()()()(),n(96,"div",22)(97,"div",23)(98,"div",24)(99,"div",36),c(100,"i",37),e(),n(101,"h5",27),i(102,"Average"),e(),u(103,te,3,4,"h3",38)(104,ne,2,0,"h3",38),n(105,"p",39),i(106,"per expense"),e()()()()(),n(107,"div",3)(108,"div",40)(109,"div",41)(110,"div",6)(111,"h5",42),i(112,"Monthly Budget"),e(),n(113,"div",43),c(114,"canvas",44),e(),n(115,"div",45)(116,"small",46)(117,"span",47),i(118,"Spent"),e(),n(119,"span",48),i(120,"Remaining"),e()()()()()(),n(121,"div",49)(122,"div",41)(123,"div",6)(124,"h5",42),i(125,"Category Breakdown"),e(),n(126,"div",43),c(127,"canvas",44),e()()()(),n(128,"div",50)(129,"div",41)(130,"div",6)(131,"h5",42),i(132,"Weekly Overview"),e(),n(133,"div",43),c(134,"canvas",44),e()()()()(),n(135,"div",51)(136,"div",6)(137,"div",52)(138,"h5",8),i(139,"Recent Expenses"),e(),n(140,"a",53),i(141,"View All"),e()(),n(142,"div",54),u(143,ie,14,10,"div",55),l(144,"slice"),u(145,ae,3,0,"div",56),e()()(),n(146,"div",57)(147,"a",58),c(148,"i",59),i(149,"Add Expense "),e()()()),o&2){let m;a(13),M("",t.currentYear," - ",s(14,40,t.currentMonth,"MMMM")),a(12),b("text-danger",t.isOverBudget),a(),g(t.currentMonthIncome!==null?"PKR "+s(27,43,t.currentMonthIncome,"1.2-2"):"Not Set"),a(7),h("PKR ",s(34,46,t.currentMonthSpent,"1.2-2")),a(6),b("text-danger",t.remainingBudget<0)("text-success",t.remainingBudget>=0),a(),h(" PKR ",s(41,49,t.remainingBudget,"1.2-2")," "),a(6),b("text-danger",t.percentageUsed>100)("text-warning",t.percentageUsed>=80&&t.percentageUsed<=100)("text-success",t.percentageUsed<80),a(),h(" ",s(48,52,t.percentageUsed,"1.0-0"),"% "),a(7),h("",s(55,55,t.percentageUsed,"1.0-0"),"%"),a(5),E("width",t.Math.min(100,t.percentageUsed),"%"),p("ngClass",D(65,Z,t.percentageUsed<80,t.percentageUsed>=80&&t.percentageUsed<=100,t.percentageUsed>100)),f("aria-valuenow",t.percentageUsed),a(),p("ngIf",t.isOverBudget),a(10),g(t.totalExpenses),a(11),h("PKR ",s(82,58,t.totalAmount,"1.2-2")),a(12),g(((m=t.getTopCategory())==null?null:m.category)||"N/A"),a(10),p("ngIf",t.totalExpenses>0),a(),p("ngIf",t.totalExpenses===0),a(10),p("data",t.monthlyBudgetChartData)("options",t.chartOptions)("type",t.budgetChartType),a(13),p("data",t.categoryChartData)("options",t.chartOptions)("type",t.categoryChartType),a(7),p("data",t.weeklyChartData)("options",t.chartOptions)("type",t.weeklyChartType),a(9),p("ngForOf",w(144,61,t.expenses,0,5)),a(2),p("ngIf",t.expenses.length===0)}},dependencies:[F,B,_,I,A,T,G,k,O,P],styles:[".dashboard-container[_ngcontent-%COMP%]{padding:20px 0}.chart-container[_ngcontent-%COMP%]{position:relative;width:100%;height:100%}.card[_ngcontent-%COMP%]{border:none;border-radius:12px;transition:transform .2s,box-shadow .2s}.card[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.summary-card[_ngcontent-%COMP%]{background:#fff;transition:all .3s ease}.summary-card[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]{width:50px;height:50px;display:flex;align-items:center;justify-content:center}.list-group-item[_ngcontent-%COMP%]{border:none;padding:12px 0}.list-group-item[_ngcontent-%COMP%]:not(:last-child){border-bottom:1px solid #eee}.dashboard-header[_ngcontent-%COMP%]{padding-top:10px}.card-title[_ngcontent-%COMP%]{font-weight:600}.shadow-sm[_ngcontent-%COMP%]{box-shadow:0 .125rem .25rem #00000013!important}.shadow[_ngcontent-%COMP%]{box-shadow:0 .5rem 1rem #00000026!important}.btn-primary[_ngcontent-%COMP%]{background-color:#4361ee;border-color:#4361ee}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#3651d8;border-color:#3651d8}.btn-outline-primary[_ngcontent-%COMP%]{color:#4361ee;border-color:#4361ee}.btn-outline-primary[_ngcontent-%COMP%]:hover{background-color:#4361ee;border-color:#4361ee}.text-danger[_ngcontent-%COMP%]{color:#e63946!important}.bg-primary[_ngcontent-%COMP%]{background-color:#4361ee!important}.bg-success[_ngcontent-%COMP%]{background-color:#4caf50!important}.bg-info[_ngcontent-%COMP%]{background-color:#2196f3!important}.bg-warning[_ngcontent-%COMP%]{background-color:#ff9800!important}@media (max-width: 768px){.dashboard-container[_ngcontent-%COMP%]{padding:10px 0}.card-body[_ngcontent-%COMP%]{padding:1rem}.summary-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:1rem .5rem}}"]})};export{Q as DashboardComponent};
