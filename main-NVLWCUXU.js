import{a as Qi}from"./chunk-JM6T4NGY.js";import{c as Sn,d as Ne,f as ae,g as Le}from"./chunk-PT2JM3JA.js";import{a as Hi,b as Ui,c as Yi,d as Ae,e as Ut,f as Oe,g as Re,h as zi,i as Wi,j as De}from"./chunk-XBZE7J4I.js";import{a as Ki,c as $i,e as qi,o as Xi}from"./chunk-MESOCZI5.js";import{b as Gi}from"./chunk-DREWYT65.js";import{a as Pe}from"./chunk-VSDMO5SJ.js";import{i as ft,j as gt,k as vt,l as Ni,m as Li,n as Fi,p as Bi,q as ji,s as Z,w as Vi}from"./chunk-ZTY7VYUY.js";import{$ as vi,$a as yn,A as Jt,Aa as f,Ab as Ai,Bb as Tn,Cb as In,D as pi,Db as kn,Ea as Ei,F as bt,Fb as Me,Ga as H,Gb as Oi,Ha as Ti,Hb as Ht,Ib as Se,Ja as Ii,Jb as Mn,M as bi,Ma as R,Mb as Ri,N as hi,Na as U,O as te,Oa as Ft,P as fi,R as mt,Ra as F,S as gi,Sb as Di,Ta as tt,Tb as Pi,U as P,Ua as It,V,X as Lt,Y as ee,Z as S,Za as ki,_ as Ie,a as Dt,b as Ee,bb as v,cb as b,d as lo,da as I,db as h,e as mo,ea as k,eb as w,f as di,fa as ne,fb as Cn,ga as ke,gb as xn,h as Pt,hb as wn,ib as q,k as Nt,ka as _i,l as Te,la as yi,lb as A,mb as Mi,nb as Y,ob as Bt,pb as jt,qa as _n,rb as Vt,s as ot,sb as kt,t as mi,tb as Mt,ua as Ci,ub as ie,va as xi,vb as En,w as ui,wa as wi,wb as ht,xb as C,yb as et,z as pt,zb as Si}from"./chunk-I6MSPIIX.js";var Ia=lo((Fl,on)=>{"use strict";(function(e,n,t,a){"use strict";var r=["","webkit","Moz","MS","ms","o"],c=n.createElement("div"),d="function",u=Math.round,g=Math.abs,T=Date.now;function B(i,o,s){return setTimeout(rn(i,s),o)}function j(i,o,s){return Array.isArray(i)?(_(i,s[o],s),!0):!1}function _(i,o,s){var l;if(i)if(i.forEach)i.forEach(o,s);else if(i.length!==a)for(l=0;l<i.length;)o.call(s,i[l],l,i),l++;else for(l in i)i.hasOwnProperty(l)&&o.call(s,i[l],l,i)}function E(i,o,s){var l="DEPRECATED METHOD: "+o+`
`+s+` AT 
`;return function(){var m=new Error("get-stack-trace"),p=m&&m.stack?m.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",y=e.console&&(e.console.warn||e.console.log);return y&&y.call(e.console,l,p),i.apply(this,arguments)}}var x;typeof Object.assign!="function"?x=function(o){if(o===a||o===null)throw new TypeError("Cannot convert undefined or null to object");for(var s=Object(o),l=1;l<arguments.length;l++){var m=arguments[l];if(m!==a&&m!==null)for(var p in m)m.hasOwnProperty(p)&&(s[p]=m[p])}return s}:x=Object.assign;var st=E(function(o,s,l){for(var m=Object.keys(s),p=0;p<m.length;)(!l||l&&o[m[p]]===a)&&(o[m[p]]=s[m[p]]),p++;return o},"extend","Use `assign`."),ka=E(function(o,s){return st(o,s,!0)},"merge","Use `assign`.");function $(i,o,s){var l=o.prototype,m;m=i.prototype=Object.create(l),m.constructor=i,m._super=l,s&&x(m,s)}function rn(i,o){return function(){return i.apply(o,arguments)}}function sn(i,o){return typeof i==d?i.apply(o&&o[0]||a,o):i}function Vn(i,o){return i===a?o:i}function le(i,o,s){_(me(o),function(l){i.addEventListener(l,s,!1)})}function de(i,o,s){_(me(o),function(l){i.removeEventListener(l,s,!1)})}function Hn(i,o){for(;i;){if(i==o)return!0;i=i.parentNode}return!1}function xt(i,o){return i.indexOf(o)>-1}function me(i){return i.trim().split(/\s+/g)}function Ot(i,o,s){if(i.indexOf&&!s)return i.indexOf(o);for(var l=0;l<i.length;){if(s&&i[l][s]==o||!s&&i[l]===o)return l;l++}return-1}function ue(i){return Array.prototype.slice.call(i,0)}function Un(i,o,s){for(var l=[],m=[],p=0;p<i.length;){var y=o?i[p][o]:i[p];Ot(m,y)<0&&l.push(i[p]),m[p]=y,p++}return s&&(o?l=l.sort(function(L,W){return L[o]>W[o]}):l=l.sort()),l}function pe(i,o){for(var s,l,m=o[0].toUpperCase()+o.slice(1),p=0;p<r.length;){if(s=r[p],l=s?s+m:o,l in i)return l;p++}return a}var Ma=1;function Sa(){return Ma++}function Yn(i){var o=i.ownerDocument||i;return o.defaultView||o.parentWindow||e}var Aa=/mobile|tablet|ip(ad|hone|od)|android/i,zn="ontouchstart"in e,Oa=pe(e,"PointerEvent")!==a,Ra=zn&&Aa.test(navigator.userAgent),Wt="touch",Da="pen",cn="mouse",Pa="kinect",Na=25,z=1,wt=2,O=4,K=8,be=1,Gt=2,Kt=4,$t=8,qt=16,nt=Gt|Kt,Et=$t|qt,Wn=nt|Et,Gn=["x","y"],he=["clientX","clientY"];function X(i,o){var s=this;this.manager=i,this.callback=o,this.element=i.element,this.target=i.options.inputTarget,this.domHandler=function(l){sn(i.options.enable,[i])&&s.handler(l)},this.init()}X.prototype={handler:function(){},init:function(){this.evEl&&le(this.element,this.evEl,this.domHandler),this.evTarget&&le(this.target,this.evTarget,this.domHandler),this.evWin&&le(Yn(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&de(this.element,this.evEl,this.domHandler),this.evTarget&&de(this.target,this.evTarget,this.domHandler),this.evWin&&de(Yn(this.element),this.evWin,this.domHandler)}};function La(i){var o,s=i.options.inputClass;return s?o=s:Oa?o=dn:Ra?o=ve:zn?o=mn:o=ge,new o(i,Fa)}function Fa(i,o,s){var l=s.pointers.length,m=s.changedPointers.length,p=o&z&&l-m===0,y=o&(O|K)&&l-m===0;s.isFirst=!!p,s.isFinal=!!y,p&&(i.session={}),s.eventType=o,Ba(i,s),i.emit("hammer.input",s),i.recognize(s),i.session.prevInput=s}function Ba(i,o){var s=i.session,l=o.pointers,m=l.length;s.firstInput||(s.firstInput=Kn(o)),m>1&&!s.firstMultiple?s.firstMultiple=Kn(o):m===1&&(s.firstMultiple=!1);var p=s.firstInput,y=s.firstMultiple,D=y?y.center:p.center,L=o.center=$n(l);o.timeStamp=T(),o.deltaTime=o.timeStamp-p.timeStamp,o.angle=ln(D,L),o.distance=fe(D,L),ja(s,o),o.offsetDirection=Xn(o.deltaX,o.deltaY);var W=qn(o.deltaTime,o.deltaX,o.deltaY);o.overallVelocityX=W.x,o.overallVelocityY=W.y,o.overallVelocity=g(W.x)>g(W.y)?W.x:W.y,o.scale=y?Ua(y.pointers,l):1,o.rotation=y?Ha(y.pointers,l):0,o.maxPointers=s.prevInput?o.pointers.length>s.prevInput.maxPointers?o.pointers.length:s.prevInput.maxPointers:o.pointers.length,Va(s,o);var at=i.element;Hn(o.srcEvent.target,at)&&(at=o.srcEvent.target),o.target=at}function ja(i,o){var s=o.center,l=i.offsetDelta||{},m=i.prevDelta||{},p=i.prevInput||{};(o.eventType===z||p.eventType===O)&&(m=i.prevDelta={x:p.deltaX||0,y:p.deltaY||0},l=i.offsetDelta={x:s.x,y:s.y}),o.deltaX=m.x+(s.x-l.x),o.deltaY=m.y+(s.y-l.y)}function Va(i,o){var s=i.lastInterval||o,l=o.timeStamp-s.timeStamp,m,p,y,D;if(o.eventType!=K&&(l>Na||s.velocity===a)){var L=o.deltaX-s.deltaX,W=o.deltaY-s.deltaY,at=qn(l,L,W);p=at.x,y=at.y,m=g(at.x)>g(at.y)?at.x:at.y,D=Xn(L,W),i.lastInterval=o}else m=s.velocity,p=s.velocityX,y=s.velocityY,D=s.direction;o.velocity=m,o.velocityX=p,o.velocityY=y,o.direction=D}function Kn(i){for(var o=[],s=0;s<i.pointers.length;)o[s]={clientX:u(i.pointers[s].clientX),clientY:u(i.pointers[s].clientY)},s++;return{timeStamp:T(),pointers:o,center:$n(o),deltaX:i.deltaX,deltaY:i.deltaY}}function $n(i){var o=i.length;if(o===1)return{x:u(i[0].clientX),y:u(i[0].clientY)};for(var s=0,l=0,m=0;m<o;)s+=i[m].clientX,l+=i[m].clientY,m++;return{x:u(s/o),y:u(l/o)}}function qn(i,o,s){return{x:o/i||0,y:s/i||0}}function Xn(i,o){return i===o?be:g(i)>=g(o)?i<0?Gt:Kt:o<0?$t:qt}function fe(i,o,s){s||(s=Gn);var l=o[s[0]]-i[s[0]],m=o[s[1]]-i[s[1]];return Math.sqrt(l*l+m*m)}function ln(i,o,s){s||(s=Gn);var l=o[s[0]]-i[s[0]],m=o[s[1]]-i[s[1]];return Math.atan2(m,l)*180/Math.PI}function Ha(i,o){return ln(o[1],o[0],he)+ln(i[1],i[0],he)}function Ua(i,o){return fe(o[0],o[1],he)/fe(i[0],i[1],he)}var Ya={mousedown:z,mousemove:wt,mouseup:O},za="mousedown",Wa="mousemove mouseup";function ge(){this.evEl=za,this.evWin=Wa,this.pressed=!1,X.apply(this,arguments)}$(ge,X,{handler:function(o){var s=Ya[o.type];s&z&&o.button===0&&(this.pressed=!0),s&wt&&o.which!==1&&(s=O),this.pressed&&(s&O&&(this.pressed=!1),this.callback(this.manager,s,{pointers:[o],changedPointers:[o],pointerType:cn,srcEvent:o}))}});var Ga={pointerdown:z,pointermove:wt,pointerup:O,pointercancel:K,pointerout:K},Ka={2:Wt,3:Da,4:cn,5:Pa},Qn="pointerdown",Zn="pointermove pointerup pointercancel";e.MSPointerEvent&&!e.PointerEvent&&(Qn="MSPointerDown",Zn="MSPointerMove MSPointerUp MSPointerCancel");function dn(){this.evEl=Qn,this.evWin=Zn,X.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}$(dn,X,{handler:function(o){var s=this.store,l=!1,m=o.type.toLowerCase().replace("ms",""),p=Ga[m],y=Ka[o.pointerType]||o.pointerType,D=y==Wt,L=Ot(s,o.pointerId,"pointerId");p&z&&(o.button===0||D)?L<0&&(s.push(o),L=s.length-1):p&(O|K)&&(l=!0),!(L<0)&&(s[L]=o,this.callback(this.manager,p,{pointers:s,changedPointers:[o],pointerType:y,srcEvent:o}),l&&s.splice(L,1))}});var $a={touchstart:z,touchmove:wt,touchend:O,touchcancel:K},qa="touchstart",Xa="touchstart touchmove touchend touchcancel";function Jn(){this.evTarget=qa,this.evWin=Xa,this.started=!1,X.apply(this,arguments)}$(Jn,X,{handler:function(o){var s=$a[o.type];if(s===z&&(this.started=!0),!!this.started){var l=Qa.call(this,o,s);s&(O|K)&&l[0].length-l[1].length===0&&(this.started=!1),this.callback(this.manager,s,{pointers:l[0],changedPointers:l[1],pointerType:Wt,srcEvent:o})}}});function Qa(i,o){var s=ue(i.touches),l=ue(i.changedTouches);return o&(O|K)&&(s=Un(s.concat(l),"identifier",!0)),[s,l]}var Za={touchstart:z,touchmove:wt,touchend:O,touchcancel:K},Ja="touchstart touchmove touchend touchcancel";function ve(){this.evTarget=Ja,this.targetIds={},X.apply(this,arguments)}$(ve,X,{handler:function(o){var s=Za[o.type],l=to.call(this,o,s);l&&this.callback(this.manager,s,{pointers:l[0],changedPointers:l[1],pointerType:Wt,srcEvent:o})}});function to(i,o){var s=ue(i.touches),l=this.targetIds;if(o&(z|wt)&&s.length===1)return l[s[0].identifier]=!0,[s,s];var m,p,y=ue(i.changedTouches),D=[],L=this.target;if(p=s.filter(function(W){return Hn(W.target,L)}),o===z)for(m=0;m<p.length;)l[p[m].identifier]=!0,m++;for(m=0;m<y.length;)l[y[m].identifier]&&D.push(y[m]),o&(O|K)&&delete l[y[m].identifier],m++;if(D.length)return[Un(p.concat(D),"identifier",!0),D]}var eo=2500,ti=25;function mn(){X.apply(this,arguments);var i=rn(this.handler,this);this.touch=new ve(this.manager,i),this.mouse=new ge(this.manager,i),this.primaryTouch=null,this.lastTouches=[]}$(mn,X,{handler:function(o,s,l){var m=l.pointerType==Wt,p=l.pointerType==cn;if(!(p&&l.sourceCapabilities&&l.sourceCapabilities.firesTouchEvents)){if(m)no.call(this,s,l);else if(p&&io.call(this,l))return;this.callback(o,s,l)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function no(i,o){i&z?(this.primaryTouch=o.changedPointers[0].identifier,ei.call(this,o)):i&(O|K)&&ei.call(this,o)}function ei(i){var o=i.changedPointers[0];if(o.identifier===this.primaryTouch){var s={x:o.clientX,y:o.clientY};this.lastTouches.push(s);var l=this.lastTouches,m=function(){var p=l.indexOf(s);p>-1&&l.splice(p,1)};setTimeout(m,eo)}}function io(i){for(var o=i.srcEvent.clientX,s=i.srcEvent.clientY,l=0;l<this.lastTouches.length;l++){var m=this.lastTouches[l],p=Math.abs(o-m.x),y=Math.abs(s-m.y);if(p<=ti&&y<=ti)return!0}return!1}var ni=pe(c.style,"touchAction"),ii=ni!==a,ai="compute",oi="auto",un="manipulation",Tt="none",Xt="pan-x",Qt="pan-y",_e=oo();function pn(i,o){this.manager=i,this.set(o)}pn.prototype={set:function(i){i==ai&&(i=this.compute()),ii&&this.manager.element.style&&_e[i]&&(this.manager.element.style[ni]=i),this.actions=i.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var i=[];return _(this.manager.recognizers,function(o){sn(o.options.enable,[o])&&(i=i.concat(o.getTouchAction()))}),ao(i.join(" "))},preventDefaults:function(i){var o=i.srcEvent,s=i.offsetDirection;if(this.manager.session.prevented){o.preventDefault();return}var l=this.actions,m=xt(l,Tt)&&!_e[Tt],p=xt(l,Qt)&&!_e[Qt],y=xt(l,Xt)&&!_e[Xt];if(m){var D=i.pointers.length===1,L=i.distance<2,W=i.deltaTime<250;if(D&&L&&W)return}if(!(y&&p)&&(m||p&&s&nt||y&&s&Et))return this.preventSrc(o)},preventSrc:function(i){this.manager.session.prevented=!0,i.preventDefault()}};function ao(i){if(xt(i,Tt))return Tt;var o=xt(i,Xt),s=xt(i,Qt);return o&&s?Tt:o||s?o?Xt:Qt:xt(i,un)?un:oi}function oo(){if(!ii)return!1;var i={},o=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(s){i[s]=o?e.CSS.supports("touch-action",s):!0}),i}var ye=1,Q=2,Rt=4,ut=8,ct=ut,Zt=16,it=32;function lt(i){this.options=x({},this.defaults,i||{}),this.id=Sa(),this.manager=null,this.options.enable=Vn(this.options.enable,!0),this.state=ye,this.simultaneous={},this.requireFail=[]}lt.prototype={defaults:{},set:function(i){return x(this.options,i),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(i){if(j(i,"recognizeWith",this))return this;var o=this.simultaneous;return i=Ce(i,this),o[i.id]||(o[i.id]=i,i.recognizeWith(this)),this},dropRecognizeWith:function(i){return j(i,"dropRecognizeWith",this)?this:(i=Ce(i,this),delete this.simultaneous[i.id],this)},requireFailure:function(i){if(j(i,"requireFailure",this))return this;var o=this.requireFail;return i=Ce(i,this),Ot(o,i)===-1&&(o.push(i),i.requireFailure(this)),this},dropRequireFailure:function(i){if(j(i,"dropRequireFailure",this))return this;i=Ce(i,this);var o=Ot(this.requireFail,i);return o>-1&&this.requireFail.splice(o,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(i){return!!this.simultaneous[i.id]},emit:function(i){var o=this,s=this.state;function l(m){o.manager.emit(m,i)}s<ut&&l(o.options.event+ri(s)),l(o.options.event),i.additionalEvent&&l(i.additionalEvent),s>=ut&&l(o.options.event+ri(s))},tryEmit:function(i){if(this.canEmit())return this.emit(i);this.state=it},canEmit:function(){for(var i=0;i<this.requireFail.length;){if(!(this.requireFail[i].state&(it|ye)))return!1;i++}return!0},recognize:function(i){var o=x({},i);if(!sn(this.options.enable,[this,o])){this.reset(),this.state=it;return}this.state&(ct|Zt|it)&&(this.state=ye),this.state=this.process(o),this.state&(Q|Rt|ut|Zt)&&this.tryEmit(o)},process:function(i){},getTouchAction:function(){},reset:function(){}};function ri(i){return i&Zt?"cancel":i&ut?"end":i&Rt?"move":i&Q?"start":""}function si(i){return i==qt?"down":i==$t?"up":i==Gt?"left":i==Kt?"right":""}function Ce(i,o){var s=o.manager;return s?s.get(i):i}function J(){lt.apply(this,arguments)}$(J,lt,{defaults:{pointers:1},attrTest:function(i){var o=this.options.pointers;return o===0||i.pointers.length===o},process:function(i){var o=this.state,s=i.eventType,l=o&(Q|Rt),m=this.attrTest(i);return l&&(s&K||!m)?o|Zt:l||m?s&O?o|ut:o&Q?o|Rt:Q:it}});function xe(){J.apply(this,arguments),this.pX=null,this.pY=null}$(xe,J,{defaults:{event:"pan",threshold:10,pointers:1,direction:Wn},getTouchAction:function(){var i=this.options.direction,o=[];return i&nt&&o.push(Qt),i&Et&&o.push(Xt),o},directionTest:function(i){var o=this.options,s=!0,l=i.distance,m=i.direction,p=i.deltaX,y=i.deltaY;return m&o.direction||(o.direction&nt?(m=p===0?be:p<0?Gt:Kt,s=p!=this.pX,l=Math.abs(i.deltaX)):(m=y===0?be:y<0?$t:qt,s=y!=this.pY,l=Math.abs(i.deltaY))),i.direction=m,s&&l>o.threshold&&m&o.direction},attrTest:function(i){return J.prototype.attrTest.call(this,i)&&(this.state&Q||!(this.state&Q)&&this.directionTest(i))},emit:function(i){this.pX=i.deltaX,this.pY=i.deltaY;var o=si(i.direction);o&&(i.additionalEvent=this.options.event+o),this._super.emit.call(this,i)}});function bn(){J.apply(this,arguments)}$(bn,J,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Tt]},attrTest:function(i){return this._super.attrTest.call(this,i)&&(Math.abs(i.scale-1)>this.options.threshold||this.state&Q)},emit:function(i){if(i.scale!==1){var o=i.scale<1?"in":"out";i.additionalEvent=this.options.event+o}this._super.emit.call(this,i)}});function hn(){lt.apply(this,arguments),this._timer=null,this._input=null}$(hn,lt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[oi]},process:function(i){var o=this.options,s=i.pointers.length===o.pointers,l=i.distance<o.threshold,m=i.deltaTime>o.time;if(this._input=i,!l||!s||i.eventType&(O|K)&&!m)this.reset();else if(i.eventType&z)this.reset(),this._timer=B(function(){this.state=ct,this.tryEmit()},o.time,this);else if(i.eventType&O)return ct;return it},reset:function(){clearTimeout(this._timer)},emit:function(i){this.state===ct&&(i&&i.eventType&O?this.manager.emit(this.options.event+"up",i):(this._input.timeStamp=T(),this.manager.emit(this.options.event,this._input)))}});function fn(){J.apply(this,arguments)}$(fn,J,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Tt]},attrTest:function(i){return this._super.attrTest.call(this,i)&&(Math.abs(i.rotation)>this.options.threshold||this.state&Q)}});function gn(){J.apply(this,arguments)}$(gn,J,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:nt|Et,pointers:1},getTouchAction:function(){return xe.prototype.getTouchAction.call(this)},attrTest:function(i){var o=this.options.direction,s;return o&(nt|Et)?s=i.overallVelocity:o&nt?s=i.overallVelocityX:o&Et&&(s=i.overallVelocityY),this._super.attrTest.call(this,i)&&o&i.offsetDirection&&i.distance>this.options.threshold&&i.maxPointers==this.options.pointers&&g(s)>this.options.velocity&&i.eventType&O},emit:function(i){var o=si(i.offsetDirection);o&&this.manager.emit(this.options.event+o,i),this.manager.emit(this.options.event,i)}});function we(){lt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}$(we,lt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[un]},process:function(i){var o=this.options,s=i.pointers.length===o.pointers,l=i.distance<o.threshold,m=i.deltaTime<o.time;if(this.reset(),i.eventType&z&&this.count===0)return this.failTimeout();if(l&&m&&s){if(i.eventType!=O)return this.failTimeout();var p=this.pTime?i.timeStamp-this.pTime<o.interval:!0,y=!this.pCenter||fe(this.pCenter,i.center)<o.posThreshold;this.pTime=i.timeStamp,this.pCenter=i.center,!y||!p?this.count=1:this.count+=1,this._input=i;var D=this.count%o.taps;if(D===0)return this.hasRequireFailures()?(this._timer=B(function(){this.state=ct,this.tryEmit()},o.interval,this),Q):ct}return it},failTimeout:function(){return this._timer=B(function(){this.state=it},this.options.interval,this),it},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==ct&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function dt(i,o){return o=o||{},o.recognizers=Vn(o.recognizers,dt.defaults.preset),new vn(i,o)}dt.VERSION="2.0.7",dt.defaults={domEvents:!1,touchAction:ai,enable:!0,inputTarget:null,inputClass:null,preset:[[fn,{enable:!1}],[bn,{enable:!1},["rotate"]],[gn,{direction:nt}],[xe,{direction:nt},["swipe"]],[we],[we,{event:"doubletap",taps:2},["tap"]],[hn]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var ro=1,ci=2;function vn(i,o){this.options=x({},dt.defaults,o||{}),this.options.inputTarget=this.options.inputTarget||i,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=i,this.input=La(this),this.touchAction=new pn(this,this.options.touchAction),li(this,!0),_(this.options.recognizers,function(s){var l=this.add(new s[0](s[1]));s[2]&&l.recognizeWith(s[2]),s[3]&&l.requireFailure(s[3])},this)}vn.prototype={set:function(i){return x(this.options,i),i.touchAction&&this.touchAction.update(),i.inputTarget&&(this.input.destroy(),this.input.target=i.inputTarget,this.input.init()),this},stop:function(i){this.session.stopped=i?ci:ro},recognize:function(i){var o=this.session;if(!o.stopped){this.touchAction.preventDefaults(i);var s,l=this.recognizers,m=o.curRecognizer;(!m||m&&m.state&ct)&&(m=o.curRecognizer=null);for(var p=0;p<l.length;)s=l[p],o.stopped!==ci&&(!m||s==m||s.canRecognizeWith(m))?s.recognize(i):s.reset(),!m&&s.state&(Q|Rt|ut)&&(m=o.curRecognizer=s),p++}},get:function(i){if(i instanceof lt)return i;for(var o=this.recognizers,s=0;s<o.length;s++)if(o[s].options.event==i)return o[s];return null},add:function(i){if(j(i,"add",this))return this;var o=this.get(i.options.event);return o&&this.remove(o),this.recognizers.push(i),i.manager=this,this.touchAction.update(),i},remove:function(i){if(j(i,"remove",this))return this;if(i=this.get(i),i){var o=this.recognizers,s=Ot(o,i);s!==-1&&(o.splice(s,1),this.touchAction.update())}return this},on:function(i,o){if(i!==a&&o!==a){var s=this.handlers;return _(me(i),function(l){s[l]=s[l]||[],s[l].push(o)}),this}},off:function(i,o){if(i!==a){var s=this.handlers;return _(me(i),function(l){o?s[l]&&s[l].splice(Ot(s[l],o),1):delete s[l]}),this}},emit:function(i,o){this.options.domEvents&&so(i,o);var s=this.handlers[i]&&this.handlers[i].slice();if(!(!s||!s.length)){o.type=i,o.preventDefault=function(){o.srcEvent.preventDefault()};for(var l=0;l<s.length;)s[l](o),l++}},destroy:function(){this.element&&li(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function li(i,o){var s=i.element;if(s.style){var l;_(i.options.cssProps,function(m,p){l=pe(s.style,p),o?(i.oldCssProps[l]=s.style[l],s.style[l]=m):s.style[l]=i.oldCssProps[l]||""}),o||(i.oldCssProps={})}}function so(i,o){var s=n.createEvent("Event");s.initEvent(i,!0,!0),s.gesture=o,o.target.dispatchEvent(s)}x(dt,{INPUT_START:z,INPUT_MOVE:wt,INPUT_END:O,INPUT_CANCEL:K,STATE_POSSIBLE:ye,STATE_BEGAN:Q,STATE_CHANGED:Rt,STATE_ENDED:ut,STATE_RECOGNIZED:ct,STATE_CANCELLED:Zt,STATE_FAILED:it,DIRECTION_NONE:be,DIRECTION_LEFT:Gt,DIRECTION_RIGHT:Kt,DIRECTION_UP:$t,DIRECTION_DOWN:qt,DIRECTION_HORIZONTAL:nt,DIRECTION_VERTICAL:Et,DIRECTION_ALL:Wn,Manager:vn,Input:X,TouchAction:pn,TouchInput:ve,MouseInput:ge,PointerEventInput:dn,TouchMouseInput:mn,SingleTouchInput:Jn,Recognizer:lt,AttrRecognizer:J,Tap:we,Pan:xe,Swipe:gn,Pinch:bn,Rotate:fn,Press:hn,on:le,off:de,each:_,merge:ka,extend:st,assign:x,inherit:$,bindFn:rn,prefixed:pe});var co=typeof e<"u"?e:typeof self<"u"?self:{};co.Hammer=dt,typeof define=="function"&&define.amd?define(function(){return dt}):typeof on<"u"&&on.exports?on.exports=dt:e[t]=dt})(window,document,"Hammer")});var An="Service workers are disabled or not supported by this browser",Yt=class{serviceWorker;worker;registration;events;constructor(n,t){if(this.serviceWorker=n,!n)this.worker=this.events=this.registration=new Pt(a=>a.error(new mt(5601,!1)));else{let a=null,r=new Nt;this.worker=new Pt(T=>(a!==null&&T.next(a),r.subscribe(B=>T.next(B))));let c=()=>{let{controller:T}=n;T!==null&&(a=T,r.next(a))};n.addEventListener("controllerchange",c),c(),this.registration=this.worker.pipe(te(()=>n.getRegistration().then(T=>{if(!T)throw new mt(5601,!1);return T})));let d=new Nt;this.events=d.asObservable();let u=T=>{let{data:B}=T;B?.type&&d.next(B)};n.addEventListener("message",u),t?.get(yn,null,{optional:!0})?.onDestroy(()=>{n.removeEventListener("controllerchange",c),n.removeEventListener("message",u)})}}postMessage(n,t){return new Promise(a=>{this.worker.pipe(bt(1)).subscribe(r=>{r.postMessage(Dt({action:n},t)),a()})})}postMessageWithOperation(n,t,a){let r=this.waitForOperationCompleted(a),c=this.postMessage(n,t);return Promise.all([c,r]).then(([,d])=>d)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(n){let t;return typeof n=="string"?t=a=>a.type===n:t=a=>n.includes(a.type),this.events.pipe(Jt(t))}nextEventOfType(n){return this.eventsOfType(n).pipe(bt(1))}waitForOperationCompleted(n){return new Promise((t,a)=>{this.eventsOfType("OPERATION_COMPLETED").pipe(Jt(r=>r.nonce===n),bt(1),ot(r=>{if(r.result!==void 0)return r.result;throw new Error(r.error)})).subscribe({next:t,error:a})})}get isEnabled(){return!!this.serviceWorker}},uo=(()=>{class e{sw;messages;notificationClicks;notificationCloses;pushSubscriptionChanges;subscription;get isEnabled(){return this.sw.isEnabled}pushManager=null;subscriptionChanges=new Nt;constructor(t){if(this.sw=t,!t.isEnabled){this.messages=pt,this.notificationClicks=pt,this.notificationCloses=pt,this.pushSubscriptionChanges=pt,this.subscription=pt;return}this.messages=this.sw.eventsOfType("PUSH").pipe(ot(r=>r.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(ot(r=>r.data)),this.notificationCloses=this.sw.eventsOfType("NOTIFICATION_CLOSE").pipe(ot(r=>r.data)),this.pushSubscriptionChanges=this.sw.eventsOfType("PUSH_SUBSCRIPTION_CHANGE").pipe(ot(r=>r.data)),this.pushManager=this.sw.registration.pipe(ot(r=>r.pushManager));let a=this.pushManager.pipe(te(r=>r.getSubscription()));this.subscription=new Pt(r=>{let c=a.subscribe(r),d=this.subscriptionChanges.subscribe(r);return()=>{c.unsubscribe(),d.unsubscribe()}})}requestSubscription(t){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(An));let a={userVisibleOnly:!0},r=this.decodeBase64(t.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),c=new Uint8Array(new ArrayBuffer(r.length));for(let d=0;d<r.length;d++)c[d]=r.charCodeAt(d);return a.applicationServerKey=c,new Promise((d,u)=>{this.pushManager.pipe(te(g=>g.subscribe(a)),bt(1)).subscribe({next:g=>{this.subscriptionChanges.next(g),d(g)},error:u})})}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(An));let t=a=>{if(a===null)throw new mt(5602,!1);return a.unsubscribe().then(r=>{if(!r)throw new mt(5603,!1);this.subscriptionChanges.next(null)})};return new Promise((a,r)=>{this.subscription.pipe(bt(1),te(t)).subscribe({next:a,error:r})})}decodeBase64(t){return atob(t)}static \u0275fac=function(a){return new(a||e)(ee(Yt))};static \u0275prov=P({token:e,factory:e.\u0275fac})}return e})(),po=(()=>{class e{sw;versionUpdates;unrecoverable;get isEnabled(){return this.sw.isEnabled}ongoingCheckForUpdate=null;constructor(t){if(this.sw=t,!t.isEnabled){this.versionUpdates=pt,this.unrecoverable=pt;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED","VERSION_FAILED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(An));if(this.ongoingCheckForUpdate)return this.ongoingCheckForUpdate;let t=this.sw.generateNonce();return this.ongoingCheckForUpdate=this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:t},t).finally(()=>{this.ongoingCheckForUpdate=null}),this.ongoingCheckForUpdate}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new mt(5601,!1));let t=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:t},t)}static \u0275fac=function(a){return new(a||e)(ee(Yt))};static \u0275prov=P({token:e,factory:e.\u0275fac})}return e})();var Ji=new Lt("");function bo(){let e=S(oe);if(!("serviceWorker"in navigator&&e.enabled!==!1))return;let n=S(Ji),t=S(It),a=S(yn);t.runOutsideAngular(()=>{let r=navigator.serviceWorker,c=()=>r.controller?.postMessage({action:"INITIALIZE"});r.addEventListener("controllerchange",c),a.onDestroy(()=>{r.removeEventListener("controllerchange",c)})}),t.runOutsideAngular(()=>{let r,{registrationStrategy:c}=e;if(typeof c=="function")r=new Promise(d=>c().subscribe(()=>d()));else{let[d,...u]=(c||"registerWhenStable:30000").split(":");switch(d){case"registerImmediately":r=Promise.resolve();break;case"registerWithDelay":r=Zi(+u[0]||0);break;case"registerWhenStable":r=Promise.race([a.whenStable(),Zi(+u[0])]);break;default:throw new mt(5600,!1)}}r.then(()=>{a.destroyed||navigator.serviceWorker.register(n,{scope:e.scope,updateViaCache:e.updateViaCache,type:e.type}).catch(d=>console.error(gi(5604,!1)))})})}function Zi(e){return new Promise(n=>setTimeout(n,e))}function ho(e,n){return new Yt(e.enabled!==!1?navigator.serviceWorker:void 0,n)}var oe=class{enabled;updateViaCache;type;scope;registrationStrategy};function ta(e,n={}){return Ie([uo,po,{provide:Ji,useValue:e},{provide:oe,useValue:n},{provide:Yt,useFactory:ho,deps:[oe,ne]},ki(bo)])}var Fe=class e{constructor(n){this.el=n}swipe=new tt;swipeMove=new tt;swipeStart=new tt;swipeEnd=new tt;startX=0;startY=0;hasEmittedSwipe=!1;ngOnInit(){this.el.nativeElement.addEventListener("touchstart",n=>{n.touches.length===1&&(this.startX=n.touches[0].clientX,this.startY=n.touches[0].clientY,this.hasEmittedSwipe=!1,this.swipeStart.emit({x:this.startX,y:this.startY}))}),this.el.nativeElement.addEventListener("touchmove",n=>{if(n.touches.length===1&&!this.hasEmittedSwipe){let t=n.touches[0].clientX,a=n.touches[0].clientY,r=t-this.startX,c=a-this.startY;this.swipeMove.emit({x:t,y:a,deltaX:r,deltaY:c})}}),this.el.nativeElement.addEventListener("touchend",n=>{let t=n.changedTouches[0].clientX,a=n.changedTouches[0].clientY,r=t-this.startX,c=a-this.startY;this.swipeEnd.emit({x:t,y:a}),!this.hasEmittedSwipe&&Math.abs(r)>Math.abs(c)&&Math.abs(r)>50&&Math.abs(c)<100&&(r>0?this.swipe.emit("right"):this.swipe.emit("left"),this.hasEmittedSwipe=!0)}),this.el.nativeElement.addEventListener("mousedown",n=>{this.startX=n.clientX,this.startY=n.clientY,this.hasEmittedSwipe=!1,this.swipeStart.emit({x:this.startX,y:this.startY});let t=r=>{if(!this.hasEmittedSwipe){let c=r.clientX-this.startX,d=r.clientY-this.startY;this.swipeMove.emit({x:r.clientX,y:r.clientY,deltaX:c,deltaY:d})}};document.addEventListener("mousemove",t);let a=r=>{document.removeEventListener("mousemove",t),document.removeEventListener("mouseup",a);let c=r.clientX-this.startX,d=r.clientY-this.startY;this.swipeEnd.emit({x:r.clientX,y:r.clientY}),!this.hasEmittedSwipe&&Math.abs(c)>Math.abs(d)&&Math.abs(c)>50&&Math.abs(d)<100&&(c>0?this.swipe.emit("right"):this.swipe.emit("left"),this.hasEmittedSwipe=!0)};document.addEventListener("mouseup",a,{once:!0})})}static \u0275fac=function(t){return new(t||e)(H(_n))};static \u0275dir=Ft({type:e,selectors:[["","appSwipe",""]],outputs:{swipe:"swipe",swipeMove:"swipeMove",swipeStart:"swipeStart",swipeEnd:"swipeEnd"}})};var fo=["swipeContainer"],go=["swipeContent"],vo=["*"],Be=class e{swipeEnabled=!0;onSwipeEvent=new tt;swipeContainer;swipeContent;isSwiping=!1;startTranslateX=0;containerWidth=0;ngAfterViewInit(){this.containerWidth=this.swipeContainer.nativeElement.clientWidth}swipeHandled=!1;onSwipe(n){this.swipeEnabled&&!this.swipeHandled&&(this.swipeHandled=!0,this.onSwipeEvent.emit(n),this.swipeContent&&(this.swipeContent.nativeElement.style.transition="transform 0.3s ease-out",setTimeout(()=>{this.swipeContent.nativeElement.style.transform="translateX(0)",setTimeout(()=>{this.swipeContent.nativeElement.style.transition=""},300)},10)))}onSwipeStart(n){if(this.swipeEnabled&&this.swipeContent){this.isSwiping=!0,this.swipeHandled=!1;let t=window.getComputedStyle(this.swipeContent.nativeElement),a=new DOMMatrixReadOnly(t.transform);this.startTranslateX=a.m41,this.swipeContent.nativeElement.style.transition="none"}}onSwipeMove(n){if(this.swipeEnabled&&this.isSwiping&&this.swipeContent){let t=this.startTranslateX+n.deltaX;this.swipeContent.nativeElement.style.transform=`translateX(${t}px)`}}onSwipeEnd(n){if(this.swipeEnabled&&this.isSwiping&&this.swipeContent){this.isSwiping=!1,this.swipeContent.nativeElement.style.transition="transform 0.3s ease-out";let t=window.getComputedStyle(this.swipeContent.nativeElement),r=new DOMMatrixReadOnly(t.transform).m41,c=this.containerWidth*.3;if(Math.abs(r)>c){let d=r>0?"right":"left",u=d==="left"?-this.containerWidth:this.containerWidth;this.swipeContent.nativeElement.style.transform=`translateX(${u}px)`,setTimeout(()=>{this.swipeHandled||(this.onSwipeEvent.emit(d),this.swipeHandled=!0),this.swipeContent.nativeElement.style.transform="translateX(0)",this.swipeContent.nativeElement.style.transition=""},300)}else this.swipeContent.nativeElement.style.transform="translateX(0)",this.swipeContent.nativeElement.style.transition="transform 0.3s ease-out"}setTimeout(()=>{this.swipeHandled=!1},350)}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=R({type:e,selectors:[["app-swipe-container"]],viewQuery:function(t,a){if(t&1&&(Vt(fo,5),Vt(go,5)),t&2){let r;kt(r=Mt())&&(a.swipeContainer=r.first),kt(r=Mt())&&(a.swipeContent=r.first)}},inputs:{swipeEnabled:"swipeEnabled"},outputs:{onSwipeEvent:"onSwipeEvent"},ngContentSelectors:vo,decls:5,vars:0,consts:[["swipeContainer",""],["swipeContent",""],["appSwipe","",1,"swipe-container",3,"swipe","swipeMove","swipeStart","swipeEnd"],[1,"swipe-content"]],template:function(t,a){if(t&1){let r=q();Bt(),b(0,"div",2,0),A("swipe",function(d){return I(r),k(a.onSwipe(d))})("swipeMove",function(d){return I(r),k(a.onSwipeMove(d))})("swipeStart",function(d){return I(r),k(a.onSwipeStart(d))})("swipeEnd",function(d){return I(r),k(a.onSwipeEnd(d))}),b(2,"div",3,1),jt(4),h()()}},dependencies:[Fe],styles:['.swipe-container[_ngcontent-%COMP%]{width:100%;height:100%;overflow-x:hidden;overflow-y:auto;-webkit-overflow-scrolling:touch;touch-action:pan-y;position:relative}.swipe-content[_ngcontent-%COMP%]{width:100%;height:100%;position:relative;transition:transform .3s ease-out}.swipe-container[_ngcontent-%COMP%]:active{transition:none}@media (max-width: 768px){.swipe-container[_ngcontent-%COMP%]{position:relative}.swipe-container[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;bottom:0;width:10px;background:linear-gradient(to right,rgba(0,0,0,.1),transparent);left:0;opacity:0;transition:opacity .2s;pointer-events:none;z-index:100}.swipe-container.swipe-left[_ngcontent-%COMP%]:before{opacity:1}.swipe-container[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;bottom:0;width:10px;background:linear-gradient(to left,rgba(0,0,0,.1),transparent);right:0;opacity:0;transition:opacity .2s;pointer-events:none;z-index:100}.swipe-container.swipe-right[_ngcontent-%COMP%]:after{opacity:1}}']})};var je=class e{constructor(n){this.router=n;this.updateIndexFromCurrentRoute(),this.router.events.pipe(Jt(t=>t instanceof Yi)).subscribe(t=>{this.updateIndexFromCurrentRoute()})}currentIndexSubject=new Te(0);currentIndex$=this.currentIndexSubject.asObservable();navigationRoutes=["/dashboard","/add","/expenses","/budgets","/incomes"];updateIndexFromCurrentRoute(){let n=this.router.url,t=this.navigationRoutes.indexOf(n);t!==-1&&this.currentIndexSubject.next(t)}setCurrentIndex(n){n>=0&&n<this.navigationRoutes.length&&this.currentIndexSubject.next(n)}getCurrentIndex(){return this.currentIndexSubject.value}getCurrentRoute(){return this.navigationRoutes[this.currentIndexSubject.value]||"/dashboard"}getNextRoute(){let t=(this.currentIndexSubject.value+1)%this.navigationRoutes.length;return this.navigationRoutes[t]}getPreviousRoute(){let t=this.currentIndexSubject.value-1,a=t<0?this.navigationRoutes.length-1:t;return this.navigationRoutes[a]}getIndexForRoute(n){return this.navigationRoutes.indexOf(n)}getRoutesCount(){return this.navigationRoutes.length}getRouteAt(n){return n<0||n>=this.navigationRoutes.length?null:this.navigationRoutes[n]}static \u0275fac=function(t){return new(t||e)(ee(Ut))};static \u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"})};var He=class e{constructor(n,t){this.router=n;this.swipeService=t}subscription=new di;ngOnInit(){this.subscription.add(this.swipeService.currentIndex$.subscribe(n=>{let t=this.swipeService.getRouteAt(n);t&&this.router.url!==t&&this.router.navigate([t],{replaceUrl:!0})}))}ngOnDestroy(){this.subscription.unsubscribe()}handleSwipe(n){let t=null;if(n==="left"?t=this.swipeService.getNextRoute():n==="right"&&(t=this.swipeService.getPreviousRoute()),t&&this.router.url!==t){let a=this.swipeService.getIndexForRoute(t);a!==-1&&(this.swipeService.setCurrentIndex(a),this.router.navigate([t],{queryParamsHandling:"preserve",replaceUrl:!0}))}}static \u0275fac=function(t){return new(t||e)(H(Ut),H(je))};static \u0275cmp=R({type:e,selectors:[["app-swipe-layout"]],decls:3,vars:0,consts:[[1,"swipe-layout-container",3,"onSwipeEvent"],[1,"layout-content"]],template:function(t,a){t&1&&(b(0,"app-swipe-container",0),A("onSwipeEvent",function(c){return a.handleSwipe(c)}),b(1,"div",1),w(2,"router-outlet"),h()())},dependencies:[Be,Ae],styles:[".swipe-layout-container[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;overflow:hidden;position:relative}.layout-content[_ngcontent-%COMP%]{flex:1;overflow-y:auto;-webkit-overflow-scrolling:touch;position:relative;transition:all .3s ease}.layout-content[_ngcontent-%COMP%]    >*{animation:_ngcontent-%COMP%_fadeIn .3s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:.8;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}"]})};var ea=[{path:"",redirectTo:"dashboard",pathMatch:"full"},{path:"welcome",loadComponent:()=>import("./chunk-AVWC6YQ7.js").then(e=>e.WelcomeComponent)},{path:"",component:He,children:[{path:"dashboard",loadComponent:()=>import("./chunk-3ABI4HZT.js").then(e=>e.DashboardComponent)},{path:"add",loadComponent:()=>import("./chunk-Z2WXPDHT.js").then(e=>e.AddExpense)},{path:"expenses",loadComponent:()=>import("./chunk-RTZTBCLG.js").then(e=>e.ExpensesList)},{path:"budgets",loadComponent:()=>import("./chunk-TXJ7A2XZ.js").then(e=>e.BudgetsComponent)},{path:"incomes",loadComponent:()=>import("./chunk-RUGEGH3Q.js").then(e=>e.IncomeListComponent)}]},{path:"set-income",loadComponent:()=>import("./chunk-YLDFLW5T.js").then(e=>e.SetMonthlyIncomeComponent)},{path:"profile",loadComponent:()=>import("./chunk-MXQ325W4.js").then(e=>e.UserProfileComponent)}];var yo="@",Co=(()=>{class e{doc;delegate;zone;animationType;moduleImpl;_rendererFactoryPromise=null;scheduler=null;injector=S(ne);loadingSchedulerFn=S(xo,{optional:!0});_engine;constructor(t,a,r,c,d){this.doc=t,this.delegate=a,this.zone=r,this.animationType=c,this.moduleImpl=d}ngOnDestroy(){this._engine?.flush()}loadImpl(){let t=()=>this.moduleImpl??import("./chunk-OTZDUOZO.js").then(r=>r),a;return this.loadingSchedulerFn?a=this.loadingSchedulerFn(t):a=t(),a.catch(r=>{throw new mt(5300,!1)}).then(({\u0275createEngine:r,\u0275AnimationRendererFactory:c})=>{this._engine=r(this.animationType,this.doc);let d=new c(this.delegate,this._engine,this.zone);return this.delegate=d,d})}createRenderer(t,a){let r=this.delegate.createRenderer(t,a);if(r.\u0275type===0)return r;typeof r.throwOnSyntheticProps=="boolean"&&(r.throwOnSyntheticProps=!1);let c=new On(r);return a?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(d=>{let u=d.createRenderer(t,a);c.use(u),this.scheduler??=this.injector.get(yi,null,{optional:!0}),this.scheduler?.notify(10)}).catch(d=>{c.use(r)}),c}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}componentReplaced(t){this._engine?.flush(),this.delegate.componentReplaced?.(t)}static \u0275fac=function(a){Ti()};static \u0275prov=P({token:e,factory:e.\u0275fac})}return e})(),On=class{delegate;replay=[];\u0275type=1;constructor(n){this.delegate=n}use(n){if(this.delegate=n,this.replay!==null){for(let t of this.replay)t(n);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(n,t){return this.delegate.createElement(n,t)}createComment(n){return this.delegate.createComment(n)}createText(n){return this.delegate.createText(n)}get destroyNode(){return this.delegate.destroyNode}appendChild(n,t){this.delegate.appendChild(n,t)}insertBefore(n,t,a,r){this.delegate.insertBefore(n,t,a,r)}removeChild(n,t,a){this.delegate.removeChild(n,t,a)}selectRootElement(n,t){return this.delegate.selectRootElement(n,t)}parentNode(n){return this.delegate.parentNode(n)}nextSibling(n){return this.delegate.nextSibling(n)}setAttribute(n,t,a,r){this.delegate.setAttribute(n,t,a,r)}removeAttribute(n,t,a){this.delegate.removeAttribute(n,t,a)}addClass(n,t){this.delegate.addClass(n,t)}removeClass(n,t){this.delegate.removeClass(n,t)}setStyle(n,t,a,r){this.delegate.setStyle(n,t,a,r)}removeStyle(n,t,a){this.delegate.removeStyle(n,t,a)}setProperty(n,t,a){this.shouldReplay(t)&&this.replay.push(r=>r.setProperty(n,t,a)),this.delegate.setProperty(n,t,a)}setValue(n,t){this.delegate.setValue(n,t)}listen(n,t,a,r){return this.shouldReplay(t)&&this.replay.push(c=>c.listen(n,t,a,r)),this.delegate.listen(n,t,a,r)}shouldReplay(n){return this.replay!==null&&n.startsWith(yo)}},xo=new Lt("");function na(e="animations"){return Ii("NgAsyncAnimations"),Ie([{provide:Ei,useFactory:(n,t,a)=>new Co(n,t,a,e),deps:[ke,Hi,It]},{provide:xi,useValue:e==="noop"?"NoopAnimations":"BrowserAnimations"}])}var ia={providers:[Ri(),zi(ea,Wi()),ta("ngsw-worker.js",{enabled:!Di(),registrationStrategy:"registerWhenStable:30000"}),na(),vi()]};function Eo(e,n){e&1&&w(0,"i",11)}function To(e,n){e&1&&w(0,"i",12)}function Io(e,n){e&1&&w(0,"i",13)}function ko(e,n){e&1&&w(0,"i",14)}function Mo(e,n){if(e&1){let t=q();b(0,"div",2)(1,"div",3)(2,"span",4),F(3,Eo,1,0,"i",5)(4,To,1,0,"i",6)(5,Io,1,0,"i",7)(6,ko,1,0,"i",8),h(),b(7,"span",9),C(8),h(),b(9,"button",10),A("click",function(){let r=I(t).$implicit,c=Y();return k(c.removeToast(r.id))}),h()()()}if(e&2){let t=n.$implicit;v("ngClass","toast-"+t.type)("@toastAnimation",void 0),f(2),v("ngSwitch",t.type),f(),v("ngSwitchCase","success"),f(),v("ngSwitchCase","error"),f(),v("ngSwitchCase","warning"),f(),v("ngSwitchCase","info"),f(2),et(t.message)}}var Ue=class e{constructor(n){this.toastService=n}removeToast(n){this.toastService.remove(n)}trackById(n,t){return t.id}static \u0275fac=function(t){return new(t||e)(H(Pe))};static \u0275cmp=R({type:e,selectors:[["app-toast"]],decls:3,vars:4,consts:[[1,"toast-container","position-fixed","top-0","end-0","p-3",2,"z-index","1090"],["class","toast align-items-center mb-2","role","alert","aria-live","assertive","aria-atomic","true","style","min-width: 300px; max-width: 400px; display: block;",3,"ngClass",4,"ngFor","ngForOf","ngForTrackBy"],["role","alert","aria-live","assertive","aria-atomic","true",1,"toast","align-items-center","mb-2",2,"min-width","300px","max-width","400px","display","block",3,"ngClass"],[1,"toast-body","d-flex","align-items-center"],[1,"me-2",3,"ngSwitch"],["class","bi bi-check-circle-fill text-success fs-5",4,"ngSwitchCase"],["class","bi bi-x-circle-fill text-danger fs-5",4,"ngSwitchCase"],["class","bi bi-exclamation-triangle-fill text-warning fs-5",4,"ngSwitchCase"],["class","bi bi-info-circle-fill text-info fs-5",4,"ngSwitchCase"],[1,"flex-grow-1"],["type","button","aria-label","Close",1,"btn-close","ms-2",3,"click"],[1,"bi","bi-check-circle-fill","text-success","fs-5"],[1,"bi","bi-x-circle-fill","text-danger","fs-5"],[1,"bi","bi-exclamation-triangle-fill","text-warning","fs-5"],[1,"bi","bi-info-circle-fill","text-info","fs-5"]],template:function(t,a){t&1&&(b(0,"div",0),F(1,Mo,10,8,"div",1),Ht(2,"async"),h()),t&2&&(f(),v("ngForOf",Se(2,2,a.toastService.toasts$))("ngForTrackBy",a.trackById))},dependencies:[Z,ft,gt,Ni,Li,Fi],styles:[".toast-container[_ngcontent-%COMP%]{z-index:1090}.toast-container[_ngcontent-%COMP%]   .toast[_ngcontent-%COMP%]{border:none;box-shadow:0 .5rem 1rem #00000026;border-radius:.5rem;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.toast-container[_ngcontent-%COMP%]   .toast.toast-success[_ngcontent-%COMP%]{background-color:#198754e6;color:#fff}.toast-container[_ngcontent-%COMP%]   .toast.toast-error[_ngcontent-%COMP%]{background-color:#dc3545e6;color:#fff}.toast-container[_ngcontent-%COMP%]   .toast.toast-warning[_ngcontent-%COMP%]{background-color:#ffc107e6;color:#212529}.toast-container[_ngcontent-%COMP%]   .toast.toast-info[_ngcontent-%COMP%]{background-color:#0d6efde6;color:#fff}.toast-container[_ngcontent-%COMP%]   .toast[_ngcontent-%COMP%]   .toast-body[_ngcontent-%COMP%]{padding:.75rem 1rem}"],data:{animation:[Sn("toastAnimation",[Le(":enter",[ae({transform:"translateX(100%)",opacity:0}),Ne("300ms ease-out",ae({transform:"translateX(0)",opacity:1}))]),Le(":leave",[Ne("300ms ease-in",ae({transform:"translateX(100%)",opacity:0}))])])]}})};var Rn;try{Rn=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Rn=!1}var ze=(()=>{class e{_platformId=S(Ci);isBrowser=this._platformId?Vi(this._platformId):typeof document=="object"&&!!document;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!!(window.chrome||Rn)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(){}static \u0275fac=function(a){return new(a||e)};static \u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Dn(e){return Array.isArray(e)?e:[e]}var aa=new Set,At,So=(()=>{class e{_platform=S(ze);_nonce=S(wi,{optional:!0});_matchMedia;constructor(){this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Oo}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&Ao(t,this._nonce),this._matchMedia(t)}static \u0275fac=function(a){return new(a||e)};static \u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Ao(e,n){if(!aa.has(e))try{At||(At=document.createElement("style"),n&&At.setAttribute("nonce",n),At.setAttribute("type","text/css"),document.head.appendChild(At)),At.sheet&&(At.sheet.insertRule(`@media ${e} {body{ }}`,0),aa.add(e))}catch(t){console.error(t)}}function Oo(e){return{matches:e==="all"||e==="",media:e,addListener:()=>{},removeListener:()=>{}}}var ra=(()=>{class e{_mediaMatcher=S(So);_zone=S(It);_queries=new Map;_destroySubject=new Nt;constructor(){}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return oa(Dn(t)).some(r=>this._registerQuery(r).mql.matches)}observe(t){let r=oa(Dn(t)).map(d=>this._registerQuery(d).observable),c=mi(r);return c=ui(c.pipe(bt(1)),c.pipe(bi(1),pi(0))),c.pipe(ot(d=>{let u={matches:!1,breakpoints:{}};return d.forEach(({matches:g,query:T})=>{u.matches=u.matches||g,u.breakpoints[T]=g}),u}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);let a=this._mediaMatcher.matchMedia(t),c={observable:new Pt(d=>{let u=g=>this._zone.run(()=>d.next(g));return a.addListener(u),()=>{a.removeListener(u)}}).pipe(hi(a),ot(({matches:d})=>({query:t,matches:d})),fi(this._destroySubject)),mql:a};return this._queries.set(t,c),c}static \u0275fac=function(a){return new(a||e)};static \u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function oa(e){return e.map(n=>n.split(",")).reduce((n,t)=>n.concat(t)).map(n=>n.trim())}var _t=(function(e){return e[e.NONE=0]="NONE",e[e.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",e[e.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",e})(_t||{}),sa="cdk-high-contrast-black-on-white",ca="cdk-high-contrast-white-on-black",Pn="cdk-high-contrast-active",Nn=(()=>{class e{_platform=S(ze);_hasCheckedHighContrastMode;_document=S(ke);_breakpointSubscription;constructor(){this._breakpointSubscription=S(ra).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return _t.NONE;let t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);let a=this._document.defaultView||window,r=a&&a.getComputedStyle?a.getComputedStyle(t):null,c=(r&&r.backgroundColor||"").replace(/ /g,"");switch(t.remove(),c){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return _t.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return _t.BLACK_ON_WHITE}return _t.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let t=this._document.body.classList;t.remove(Pn,sa,ca),this._hasCheckedHighContrastMode=!0;let a=this.getHighContrastMode();a===_t.BLACK_ON_WHITE?t.add(Pn,sa):a===_t.WHITE_ON_BLACK&&t.add(Pn,ca)}}static \u0275fac=function(a){return new(a||e)};static \u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var Ln=(()=>{class e{static \u0275fac=function(a){return new(a||e)};static \u0275mod=U({type:e});static \u0275inj=V({})}return e})();var G=(()=>{class e{constructor(){S(Nn)._applyBodyHighContrastModeCssClasses()}static \u0275fac=function(a){return new(a||e)};static \u0275mod=U({type:e});static \u0275inj=V({imports:[Ln,Ln]})}return e})();var ma=(()=>{class e{static \u0275fac=function(a){return new(a||e)};static \u0275mod=U({type:e});static \u0275inj=V({imports:[G,G]})}return e})();var Lo=()=>({exact:!0});function Fo(e,n){e&1&&w(0,"div",14)}function Bo(e,n){if(e&1&&(b(0,"a",11,0),w(2,"i",12),b(3,"span"),C(4),h(),F(5,Fo,1,0,"div",13),h()),e&2){let t=n.$implicit,a=ie(1);v("routerLink",t.path)("routerLinkActiveOptions",Me(5,Lo)),f(2),v("ngClass","bi me-2 "+(a.isActive?t.activeIcon:t.icon)),f(2),et(t.label||(t.path==="/dashboard"?"Dashboard":t.path==="/expenses"?"Expenses":"Settings")),f(),v("ngIf",a.isActive)}}var We=class e{links=[];selectedIndex=0;static \u0275fac=function(t){return new(t||e)};static \u0275cmp=R({type:e,selectors:[["app-desktop-nav"]],inputs:{links:"links",selectedIndex:"selectedIndex"},decls:11,vars:1,consts:[["rla","routerLinkActive"],[1,"desktop-nav-container","glass-nav"],[1,"container-fluid","d-flex","align-items-center","h-100"],[1,"brand","me-5"],[1,"mb-0","fw-bold","text-gradient"],[1,"d-flex","gap-4"],["routerLinkActive","active","class","nav-link-item",3,"routerLink","routerLinkActiveOptions",4,"ngFor","ngForOf"],[1,"ms-auto","d-flex","align-items-center","gap-3"],[1,"user-profile","d-flex","align-items-center","gap-2"],[1,"avatar","bg-primary-gradient","text-white","rounded-circle","d-flex","align-items-center","justify-content-center",2,"width","32px","height","32px"],[1,"bi","bi-person-fill"],["routerLinkActive","active",1,"nav-link-item",3,"routerLink","routerLinkActiveOptions"],[3,"ngClass"],["class","active-indicator",4,"ngIf"],[1,"active-indicator"]],template:function(t,a){t&1&&(b(0,"div",1)(1,"div",2)(2,"div",3)(3,"h4",4),C(4,"ExpTracker"),h()(),b(5,"nav",5),F(6,Bo,6,6,"a",6),h(),b(7,"div",7)(8,"div",8)(9,"div",9),w(10,"i",10),h()()()()()),t&2&&(f(6),v("ngForOf",a.links))},dependencies:[Z,ft,gt,vt,De,Oe,Re,ma],styles:["[_nghost-%COMP%]{display:block;position:fixed;top:0;left:0;right:0;z-index:1000}.desktop-nav-container[_ngcontent-%COMP%]{height:60px;background:#0f172ad9;backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px);border-bottom:1px solid rgba(255,255,255,.1)}.nav-link-item[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;color:var(--text-secondary);text-decoration:none;font-weight:500;padding:0 8px;height:60px;transition:color .2s}.nav-link-item[_ngcontent-%COMP%]:hover{color:#fff}.nav-link-item.active[_ngcontent-%COMP%]{color:var(--text-accent)}.nav-link-item.active[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{background:var(--accent-gradient);-webkit-background-clip:text;-webkit-text-fill-color:transparent}.active-indicator[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;right:0;height:3px;background:var(--accent-gradient);border-top-left-radius:3px;border-top-right-radius:3px;box-shadow:0 -2px 8px #6366f180}.text-gradient[_ngcontent-%COMP%]{background:var(--accent-gradient);-webkit-background-clip:text;-webkit-text-fill-color:transparent}.bg-primary-gradient[_ngcontent-%COMP%]{background:var(--accent-gradient)}"]})};var ua=(()=>{class e{static \u0275fac=function(a){return new(a||e)};static \u0275mod=U({type:e});static \u0275inj=V({imports:[G,G]})}return e})();var pa=(()=>{class e{static \u0275fac=function(a){return new(a||e)};static \u0275mod=U({type:e});static \u0275inj=V({imports:[G,G]})}return e})();var ba=(()=>{class e{static \u0275fac=function(a){return new(a||e)};static \u0275mod=U({type:e});static \u0275inj=V({imports:[G,G]})}return e})();var ha=(()=>{class e{static \u0275fac=function(a){return new(a||e)};static \u0275mod=U({type:e});static \u0275inj=V({imports:[G,ba,G]})}return e})();var jo=()=>({exact:!0});function Vo(e,n){e&1&&w(0,"div",7)}function Ho(e,n){if(e&1&&(b(0,"div",3,0)(2,"div",4),w(3,"i",5),h(),F(4,Vo,1,0,"div",6),h()),e&2){let t=n.$implicit,a=ie(1);v("routerLink",t.path)("routerLinkActiveOptions",Me(4,jo)),f(3),v("ngClass","bi "+(a.isActive?t.activeIcon:t.icon)),f(),v("ngIf",a.isActive)}}var Ge=class e{links=[];static \u0275fac=function(t){return new(t||e)};static \u0275cmp=R({type:e,selectors:[["app-mobile-nav"]],inputs:{links:"links"},decls:2,vars:1,consts:[["rla","routerLinkActive"],[1,"mobile-nav-container","glass-nav"],["class","nav-item","routerLinkActive","active",3,"routerLink","routerLinkActiveOptions",4,"ngFor","ngForOf"],["routerLinkActive","active",1,"nav-item",3,"routerLink","routerLinkActiveOptions"],[1,"icon-container"],[3,"ngClass"],["class","active-indicator",4,"ngIf"],[1,"active-indicator"]],template:function(t,a){t&1&&(b(0,"div",1),F(1,Ho,5,5,"div",2),h()),t&2&&(f(),v("ngForOf",a.links))},dependencies:[Z,ft,gt,vt,De,Oe,Re,ua,pa,ha],styles:["[_nghost-%COMP%]{position:fixed;bottom:0;left:0;right:0;z-index:1000}.mobile-nav-container[_ngcontent-%COMP%]{height:64px;display:flex;justify-content:space-around;align-items:center;background:#0f172ad9;backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px);border-top:1px solid rgba(255,255,255,.1);padding:0 16px;padding-bottom:env(safe-area-inset-bottom)}.nav-item[_ngcontent-%COMP%]{position:relative;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;flex:1;cursor:pointer;color:var(--text-secondary);transition:all .3s ease}.nav-item[_ngcontent-%COMP%]   .icon-container[_ngcontent-%COMP%]{font-size:1.5rem;transition:transform .2s}.nav-item.active[_ngcontent-%COMP%]{color:var(--text-accent)}.nav-item.active[_ngcontent-%COMP%]   .icon-container[_ngcontent-%COMP%]{transform:translateY(-4px);background:var(--accent-gradient);-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent}.nav-item[_ngcontent-%COMP%]:active{transform:scale(.95)}.active-indicator[_ngcontent-%COMP%]{position:absolute;bottom:0;width:20px;height:3px;background:var(--accent-gradient);border-top-left-radius:3px;border-top-right-radius:3px;box-shadow:0 -2px 8px #6366f180}"]})};var fa=["user","model","function","system"];var Ke=(function(e){return e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.OTHER="OTHER",e})(Ke||{});var N=class extends Error{constructor(n){super(`[GoogleGenerativeAI Error]: ${n}`)}},yt=class extends N{constructor(n,t){super(n),this.response=t}},qe=class extends N{constructor(n,t,a,r){super(n),this.status=t,this.statusText=a,this.errorDetails=r}},rt=class extends N{},Xe=class extends N{};var Uo="https://generativelanguage.googleapis.com",Yo="v1beta",zo="0.24.1",Wo="genai-js",zt=(function(e){return e.GENERATE_CONTENT="generateContent",e.STREAM_GENERATE_CONTENT="streamGenerateContent",e.COUNT_TOKENS="countTokens",e.EMBED_CONTENT="embedContent",e.BATCH_EMBED_CONTENTS="batchEmbedContents",e})(zt||{}),Fn=class{constructor(n,t,a,r,c){this.model=n,this.task=t,this.apiKey=a,this.stream=r,this.requestOptions=c}toString(){var n,t;let a=((n=this.requestOptions)===null||n===void 0?void 0:n.apiVersion)||Yo,c=`${((t=this.requestOptions)===null||t===void 0?void 0:t.baseUrl)||Uo}/${a}/${this.model}:${this.task}`;return this.stream&&(c+="?alt=sse"),c}};function Go(e){let n=[];return e?.apiClient&&n.push(e.apiClient),n.push(`${Wo}/${zo}`),n.join(" ")}async function Ko(e){var n;let t=new Headers;t.append("Content-Type","application/json"),t.append("x-goog-api-client",Go(e.requestOptions)),t.append("x-goog-api-key",e.apiKey);let a=(n=e.requestOptions)===null||n===void 0?void 0:n.customHeaders;if(a){if(!(a instanceof Headers))try{a=new Headers(a)}catch(r){throw new rt(`unable to convert customHeaders value ${JSON.stringify(a)} to Headers: ${r.message}`)}for(let[r,c]of a.entries()){if(r==="x-goog-api-key")throw new rt(`Cannot set reserved header name ${r}`);if(r==="x-goog-api-client")throw new rt(`Header name ${r} can only be set using the apiClient field`);t.append(r,c)}}return t}async function $o(e,n,t,a,r,c){let d=new Fn(e,n,t,a,c);return{url:d.toString(),fetchOptions:Object.assign(Object.assign({},Zo(c)),{method:"POST",headers:await Ko(d),body:r})}}async function ce(e,n,t,a,r,c={},d=fetch){let{url:u,fetchOptions:g}=await $o(e,n,t,a,r,c);return qo(u,g,d)}async function qo(e,n,t=fetch){let a;try{a=await t(e,n)}catch(r){Xo(r,e)}return a.ok||await Qo(a,e),a}function Xo(e,n){let t=e;throw t.name==="AbortError"?(t=new Xe(`Request aborted when fetching ${n.toString()}: ${e.message}`),t.stack=e.stack):e instanceof qe||e instanceof rt||(t=new N(`Error fetching from ${n.toString()}: ${e.message}`),t.stack=e.stack),t}async function Qo(e,n){let t="",a;try{let r=await e.json();t=r.error.message,r.error.details&&(t+=` ${JSON.stringify(r.error.details)}`,a=r.error.details)}catch{}throw new qe(`Error fetching from ${n.toString()}: [${e.status} ${e.statusText}] ${t}`,e.status,e.statusText,a)}function Zo(e){let n={};if(e?.signal!==void 0||e?.timeout>=0){let t=new AbortController;e?.timeout>=0&&setTimeout(()=>t.abort(),e.timeout),e?.signal&&e.signal.addEventListener("abort",()=>{t.abort()}),n.signal=t.signal}return n}function jn(e){return e.text=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),$e(e.candidates[0]))throw new yt(`${Ct(e)}`,e);return Jo(e)}else if(e.promptFeedback)throw new yt(`Text not available. ${Ct(e)}`,e);return""},e.functionCall=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),$e(e.candidates[0]))throw new yt(`${Ct(e)}`,e);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),ga(e)[0]}else if(e.promptFeedback)throw new yt(`Function call not available. ${Ct(e)}`,e)},e.functionCalls=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),$e(e.candidates[0]))throw new yt(`${Ct(e)}`,e);return ga(e)}else if(e.promptFeedback)throw new yt(`Function call not available. ${Ct(e)}`,e)},e}function Jo(e){var n,t,a,r;let c=[];if(!((t=(n=e.candidates)===null||n===void 0?void 0:n[0].content)===null||t===void 0)&&t.parts)for(let d of(r=(a=e.candidates)===null||a===void 0?void 0:a[0].content)===null||r===void 0?void 0:r.parts)d.text&&c.push(d.text),d.executableCode&&c.push("\n```"+d.executableCode.language+`
`+d.executableCode.code+"\n```\n"),d.codeExecutionResult&&c.push("\n```\n"+d.codeExecutionResult.output+"\n```\n");return c.length>0?c.join(""):""}function ga(e){var n,t,a,r;let c=[];if(!((t=(n=e.candidates)===null||n===void 0?void 0:n[0].content)===null||t===void 0)&&t.parts)for(let d of(r=(a=e.candidates)===null||a===void 0?void 0:a[0].content)===null||r===void 0?void 0:r.parts)d.functionCall&&c.push(d.functionCall);if(c.length>0)return c}var tr=[Ke.RECITATION,Ke.SAFETY,Ke.LANGUAGE];function $e(e){return!!e.finishReason&&tr.includes(e.finishReason)}function Ct(e){var n,t,a;let r="";if((!e.candidates||e.candidates.length===0)&&e.promptFeedback)r+="Response was blocked",!((n=e.promptFeedback)===null||n===void 0)&&n.blockReason&&(r+=` due to ${e.promptFeedback.blockReason}`),!((t=e.promptFeedback)===null||t===void 0)&&t.blockReasonMessage&&(r+=`: ${e.promptFeedback.blockReasonMessage}`);else if(!((a=e.candidates)===null||a===void 0)&&a[0]){let c=e.candidates[0];$e(c)&&(r+=`Candidate was blocked due to ${c.finishReason}`,c.finishMessage&&(r+=`: ${c.finishMessage}`))}return r}function re(e){return this instanceof re?(this.v=e,this):new re(e)}function er(e,n,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=t.apply(e,n||[]),r,c=[];return r={},d("next"),d("throw"),d("return"),r[Symbol.asyncIterator]=function(){return this},r;function d(_){a[_]&&(r[_]=function(E){return new Promise(function(x,st){c.push([_,E,x,st])>1||u(_,E)})})}function u(_,E){try{g(a[_](E))}catch(x){j(c[0][3],x)}}function g(_){_.value instanceof re?Promise.resolve(_.value.v).then(T,B):j(c[0][2],_)}function T(_){u("next",_)}function B(_){u("throw",_)}function j(_,E){_(E),c.shift(),c.length&&u(c[0][0],c[0][1])}}var va=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function nr(e){let n=e.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),t=or(n),[a,r]=t.tee();return{stream:ar(a),response:ir(r)}}async function ir(e){let n=[],t=e.getReader();for(;;){let{done:a,value:r}=await t.read();if(a)return jn(rr(n));n.push(r)}}function ar(e){return er(this,arguments,function*(){let t=e.getReader();for(;;){let{value:a,done:r}=yield re(t.read());if(r)break;yield yield re(jn(a))}})}function or(e){let n=e.getReader();return new ReadableStream({start(a){let r="";return c();function c(){return n.read().then(({value:d,done:u})=>{if(u){if(r.trim()){a.error(new N("Failed to parse stream"));return}a.close();return}r+=d;let g=r.match(va),T;for(;g;){try{T=JSON.parse(g[1])}catch{a.error(new N(`Error parsing JSON response: "${g[1]}"`));return}a.enqueue(T),r=r.substring(g[0].length),g=r.match(va)}return c()}).catch(d=>{let u=d;throw u.stack=d.stack,u.name==="AbortError"?u=new Xe("Request aborted when reading from the stream"):u=new N("Error reading from the stream"),u})}}})}function rr(e){let n=e[e.length-1],t={promptFeedback:n?.promptFeedback};for(let a of e){if(a.candidates){let r=0;for(let c of a.candidates)if(t.candidates||(t.candidates=[]),t.candidates[r]||(t.candidates[r]={index:r}),t.candidates[r].citationMetadata=c.citationMetadata,t.candidates[r].groundingMetadata=c.groundingMetadata,t.candidates[r].finishReason=c.finishReason,t.candidates[r].finishMessage=c.finishMessage,t.candidates[r].safetyRatings=c.safetyRatings,c.content&&c.content.parts){t.candidates[r].content||(t.candidates[r].content={role:c.content.role||"user",parts:[]});let d={};for(let u of c.content.parts)u.text&&(d.text=u.text),u.functionCall&&(d.functionCall=u.functionCall),u.executableCode&&(d.executableCode=u.executableCode),u.codeExecutionResult&&(d.codeExecutionResult=u.codeExecutionResult),Object.keys(d).length===0&&(d.text=""),t.candidates[r].content.parts.push(d)}r++}a.usageMetadata&&(t.usageMetadata=a.usageMetadata)}return t}async function wa(e,n,t,a){let r=await ce(n,zt.STREAM_GENERATE_CONTENT,e,!0,JSON.stringify(t),a);return nr(r)}async function Ea(e,n,t,a){let c=await(await ce(n,zt.GENERATE_CONTENT,e,!1,JSON.stringify(t),a)).json();return{response:jn(c)}}function Ta(e){if(e!=null){if(typeof e=="string")return{role:"system",parts:[{text:e}]};if(e.text)return{role:"system",parts:[e]};if(e.parts)return e.role?e:{role:"system",parts:e.parts}}}function se(e){let n=[];if(typeof e=="string")n=[{text:e}];else for(let t of e)typeof t=="string"?n.push({text:t}):n.push(t);return sr(n)}function sr(e){let n={role:"user",parts:[]},t={role:"function",parts:[]},a=!1,r=!1;for(let c of e)"functionResponse"in c?(t.parts.push(c),r=!0):(n.parts.push(c),a=!0);if(a&&r)throw new N("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!a&&!r)throw new N("No content is provided for sending chat message.");return a?n:t}function cr(e,n){var t;let a={model:n?.model,generationConfig:n?.generationConfig,safetySettings:n?.safetySettings,tools:n?.tools,toolConfig:n?.toolConfig,systemInstruction:n?.systemInstruction,cachedContent:(t=n?.cachedContent)===null||t===void 0?void 0:t.name,contents:[]},r=e.generateContentRequest!=null;if(e.contents){if(r)throw new rt("CountTokensRequest must have one of contents or generateContentRequest, not both.");a.contents=e.contents}else if(r)a=Object.assign(Object.assign({},a),e.generateContentRequest);else{let c=se(e);a.contents=[c]}return{generateContentRequest:a}}function _a(e){let n;return e.contents?n=e:n={contents:[se(e)]},e.systemInstruction&&(n.systemInstruction=Ta(e.systemInstruction)),n}function lr(e){return typeof e=="string"||Array.isArray(e)?{content:se(e)}:e}var ya=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],dr={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function mr(e){let n=!1;for(let t of e){let{role:a,parts:r}=t;if(!n&&a!=="user")throw new N(`First content should be with role 'user', got ${a}`);if(!fa.includes(a))throw new N(`Each item should include role field. Got ${a} but valid roles are: ${JSON.stringify(fa)}`);if(!Array.isArray(r))throw new N("Content should have 'parts' property with an array of Parts");if(r.length===0)throw new N("Each Content should have at least one part");let c={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(let u of r)for(let g of ya)g in u&&(c[g]+=1);let d=dr[a];for(let u of ya)if(!d.includes(u)&&c[u]>0)throw new N(`Content with role '${a}' can't contain '${u}' part`);n=!0}}function Ca(e){var n;if(e.candidates===void 0||e.candidates.length===0)return!1;let t=(n=e.candidates[0])===null||n===void 0?void 0:n.content;if(t===void 0||t.parts===void 0||t.parts.length===0)return!1;for(let a of t.parts)if(a===void 0||Object.keys(a).length===0||a.text!==void 0&&a.text==="")return!1;return!0}var xa="SILENT_ERROR",Bn=class{constructor(n,t,a,r={}){this.model=t,this.params=a,this._requestOptions=r,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=n,a?.history&&(mr(a.history),this._history=a.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(n,t={}){var a,r,c,d,u,g;await this._sendPromise;let T=se(n),B={safetySettings:(a=this.params)===null||a===void 0?void 0:a.safetySettings,generationConfig:(r=this.params)===null||r===void 0?void 0:r.generationConfig,tools:(c=this.params)===null||c===void 0?void 0:c.tools,toolConfig:(d=this.params)===null||d===void 0?void 0:d.toolConfig,systemInstruction:(u=this.params)===null||u===void 0?void 0:u.systemInstruction,cachedContent:(g=this.params)===null||g===void 0?void 0:g.cachedContent,contents:[...this._history,T]},j=Object.assign(Object.assign({},this._requestOptions),t),_;return this._sendPromise=this._sendPromise.then(()=>Ea(this._apiKey,this.model,B,j)).then(E=>{var x;if(Ca(E.response)){this._history.push(T);let st=Object.assign({parts:[],role:"model"},(x=E.response.candidates)===null||x===void 0?void 0:x[0].content);this._history.push(st)}else{let st=Ct(E.response);st&&console.warn(`sendMessage() was unsuccessful. ${st}. Inspect response object for details.`)}_=E}).catch(E=>{throw this._sendPromise=Promise.resolve(),E}),await this._sendPromise,_}async sendMessageStream(n,t={}){var a,r,c,d,u,g;await this._sendPromise;let T=se(n),B={safetySettings:(a=this.params)===null||a===void 0?void 0:a.safetySettings,generationConfig:(r=this.params)===null||r===void 0?void 0:r.generationConfig,tools:(c=this.params)===null||c===void 0?void 0:c.tools,toolConfig:(d=this.params)===null||d===void 0?void 0:d.toolConfig,systemInstruction:(u=this.params)===null||u===void 0?void 0:u.systemInstruction,cachedContent:(g=this.params)===null||g===void 0?void 0:g.cachedContent,contents:[...this._history,T]},j=Object.assign(Object.assign({},this._requestOptions),t),_=wa(this._apiKey,this.model,B,j);return this._sendPromise=this._sendPromise.then(()=>_).catch(E=>{throw new Error(xa)}).then(E=>E.response).then(E=>{if(Ca(E)){this._history.push(T);let x=Object.assign({},E.candidates[0].content);x.role||(x.role="model"),this._history.push(x)}else{let x=Ct(E);x&&console.warn(`sendMessageStream() was unsuccessful. ${x}. Inspect response object for details.`)}}).catch(E=>{E.message!==xa&&console.error(E)}),_}};async function ur(e,n,t,a){return(await ce(n,zt.COUNT_TOKENS,e,!1,JSON.stringify(t),a)).json()}async function pr(e,n,t,a){return(await ce(n,zt.EMBED_CONTENT,e,!1,JSON.stringify(t),a)).json()}async function br(e,n,t,a){let r=t.requests.map(d=>Object.assign(Object.assign({},d),{model:n}));return(await ce(n,zt.BATCH_EMBED_CONTENTS,e,!1,JSON.stringify({requests:r}),a)).json()}var Qe=class{constructor(n,t,a={}){this.apiKey=n,this._requestOptions=a,t.model.includes("/")?this.model=t.model:this.model=`models/${t.model}`,this.generationConfig=t.generationConfig||{},this.safetySettings=t.safetySettings||[],this.tools=t.tools,this.toolConfig=t.toolConfig,this.systemInstruction=Ta(t.systemInstruction),this.cachedContent=t.cachedContent}async generateContent(n,t={}){var a;let r=_a(n),c=Object.assign(Object.assign({},this._requestOptions),t);return Ea(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(a=this.cachedContent)===null||a===void 0?void 0:a.name},r),c)}async generateContentStream(n,t={}){var a;let r=_a(n),c=Object.assign(Object.assign({},this._requestOptions),t);return wa(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(a=this.cachedContent)===null||a===void 0?void 0:a.name},r),c)}startChat(n){var t;return new Bn(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(t=this.cachedContent)===null||t===void 0?void 0:t.name},n),this._requestOptions)}async countTokens(n,t={}){let a=cr(n,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),r=Object.assign(Object.assign({},this._requestOptions),t);return ur(this.apiKey,this.model,a,r)}async embedContent(n,t={}){let a=lr(n),r=Object.assign(Object.assign({},this._requestOptions),t);return pr(this.apiKey,this.model,a,r)}async batchEmbedContents(n,t={}){let a=Object.assign(Object.assign({},this._requestOptions),t);return br(this.apiKey,this.model,n,a)}};var Ze=class{constructor(n){this.apiKey=n}getGenerativeModel(n,t){if(!n.model)throw new N("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new Qe(this.apiKey,n,t)}getGenerativeModelFromCachedContent(n,t,a){if(!n.name)throw new rt("Cached content must contain a `name` field.");if(!n.model)throw new rt("Cached content must contain a `model` field.");let r=["model","systemInstruction"];for(let d of r)if(t?.[d]&&n[d]&&t?.[d]!==n[d]){if(d==="model"){let u=t.model.startsWith("models/")?t.model.replace("models/",""):t.model,g=n.model.startsWith("models/")?n.model.replace("models/",""):n.model;if(u===g)continue}throw new rt(`Different value for "${d}" specified in modelParams (${t[d]}) and cachedContent (${n[d]})`)}let c=Object.assign(Object.assign({},t),{model:n.model,tools:n.tools,toolConfig:n.toolConfig,systemInstruction:n.systemInstruction,cachedContent:n});return new Qe(this.apiKey,c,a)}};var Je=class e{genAI=null;STORAGE_KEY="gemini_api_key";USAGE_KEY="gemini_usage";DAILY_LIMIT=1500;constructor(){let n=localStorage.getItem(this.STORAGE_KEY);n&&this.initializeAI(n),this.checkAndResetDailyUsage()}checkAndResetDailyUsage(){let n=this.getUsageData(),t=new Date().toDateString();n.date!==t&&this.saveUsageData({date:t,requestCount:0})}getUsageData(){let n=localStorage.getItem(this.USAGE_KEY);return n?JSON.parse(n):{date:new Date().toDateString(),requestCount:0}}saveUsageData(n){localStorage.setItem(this.USAGE_KEY,JSON.stringify(n))}incrementUsage(){let n=this.getUsageData();n.requestCount++,this.saveUsageData(n)}getUsageStats(){let n=this.getUsageData(),t=Math.min(n.requestCount/this.DAILY_LIMIT*100,100);return{requestsUsed:n.requestCount,requestsLimit:this.DAILY_LIMIT,percentage:Math.round(t)}}initializeAI(n){this.genAI=new Ze(n),localStorage.setItem(this.STORAGE_KEY,n)}hasApiKey(){return this.genAI!==null}getApiKey(){return localStorage.getItem(this.STORAGE_KEY)}clearApiKey(){this.genAI=null,localStorage.removeItem(this.STORAGE_KEY)}async parseExpense(n){if(!this.genAI)return{error:"API Key not configured. Please add your Gemini API key in settings."};try{let t=this.genAI.getGenerativeModel({model:"gemini-2.5-flash"}),a=new Date,r=a.toISOString().split("T")[0],c=a.getFullYear(),d=a.getMonth()+1,u=a.getDate(),g=`You are "Expense GPT", a friendly AI assistant for an expense tracking app.

CURRENT DATE: ${r} (Year: ${c}, Month: ${d}, Day: ${u})

YOUR DUAL ROLE:
1. If the user's message is about tracking an expense (spending money, buying something, paying for something), respond with ONLY a JSON object in this EXACT format:
{
  "id": <random 5-digit number>,
  "title": "<short 1-3 word summary>",
  "amount": <numeric amount>,
  "date": "${r}",
  "category": "<one of: Food, Transport, Bills, Entertainment, Shopping, Healthcare, Education, Travel, Gifts, Utilities, Insurance, Other>",
  "notes": "<brief explanation>",
  "paymentMethod": "",
  "receipt": "",
  "tags": [<max 3 keywords>],
  "groupId": null,
  "recurringId": null,
  "createdAt": "${a.toISOString()}",
  "updatedAt": "${a.toISOString()}"
}

IMPORTANT DATE PARSING:
- "yesterday" \u2192 use ${new Date(a.getTime()-864e5).toISOString().split("T")[0]}
- "2 days ago" \u2192 subtract 2 days from current date
- "last week" \u2192 subtract 7 days
- "monday", "tuesday", etc. \u2192 find the most recent occurrence

2. If the message is NOT about an expense (greetings, questions, casual chat, asking about you, etc.), respond naturally like a helpful, friendly chatbot. You can answer any questions, have casual conversations, and provide information. Be conversational and engaging!

CRITICAL: 
- For expenses, output ONLY the JSON object, nothing else
- For conversations, respond naturally without JSON

User message: "${n}"`,j=(await(await t.generateContent(g)).response).text();this.incrementUsage(),console.log("=== GEMINI RAW RESPONSE ==="),console.log(j),console.log("=== END RAW RESPONSE ===");let _=j.trim();_=_.replace(/```json\s*/g,"").replace(/```\s*/g,"");let E=_.match(/\{[\s\S]*\}/);if(E)try{let x=JSON.parse(E[0]);if(x.amount&&x.title)return Ee(Dt({},x),{date:new Date(x.date),category:x.category,groupId:void 0,recurringId:void 0,createdAt:new Date,updatedAt:new Date})}catch{}return{conversational:_}}catch(t){return console.error("=== ERROR CALLING GEMINI API ==="),console.error(t),console.error("=== END ERROR ==="),t instanceof Error&&t.message.includes("API key")?{error:"Invalid API key. Please check your Gemini API key in settings."}:{conversational:"I'm having trouble connecting right now. Please check your internet connection or API key."}}}static \u0275fac=function(t){return new(t||e)};static \u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"})};var fr=["scrollContainer"],gr=(e,n,t)=>({"bg-success":e,"bg-warning":n,"bg-danger":t});function vr(e,n){if(e&1){let t=q();b(0,"button",33),A("click",function(){I(t);let r=Y(2);return k(r.clearApiKey())}),C(1," Clear API Key "),h()}}function _r(e,n){if(e&1){let t=q();b(0,"div",24)(1,"div",25)(2,"h6",26),C(3,"Gemini API Key"),h(),b(4,"p",27),C(5," Get your free API key from "),b(6,"a",28),C(7,"Google AI Studio"),h()(),b(8,"input",29),kn("ngModelChange",function(r){I(t);let c=Y();return In(c.apiKeyInput,r)||(c.apiKeyInput=r),k(r)}),h(),b(9,"div",7)(10,"button",30),A("click",function(){I(t);let r=Y();return k(r.showApiKeyModal=!1)}),C(11,"Cancel"),h(),b(12,"button",31),A("click",function(){I(t);let r=Y();return k(r.saveApiKey())}),C(13,"Save"),h()(),F(14,vr,2,0,"button",32),h()()}if(e&2){let t=Y();f(8),Tn("ngModel",t.apiKeyInput),f(6),v("ngIf",t.geminiService.hasApiKey())}}function yr(e,n){if(e&1&&(b(0,"div",34)(1,"div",35)(2,"small",36),C(3,"Daily Usage"),h(),b(4,"small",37),C(5),h()(),b(6,"div",38),w(7,"div",39),h()()),e&2){let t=Y();f(5),Ai("",t.usageStats.requestsUsed,"/",t.usageStats.requestsLimit),f(2),En("width",t.usageStats.percentage,"%"),v("ngClass",Oi(5,gr,t.usageStats.percentage<=70,t.usageStats.percentage>70&&t.usageStats.percentage<=90,t.usageStats.percentage>90))}}function Cr(e,n){e&1&&(b(0,"div",40)(1,"div",41),w(2,"i",42),h(),b(3,"p",43),C(4,"Hi! I can help you track expenses."),h(),b(5,"p",36),C(6,'Try "Spent 500 on lunch" or "Paid 2000 for petrol"'),h()())}function xr(e,n){if(e&1&&(b(0,"div",44)(1,"div",45)(2,"p",46),C(3),h()(),b(4,"small",47),C(5),Ht(6,"date"),h()()),e&2){let t=n.$implicit;ht("user",t.sender==="user")("ai",t.sender==="ai"),f(),v("ngClass",t.sender==="user"?"bg-primary-gradient text-white":"bg-white-10 text-white"),f(2),et(t.text),f(),ht("text-end",t.sender==="user"),f(),Si(" ",Mn(6,9,t.timestamp,"shortTime")," ")}}function wr(e,n){e&1&&(b(0,"div",48)(1,"div",49)(2,"div",50),w(3,"span")(4,"span")(5,"span"),h()()())}function Er(e,n){if(e&1){let t=q();b(0,"div",51)(1,"h6",52),C(2,"Confirm Expense"),h(),b(3,"div",53)(4,"span",54),C(5,"Title"),h(),b(6,"span",55),C(7),h()(),b(8,"div",53)(9,"span",54),C(10,"Amount"),h(),b(11,"span",56),C(12),Ht(13,"number"),h()(),b(14,"div",53)(15,"span",54),C(16,"Category"),h(),b(17,"span",55),C(18),h()(),b(19,"div",57)(20,"span",54),C(21,"Date"),h(),b(22,"span",55),C(23),Ht(24,"date"),h()(),b(25,"div",7)(26,"button",58),A("click",function(){I(t);let r=Y();return k(r.discardExpense())}),C(27,"Discard"),h(),b(28,"button",59),A("click",function(){I(t);let r=Y();return k(r.confirmExpense())}),C(29,"Add Expense"),h()()()}if(e&2){let t=Y();f(7),et(t.pendingExpense.title),f(5),et(Mn(13,4,t.pendingExpense.amount,"1.0-0")),f(6),et(t.pendingExpense.category),f(5),et(Se(24,7,t.pendingExpense.date))}}var tn=class e{constructor(n,t,a,r){this.geminiService=n;this.expenseService=t;this.toastService=a;this.cdr=r}isOpen=!1;close=new tt;scrollContainer;messages=[];userInput="";isProcessing=!1;pendingExpense=null;showApiKeyModal=!1;apiKeyInput="";usageStats={used:0,limit:1500,percentage:0,requestsUsed:0,requestsLimit:1500};ngOnInit(){let n=this.geminiService.getApiKey();n&&(this.apiKeyInput=n),this.updateUsageStats(),setInterval(()=>this.updateUsageStats(),5e3)}updateUsageStats(){this.geminiService.hasApiKey()&&(this.usageStats=Ee(Dt({},this.geminiService.getUsageStats()),{used:0,limit:1500}))}saveApiKey(){this.apiKeyInput.trim()?(this.geminiService.initializeAI(this.apiKeyInput.trim()),this.toastService.success("API Key saved successfully!"),this.showApiKeyModal=!1):this.toastService.error("Please enter a valid API key")}clearApiKey(){this.geminiService.clearApiKey(),this.apiKeyInput="",this.showApiKeyModal=!1,this.toastService.success("API Key cleared")}closeChat(){this.close.emit()}async sendMessage(){if(!this.userInput.trim()||this.isProcessing)return;let n=this.userInput.trim();this.addMessage(n,"user"),this.userInput="",this.isProcessing=!0,this.scrollToBottom();try{let t=await this.geminiService.parseExpense(n);console.log("Result type:",t),console.log("Has conversational?","conversational"in t),console.log("Has error?","error"in t),"conversational"in t?(console.log("Showing conversational response"),this.addTypingMessage(t.conversational)):"error"in t?(console.log("Got error, converting to conversational"),this.addTypingMessage(`I'm here to help you track expenses! You can tell me things like:

\u2022 'spend 500 on chai'
\u2022 'paid 200 for groceries'
\u2022 'bought coffee for 150'

What would you like to track?`)):(console.log("Got valid expense"),this.pendingExpense=t,this.addMessage("I found an expense! Please confirm the details below.","ai"))}catch(t){console.error("Caught exception:",t),this.addTypingMessage(`I'm here to help you track your expenses! Try telling me something like "spend 500 on chai" or "paid 200 for groceries".`)}finally{this.isProcessing=!1,this.cdr.markForCheck(),this.scrollToBottom()}}async addTypingMessage(n){let t=this.messages.length;this.messages.push({text:"",sender:"ai",timestamp:new Date}),this.cdr.markForCheck(),this.scrollToBottom();let a="",r=20;for(let c=0;c<n.length;c++)a+=n[c],this.messages[t].text=a,this.cdr.markForCheck(),this.scrollToBottom(),await this.delay(r)}delay(n){return new Promise(t=>setTimeout(t,n))}confirmExpense(){this.pendingExpense&&(this.expenseService.addExpense(this.pendingExpense),this.toastService.success("Expense added successfully!"),this.addMessage("Expense added! You can add another one.","ai"),this.pendingExpense=null,this.cdr.markForCheck(),this.scrollToBottom())}discardExpense(){this.pendingExpense=null,this.addMessage("Expense discarded. What else?","ai"),this.cdr.markForCheck(),this.scrollToBottom()}addMessage(n,t){this.messages.push({text:n,sender:t,timestamp:new Date}),this.cdr.markForCheck()}scrollToBottom(){setTimeout(()=>{this.scrollContainer&&(this.scrollContainer.nativeElement.scrollTop=this.scrollContainer.nativeElement.scrollHeight)},100)}static \u0275fac=function(t){return new(t||e)(H(Je),H(Gi),H(Pe),H(Pi))};static \u0275cmp=R({type:e,selectors:[["app-chat-interface"]],viewQuery:function(t,a){if(t&1&&Vt(fr,5),t&2){let r;kt(r=Mt())&&(a.scrollContainer=r.first)}},inputs:{isOpen:"isOpen"},outputs:{close:"close"},decls:25,vars:11,consts:[["scrollContainer",""],[1,"chat-container","glass-card"],[1,"chat-header","d-flex","justify-content-between","align-items-center","p-3","border-bottom","border-white-10"],[1,"d-flex","align-items-center"],[1,"icon-circle","bg-primary-gradient","me-2",2,"width","32px","height","32px"],[1,"bi","bi-robot","text-white","small"],[1,"text-white","mb-0"],[1,"d-flex","gap-2"],["title","API Settings",1,"btn","btn-icon","btn-sm","text-secondary",3,"click"],[1,"bi","bi-gear"],[1,"btn","btn-icon","btn-sm","text-secondary",3,"click"],[1,"bi","bi-x-lg"],["class","api-key-modal",4,"ngIf"],["class","usage-bar p-2 px-3 border-bottom border-white-10",4,"ngIf"],[1,"chat-messages","p-3"],["class","text-center py-4",4,"ngIf"],["class","message mb-3",3,"user","ai",4,"ngFor","ngForOf"],["class","message ai mb-3",4,"ngIf"],["class","expense-preview glass-card p-3 mt-2 border border-accent",4,"ngIf"],[1,"chat-input","p-3","border-top","border-white-10"],[1,"input-group"],["type","text","placeholder","Type an expense...",1,"form-control","bg-transparent","text-white","border-white-10",3,"ngModelChange","keyup.enter","ngModel","disabled"],[1,"btn","btn-primary-gradient",3,"click","disabled"],[1,"bi","bi-send"],[1,"api-key-modal"],[1,"modal-content","glass-card","p-4"],[1,"text-white","mb-3"],[1,"text-secondary","small","mb-3"],["href","https://aistudio.google.com/app/apikey","target","_blank",1,"text-accent"],["type","text","placeholder","Enter your Gemini API key",1,"form-control","bg-transparent","text-white","border-white-10","mb-3",3,"ngModelChange","ngModel"],[1,"btn","btn-sm","btn-outline-secondary","flex-grow-1",3,"click"],[1,"btn","btn-sm","btn-primary-gradient","flex-grow-1",3,"click"],["class","btn btn-sm btn-outline-danger w-100 mt-2",3,"click",4,"ngIf"],[1,"btn","btn-sm","btn-outline-danger","w-100","mt-2",3,"click"],[1,"usage-bar","p-2","px-3","border-bottom","border-white-10"],[1,"d-flex","justify-content-between","align-items-center","mb-1"],[1,"text-secondary","x-small"],[1,"text-white","x-small","fw-bold"],[1,"progress",2,"height","4px","background","rgba(255,255,255,0.1)"],[1,"progress-bar",3,"ngClass"],[1,"text-center","py-4"],[1,"icon-box","bg-white-5","mx-auto","mb-3","rounded-circle",2,"width","48px","height","48px"],[1,"bi","bi-stars","text-accent","fs-4"],[1,"text-white","small","mb-1"],[1,"message","mb-3"],[1,"message-content","p-3","rounded-3",3,"ngClass"],[1,"mb-0","small","text-start"],[1,"text-secondary","x-small","mt-1","d-block"],[1,"message","ai","mb-3"],[1,"message-content","p-3","rounded-3","bg-white-10"],[1,"typing-indicator"],[1,"expense-preview","glass-card","p-3","mt-2","border","border-accent"],[1,"text-white","mb-2","small","fw-bold","text-uppercase"],[1,"d-flex","justify-content-between","mb-1"],[1,"text-secondary","small"],[1,"text-white","small"],[1,"text-white","small","fw-bold"],[1,"d-flex","justify-content-between","mb-3"],[1,"btn","btn-sm","btn-outline-danger","flex-grow-1",3,"click"],[1,"btn","btn-sm","btn-success","flex-grow-1",3,"click"]],template:function(t,a){if(t&1){let r=q();b(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4),w(4,"i",5),h(),b(5,"h6",6),C(6,"AI Assistant"),h()(),b(7,"div",7)(8,"button",8),A("click",function(){return I(r),k(a.showApiKeyModal=!0)}),w(9,"i",9),h(),b(10,"button",10),A("click",function(){return I(r),k(a.closeChat())}),w(11,"i",11),h()()(),F(12,_r,15,2,"div",12)(13,yr,8,9,"div",13),b(14,"div",14,0),F(16,Cr,7,0,"div",15)(17,xr,7,12,"div",16)(18,wr,6,0,"div",17)(19,Er,30,9,"div",18),h(),b(20,"div",19)(21,"div",20)(22,"input",21),kn("ngModelChange",function(d){return I(r),In(a.userInput,d)||(a.userInput=d),k(d)}),A("keyup.enter",function(){return I(r),k(a.sendMessage())}),h(),b(23,"button",22),A("click",function(){return I(r),k(a.sendMessage())}),w(24,"i",23),h()()()()}t&2&&(ht("open",a.isOpen),f(12),v("ngIf",a.showApiKeyModal),f(),v("ngIf",a.geminiService.hasApiKey()),f(3),v("ngIf",a.messages.length===0),f(),v("ngForOf",a.messages),f(),v("ngIf",a.isProcessing),f(),v("ngIf",a.pendingExpense),f(3),Tn("ngModel",a.userInput),v("disabled",a.isProcessing||!!a.pendingExpense),f(),v("disabled",!a.userInput.trim()||a.isProcessing||!!a.pendingExpense))},dependencies:[Z,ft,gt,vt,Xi,Ki,$i,qi,ji,Bi],styles:[".chat-container[_ngcontent-%COMP%]{position:fixed;bottom:100px;right:20px;width:350px;height:500px;z-index:1050;display:flex;flex-direction:column;transform:translateY(20px);opacity:0;pointer-events:none;transition:all .3s cubic-bezier(.4,0,.2,1)}.chat-container.open[_ngcontent-%COMP%]{transform:translateY(0);opacity:1;pointer-events:all}@media (max-width: 576px){.chat-container[_ngcontent-%COMP%]{width:calc(100% - 40px);bottom:80px;height:60vh}}.chat-messages[_ngcontent-%COMP%]{flex-grow:1;overflow-y:auto}.chat-messages[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px}.chat-messages[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#ffffff0d}.chat-messages[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#fff3;border-radius:2px}.message[_ngcontent-%COMP%]{max-width:85%}.message.user[_ngcontent-%COMP%]{margin-left:auto}.message.user[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]{border-bottom-right-radius:4px!important;display:flex!important;justify-content:end!important}.message.ai[_ngcontent-%COMP%]{margin-right:auto}.message.ai[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]{border-bottom-left-radius:4px!important}.typing-indicator[_ngcontent-%COMP%]{display:flex;gap:4px;padding:4px 0}.typing-indicator[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:6px;height:6px;background:#ffffff80;border-radius:50%;animation:_ngcontent-%COMP%_bounce 1.4s infinite ease-in-out both}.typing-indicator[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(1){animation-delay:-.32s}.typing-indicator[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){animation-delay:-.16s}@keyframes _ngcontent-%COMP%_bounce{0%,80%,to{transform:scale(0)}40%{transform:scale(1)}}.x-small[_ngcontent-%COMP%]{font-size:.7rem}.form-control[_ngcontent-%COMP%]::placeholder{color:#fff!important;opacity:1}.api-key-modal[_ngcontent-%COMP%]{position:absolute;inset:0;background:#000000b3;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);display:flex;align-items:center;justify-content:center;z-index:1060;padding:20px}.api-key-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{width:100%;max-width:400px;animation:_ngcontent-%COMP%_slideIn .3s ease}@keyframes _ngcontent-%COMP%_slideIn{0%{transform:translateY(-20px);opacity:0}to{transform:translateY(0);opacity:1}}"],changeDetection:0})};var en=class e{toggle=new tt;toggleChat(){this.toggle.emit()}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=R({type:e,selectors:[["app-chat-fab"]],outputs:{toggle:"toggle"},decls:2,vars:0,consts:[[1,"chat-fab","btn","btn-primary-gradient","rounded-circle","shadow-lg","d-flex","align-items-center","justify-content-center",3,"click"],[1,"bi","bi-stars","fs-4","text-white"]],template:function(t,a){t&1&&(Cn(0,"button",0),Mi("click",function(){return a.toggleChat()}),wn(1,"i",1),xn())},dependencies:[Z],styles:[".chat-fab[_ngcontent-%COMP%]{position:fixed;bottom:20px;right:20px;width:60px;height:60px;z-index:1060;transition:transform .2s cubic-bezier(.4,0,.2,1)}.chat-fab[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.chat-fab[_ngcontent-%COMP%]:active{transform:scale(.95)}@media (max-width: 576px){.chat-fab[_ngcontent-%COMP%]{bottom:80px}}"],changeDetection:0})};var nn=class e{networkStatus=new Te(navigator.onLine);networkStatus$=this.networkStatus.asObservable();constructor(){window.addEventListener("online",()=>{this.networkStatus.next(!0)}),window.addEventListener("offline",()=>{this.networkStatus.next(!1)})}isOnline(){return navigator.onLine}static \u0275fac=function(t){return new(t||e)};static \u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"})};function Ir(e,n){if(e&1){let t=q();b(0,"div",8)(1,"small"),w(2,"i",9),C(3," Install Expense Tracker for offline use "),b(4,"button",10),A("click",function(){I(t);let r=Y();return k(r.installPWA())}),C(5,"Install"),h()()()}}function kr(e,n){e&1&&(b(0,"div",11)(1,"small"),w(2,"i",12),C(3," You are offline. Data may not be up to date."),h()())}function Mr(e,n){if(e&1){let t=q();b(0,"app-chat-fab",13),A("toggle",function(){I(t);let r=Y();return k(r.toggleChat())}),h()}}var an=class e{constructor(n,t,a){this.router=n;this.networkService=t;this.pwaService=a}title=_i("exp-tracker");isOnline=!0;showInstallButton=!1;isMobile=!1;isChatOpen=!1;links=[{path:"/dashboard",label:"Dashboard",icon:"bi-house-door",activeIcon:"bi-house-door-fill"},{path:"/add",label:"Add Expense",icon:"bi-plus-circle",activeIcon:"bi-plus-circle-fill"},{path:"/expenses",label:"Expenses",icon:"bi-collection",activeIcon:"bi-collection-fill"},{path:"/budgets",label:"Budgets",icon:"bi-wallet",activeIcon:"bi-wallet-fill"},{path:"/incomes",label:"Incomes",icon:"bi-piggy-bank",activeIcon:"bi-piggy-bank-fill"}];ngOnInit(){this.isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),this.networkService.networkStatus$.subscribe(t=>{this.isOnline=t}),window.addEventListener("beforeinstallprompt",t=>{this.showInstallButton=this.pwaService.isInstallable()&&!this.hasSeenInstallBanner()}),window.addEventListener("appinstalled",()=>{this.showInstallButton=!1});let n=()=>{let t=this.pwaService.isInstallable();this.pwaService.canInstall()&&!this.hasSeenInstallBanner()&&(this.showInstallButton=!0)};setTimeout(n,1e3),setInterval(n,5e3)}toggleChat(){this.isChatOpen=!this.isChatOpen}installPWA(){}hasSeenInstallBanner(){return localStorage.getItem("installBannerSeen")==="true"}setInstallBannerSeen(){localStorage.setItem("installBannerSeen","true")}static \u0275fac=function(t){return new(t||e)(H(Ut),H(nn),H(Qi))};static \u0275cmp=R({type:e,selectors:[["app-root"]],decls:11,vars:6,consts:[["class","alert alert-info text-center py-2 m-0",4,"ngIf"],["class","alert alert-warning text-center py-1 m-0",4,"ngIf"],[1,"d-none","d-md-block"],[3,"links"],[1,"main-content"],[1,"d-block","d-md-none"],[3,"close","isOpen"],[3,"toggle",4,"ngIf"],[1,"alert","alert-info","text-center","py-2","m-0"],[1,"bi","bi-download","me-1"],[1,"btn","btn-sm","btn-primary","ms-2",3,"click"],[1,"alert","alert-warning","text-center","py-1","m-0"],[1,"bi","bi-wifi-off","me-1"],[3,"toggle"]],template:function(t,a){t&1&&(F(0,Ir,6,0,"div",0)(1,kr,4,0,"div",1),b(2,"div",2),w(3,"app-desktop-nav",3),h(),b(4,"div",4),w(5,"router-outlet"),h(),b(6,"div",5),w(7,"app-mobile-nav",3),h(),w(8,"app-toast"),b(9,"app-chat-interface",6),A("close",function(){return a.isChatOpen=!1}),h(),F(10,Mr,1,0,"app-chat-fab",7)),t&2&&(v("ngIf",a.showInstallButton&&!a.isOnline),f(),v("ngIf",!a.isOnline&&!a.showInstallButton),f(2),v("links",a.links),f(4),v("links",a.links),f(2),v("isOpen",a.isChatOpen),f(),v("ngIf",!a.isChatOpen))},dependencies:[Z,vt,Ue,We,Ge,Ae,tn,en],styles:[".main-content[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;overflow-x:hidden;overflow-y:auto;height:calc(100vh - 60px);position:relative;z-index:1}app-swipe-layout[_ngcontent-%COMP%]{display:block;flex:1;height:100%;overflow:hidden}app-swipe-container[_ngcontent-%COMP%]{touch-action:pan-y}@media (max-width: 768px){.main-content[_ngcontent-%COMP%]{height:calc(100vh - 56px)}app-swipe-layout[_ngcontent-%COMP%]{padding-bottom:56px;height:calc(100vh - 56px)}}@media (min-width: 769px){app-swipe-layout[_ngcontent-%COMP%]{padding-top:48px;height:calc(100vh - 48px)}}"]})};var Hl=mo(Ia());Ui(an,ia).catch(e=>console.error(e));
