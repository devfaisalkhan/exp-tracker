import{a as E,b as u}from"./chunk-TPYMUZGW.js";import{T as d,X as c,a as o,b as p}from"./chunk-HLGRTS6A.js";var a=class{static KEY_BUDGETS="budgets";static KEY_EXPENSES="expenses";static KEY_INCOME="monthlyIncome";static KEY_API_STORAGE="gemini_api_key"};var x=class i{constructor(t,e){this.toastService=t;this.storageService=e}loadExpenses(){let t=this.storageService.getItem(a.KEY_EXPENSES);return t?t.map(s=>p(o({},s),{date:new Date(s.date),createdAt:new Date(s.createdAt),updatedAt:new Date(s.updatedAt)})):[]}saveExpenses(t){this.storageService.setItem(a.KEY_EXPENSES,t)}getExpenses(){return this.loadExpenses()}addExpense(t){let e=this.loadExpenses(),s=new Date,n=p(o({},t),{id:e.length>0?Math.max(...e.map(r=>r.id))+1:1,createdAt:s,updatedAt:s});return e.push(n),this.saveExpenses(e),n}updateExpense(t){let e=this.loadExpenses(),s=e.findIndex(n=>n.id===t.id);if(s!==-1){let n=new Date;return e[s]=p(o({},t),{updatedAt:n}),this.saveExpenses(e),this.toastService.success("Expense updated successfully!"),!0}return this.toastService.error("Failed to update expense!"),!1}deleteExpense(t){let e=this.loadExpenses(),s=e.findIndex(n=>n.id===t);return s!==-1?(e.splice(s,1),this.saveExpenses(e),!0):!1}getMonthlyExpenses(t,e){return this.loadExpenses().filter(n=>{let r=new Date(n.date);return r.getFullYear()===t&&r.getMonth()+1===e})}getMonthlySpent(t,e){return this.getMonthlyExpenses(t,e).reduce((n,r)=>n+r.amount,0)}static \u0275fac=function(e){return new(e||i)(c(E),c(u))};static \u0275prov=d({token:i,factory:i.\u0275fac,providedIn:"root"})};export{a,x as b};
