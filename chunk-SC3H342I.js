import{a as D,b as h,c as T,d as j,f as R,g as U,h as V,i as G,j as A,k as $,l as q,m as J,n as K,p as L}from"./chunk-MESOCZI5.js";import{a as B}from"./chunk-SDFU5OGX.js";import{b as k}from"./chunk-JNUJ7SRY.js";import{a as N}from"./chunk-VSDMO5SJ.js";import{i as P,j as O,k as E,q as F,s as Y}from"./chunk-ZTY7VYUY.js";import{Aa as a,Ab as I,Ga as d,Gb as w,Hb as g,Jb as f,Ma as S,Ra as s,bb as m,cb as n,db as t,eb as u,lb as b,nb as y,vb as _,wb as C,xb as i,yb as p,zb as x}from"./chunk-I6MSPIIX.js";var H=(c,r,e)=>({"bg-gradient-success":c,"bg-gradient-warning":r,"bg-gradient-danger":e});function Q(c,r){if(c&1&&(n(0,"option",28),i(1),t()),c&2){let e=r.$implicit;m("value",e),a(),p(e)}}function W(c,r){if(c&1&&(n(0,"option",28),i(1),t()),c&2){let e=r.$implicit;m("value",e.value),a(),p(e.name)}}function X(c,r){c&1&&(n(0,"div",29),i(1," Please enter a valid income amount "),t())}function Z(c,r){if(c&1&&(n(0,"div",5)(1,"div",6)(2,"div",30)(3,"div",31)(4,"h5",32),i(5,"Budget Overview"),t(),n(6,"span",33),i(7),t()(),n(8,"div",34)(9,"div",35)(10,"div",36)(11,"small",37),i(12,"Income"),t(),n(13,"span",38),i(14),g(15,"number"),t()()(),n(16,"div",35)(17,"div",36)(18,"small",37),i(19,"Spent"),t(),n(20,"span",39),i(21),g(22,"number"),t()()(),n(23,"div",35)(24,"div",36)(25,"small",37),i(26,"Remaining"),t(),n(27,"span",21),i(28),g(29,"number"),t()()()(),n(30,"div")(31,"div",40)(32,"small",41),i(33,"Usage"),t(),n(34,"small",42),i(35),g(36,"number"),t()(),n(37,"div",43),u(38,"div",44),t()()()()()),c&2){let e=y();a(7),I("",e.getMonthName(e.currentMonth)," ",e.currentYear),a(7),p(f(15,13,e.currentMonthIncome,"1.0-0")),a(7),p(f(22,16,e.expenseService.getMonthlySpent(e.currentYear,e.currentMonth),"1.0-0")),a(6),C("text-danger",e.incomeService.getRemainingBudget(e.currentYear,e.currentMonth)<0)("text-success",e.incomeService.getRemainingBudget(e.currentYear,e.currentMonth)>=0),a(),x(" ",f(29,19,e.incomeService.getRemainingBudget(e.currentYear,e.currentMonth),"1.0-0")," "),a(7),x("",f(36,22,e.incomeService.getPercentageUsed(e.currentYear,e.currentMonth),"1.0-0"),"%"),a(3),_("width",e.incomeService.getPercentageUsed(e.currentYear,e.currentMonth),"%"),m("ngClass",w(25,H,e.incomeService.getPercentageUsed(e.currentYear,e.currentMonth)<80,e.incomeService.getPercentageUsed(e.currentYear,e.currentMonth)>=80&&e.incomeService.getPercentageUsed(e.currentYear,e.currentMonth)<=100,e.incomeService.getPercentageUsed(e.currentYear,e.currentMonth)>100))}}var z=class c{constructor(r,e,o,l){this.fb=r;this.incomeService=e;this.toastService=o;this.expenseService=l;let M=new Date().getFullYear();for(let v=M-5;v<=M+5;v++)this.years.push(v)}incomeForm;currentMonthIncome=null;currentYear=new Date().getFullYear();currentMonth=new Date().getMonth()+1;months=[{value:1,name:"January"},{value:2,name:"February"},{value:3,name:"March"},{value:4,name:"April"},{value:5,name:"May"},{value:6,name:"June"},{value:7,name:"July"},{value:8,name:"August"},{value:9,name:"September"},{value:10,name:"October"},{value:11,name:"November"},{value:12,name:"December"}];years=[];ngOnInit(){this.initForm(),this.loadCurrentMonthIncome()}initForm(){this.incomeForm=this.fb.group({year:[this.currentYear,[h.required]],month:[this.currentMonth,[h.required]],amount:[0,[h.required,h.min(.01)]]})}loadCurrentMonthIncome(){let r=this.incomeService.getMonthlyIncome(this.currentYear,this.currentMonth);r&&(this.currentMonthIncome=r.amount,this.incomeForm.patchValue({amount:r.amount}))}onSubmit(){if(this.incomeForm.valid){let{year:r,month:e,amount:o}=this.incomeForm.value;this.incomeService.setMonthlyIncome(r,e,o),this.toastService.success(`Monthly income for ${this.getMonthName(e)} ${r} set to ${o} PKR!`),r===this.currentYear&&e===this.currentMonth&&(this.currentMonthIncome=o)}else this.toastService.error("Please enter a valid income amount.")}getMonthName(r){return this.months.find(e=>e.value===r)?.name||""}onMonthYearChange(){let{year:r,month:e}=this.incomeForm.value;if(r&&e){let o=this.incomeService.getMonthlyIncome(r,e);this.currentMonthIncome=o?o.amount:null}}static \u0275fac=function(e){return new(e||c)(d(K),d(B),d(N),d(k))};static \u0275cmp=S({type:c,selectors:[["app-set-monthly-income"]],decls:37,vars:6,consts:[[1,"container-fluid","dashboard-container"],[1,"d-flex","align-items-center","mb-4"],["routerLink","/dashboard",1,"btn","btn-icon","btn-sm","me-3","text-white"],[1,"bi","bi-arrow-left","fs-4"],[1,"mb-0","fw-bold","text-gradient"],[1,"row","justify-content-center"],[1,"col-12","col-lg-6"],[1,"glass-card","p-4","mb-4"],[1,"text-secondary","mb-4"],["novalidate","",3,"ngSubmit","formGroup"],[1,"row","mb-4"],[1,"col-6"],["for","year",1,"form-label","text-secondary","small","fw-bold","text-uppercase"],["id","year","formControlName","year",1,"form-select","form-select-lg","bg-transparent","text-white","border-white-10",3,"change"],["class","text-dark",3,"value",4,"ngFor","ngForOf"],["for","month",1,"form-label","text-secondary","small","fw-bold","text-uppercase"],["id","month","formControlName","month",1,"form-select","form-select-lg","bg-transparent","text-white","border-white-10",3,"change"],[1,"mb-5"],["for","amount",1,"form-label","text-secondary","small","fw-bold","text-uppercase"],[1,"input-group"],[1,"input-group-text","bg-transparent","border-end-0","text-accent","border-white-10"],[1,"fw-bold"],["type","number","id","amount","formControlName","amount","min","0.01","step","0.01","placeholder","0.00",1,"form-control","form-control-lg","bg-transparent","text-white","border-start-0","ps-0","border-white-10"],["class","text-danger small mt-1",4,"ngIf"],[1,"d-grid"],["type","submit",1,"btn","btn-primary-gradient","btn-lg","rounded-pill","py-3","fw-bold",3,"disabled"],[1,"bi","bi-check-lg","me-2"],["class","row justify-content-center",4,"ngIf"],[1,"text-dark",3,"value"],[1,"text-danger","small","mt-1"],[1,"glass-card","p-4"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],[1,"text-white","mb-0"],[1,"badge","bg-white-10","text-white","fw-normal"],[1,"row","g-3","mb-4"],[1,"col-4","text-center"],[1,"p-3","rounded-3","bg-white-5","h-100"],[1,"d-block","text-secondary","mb-1"],[1,"fw-bold","text-white"],[1,"fw-bold","text-danger"],[1,"d-flex","justify-content-between","mb-2"],[1,"text-secondary"],[1,"text-white","fw-bold"],[1,"progress","bg-dark",2,"height","8px"],["role","progressbar",1,"progress-bar",3,"ngClass"]],template:function(e,o){if(e&1&&(n(0,"div",0)(1,"div",1)(2,"a",2),u(3,"i",3),t(),n(4,"h2",4),i(5,"Set Monthly Income"),t()(),n(6,"div",5)(7,"div",6)(8,"div",7)(9,"p",8),i(10,"Define your monthly income to track expenses against your budget."),t(),n(11,"form",9),b("ngSubmit",function(){return o.onSubmit()}),n(12,"div",10)(13,"div",11)(14,"label",12),i(15,"Year"),t(),n(16,"select",13),b("change",function(){return o.onMonthYearChange()}),s(17,Q,2,2,"option",14),t()(),n(18,"div",11)(19,"label",15),i(20,"Month"),t(),n(21,"select",16),b("change",function(){return o.onMonthYearChange()}),s(22,W,2,2,"option",14),t()()(),n(23,"div",17)(24,"label",18),i(25,"Monthly Income"),t(),n(26,"div",19)(27,"span",20)(28,"span",21),i(29,"PKR"),t()(),u(30,"input",22),t(),s(31,X,2,0,"div",23),t(),n(32,"div",24)(33,"button",25),u(34,"i",26),i(35,"Set Income "),t()()()()()(),s(36,Z,39,29,"div",27),t()),e&2){let l;a(11),m("formGroup",o.incomeForm),a(6),m("ngForOf",o.years),a(5),m("ngForOf",o.months),a(9),m("ngIf",((l=o.incomeForm.get("amount"))==null?null:l.invalid)&&((l=o.incomeForm.get("amount"))==null?null:l.touched)),a(2),m("disabled",o.incomeForm.invalid),a(3),m("ngIf",o.currentMonthIncome!==null)}},dependencies:[Y,P,O,E,L,R,$,q,D,U,A,T,j,J,V,G,F],styles:[".form-control[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%]{border:1px solid rgba(255,255,255,.1);color:#fff}.form-control[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus{background:#ffffff1a;border-color:var(--text-accent);box-shadow:0 0 0 4px #6366f11a;color:#fff}.form-control[_ngcontent-%COMP%]::placeholder, .form-select[_ngcontent-%COMP%]::placeholder{color:#ffffff4d}.input-group-text[_ngcontent-%COMP%]{border:1px solid rgba(255,255,255,.1);border-right:none}.form-control[_ngcontent-%COMP%]:focus + .input-group-text[_ngcontent-%COMP%], .form-control[_ngcontent-%COMP%]:focus ~ .input-group-text[_ngcontent-%COMP%]{border-color:var(--text-accent)}select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{background-color:#1e293b;color:#fff;padding:10px}.btn-icon[_ngcontent-%COMP%]{width:40px;height:40px;display:flex;align-items:center;justify-content:center;border-radius:50%;background:#ffffff0d;transition:all .2s}.btn-icon[_ngcontent-%COMP%]:hover{background:#ffffff1a;transform:translate(-2px)}.bg-white-5[_ngcontent-%COMP%]{background:#ffffff0d}.bg-white-10[_ngcontent-%COMP%]{background:#ffffff1a}.border-white-10[_ngcontent-%COMP%]{border-color:#ffffff1a!important}.text-accent[_ngcontent-%COMP%]{color:var(--text-accent)!important}.bg-gradient-success[_ngcontent-%COMP%]{background:linear-gradient(90deg,#10b981,#34d399)}.bg-gradient-warning[_ngcontent-%COMP%]{background:linear-gradient(90deg,#f59e0b,#fbbf24)}.bg-gradient-danger[_ngcontent-%COMP%]{background:linear-gradient(90deg,#ef4444,#f87171)}"]})};export{z as SetMonthlyIncomeComponent};
