import{a as A,b as u,c as M,d as T,f as G,h as R,i as k,j as B,k as K,l as q,n as x,p as V}from"./chunk-AQZCTEBC.js";import{Ea as I,Ia as s,Lb as D,Mb as O,P as E,Rb as w,Ta as m,Ua as n,Va as l,Wa as P,Ya as N,a as d,b as c,cb as f,db as a,fb as C,ta as o,ya as F}from"./chunk-7T257EYH.js";var S=class r{localStorageKey="userProfile";defaultUser={id:1,name:"Default User",email:"user@example.com",currency:"PKR",theme:"light",createdAt:new Date,updatedAt:new Date};constructor(){}loadUser(){let e=localStorage.getItem(this.localStorageKey);if(e){let i=JSON.parse(e);return c(d({},i),{createdAt:new Date(i.createdAt),updatedAt:new Date(i.updatedAt)})}return null}saveUser(e){localStorage.setItem(this.localStorageKey,JSON.stringify(e))}getUser(){return this.loadUser()||this.defaultUser}updateUser(e){let i=this.getUser(),t=c(d(d({},i),e),{updatedAt:new Date});return this.saveUser(t),t}setUser(e){this.saveUser(e)}static \u0275fac=function(i){return new(i||r)};static \u0275prov=E({token:r,factory:r.\u0275fac,providedIn:"root"})};function $(r,e){r&1&&(n(0,"div",20),a(1," Name is required (minimum 2 characters) "),l())}function z(r,e){r&1&&(n(0,"div",20),a(1," Please enter a valid email address "),l())}function H(r,e){if(r&1&&(n(0,"option",21),a(1),l()),r&2){let i=e.$implicit;m("value",i.value),o(),C(" ",i.label," ")}}function Q(r,e){r&1&&(n(0,"div",20),a(1," Please select a currency "),l())}function W(r,e){if(r&1&&(n(0,"option",21),a(1),l()),r&2){let i=e.$implicit;m("value",i.value),o(),C(" ",i.label," ")}}function X(r,e){r&1&&(n(0,"div",20),a(1," Please select a theme "),l())}var j=class r{constructor(e,i){this.fb=e;this.userService=i}profileForm;user=null;themes=[{value:"light",label:"Light"},{value:"dark",label:"Dark"}];currencies=[{value:"PKR",label:"Pakistani Rupee (PKR)"},{value:"USD",label:"US Dollar (USD)"},{value:"EUR",label:"Euro (EUR)"},{value:"GBP",label:"British Pound (GBP)"}];ngOnInit(){this.user=this.userService.getUser(),this.initForm()}initForm(){this.user&&(this.profileForm=this.fb.group({name:[this.user.name,[u.required,u.minLength(2)]],email:[this.user.email,[u.required,u.email]],currency:[this.user.currency,[u.required]],theme:[this.user.theme,[u.required]]}))}onSubmit(){if(this.profileForm.valid&&this.user){let e=this.profileForm.value,i=c(d({},this.user),{name:e.name,email:e.email,currency:e.currency,theme:e.theme});this.userService.updateUser(i),this.user=i,alert("Profile updated successfully!")}}static \u0275fac=function(i){return new(i||r)(F(x),F(S))};static \u0275cmp=I({type:r,selectors:[["app-user-profile"]],decls:33,vars:16,consts:[[1,"container","mt-4"],[1,"row"],[1,"col-md-6","offset-md-3"],[1,"card"],[1,"card-body"],["novalidate","",1,"needs-validation",3,"ngSubmit","formGroup"],[1,"mb-3"],["for","name",1,"form-label"],["type","text","id","name","formControlName","name","placeholder","Enter your full name",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["for","email",1,"form-label"],["type","email","id","email","formControlName","email","placeholder","Enter your email",1,"form-control"],["for","currency",1,"form-label"],["id","currency","formControlName","currency",1,"form-select"],[3,"value",4,"ngFor","ngForOf"],[1,"mb-4"],["for","theme",1,"form-label"],["id","theme","formControlName","theme",1,"form-select"],[1,"d-grid"],["type","submit",1,"btn","btn-primary","btn-lg",3,"disabled"],[1,"invalid-feedback"],[3,"value"]],template:function(i,t){if(i&1&&(n(0,"div",0)(1,"h2"),a(2,"User Profile"),l(),n(3,"div",1)(4,"div",2)(5,"div",3)(6,"div",4)(7,"form",5),N("ngSubmit",function(){return t.onSubmit()}),n(8,"div",6)(9,"label",7),a(10,"Full Name"),l(),P(11,"input",8),s(12,$,2,0,"div",9),l(),n(13,"div",6)(14,"label",10),a(15,"Email Address"),l(),P(16,"input",11),s(17,z,2,0,"div",9),l(),n(18,"div",6)(19,"label",12),a(20,"Preferred Currency"),l(),n(21,"select",13),s(22,H,2,2,"option",14),l(),s(23,Q,2,0,"div",9),l(),n(24,"div",15)(25,"label",16),a(26,"Theme"),l(),n(27,"select",17),s(28,W,2,2,"option",14),l(),s(29,X,2,0,"div",9),l(),n(30,"div",18)(31,"button",19),a(32," Update Profile "),l()()()()()()()()),i&2){let p,v,g,h,U,b,y,_;o(7),m("formGroup",t.profileForm),o(4),f("is-invalid",((p=t.profileForm.get("name"))==null?null:p.invalid)&&((p=t.profileForm.get("name"))==null?null:p.touched)),o(),m("ngIf",((v=t.profileForm.get("name"))==null?null:v.invalid)&&((v=t.profileForm.get("name"))==null?null:v.touched)),o(4),f("is-invalid",((g=t.profileForm.get("email"))==null?null:g.invalid)&&((g=t.profileForm.get("email"))==null?null:g.touched)),o(),m("ngIf",((h=t.profileForm.get("email"))==null?null:h.invalid)&&((h=t.profileForm.get("email"))==null?null:h.touched)),o(4),f("is-invalid",((U=t.profileForm.get("currency"))==null?null:U.invalid)&&((U=t.profileForm.get("currency"))==null?null:U.touched)),o(),m("ngForOf",t.currencies),o(),m("ngIf",((b=t.profileForm.get("currency"))==null?null:b.invalid)&&((b=t.profileForm.get("currency"))==null?null:b.touched)),o(4),f("is-invalid",((y=t.profileForm.get("theme"))==null?null:y.invalid)&&((y=t.profileForm.get("theme"))==null?null:y.touched)),o(),m("ngForOf",t.themes),o(),m("ngIf",((_=t.profileForm.get("theme"))==null?null:_.invalid)&&((_=t.profileForm.get("theme"))==null?null:_.touched)),o(2),m("disabled",t.profileForm.invalid)}},dependencies:[w,D,O,V,G,K,q,A,B,M,T,R,k],styles:[".card[_ngcontent-%COMP%]{box-shadow:0 4px 6px #0000001a;border:none}.card-body[_ngcontent-%COMP%]{padding:2rem}.form-label[_ngcontent-%COMP%], .btn[_ngcontent-%COMP%]{font-weight:600}"]})};export{j as UserProfileComponent};
