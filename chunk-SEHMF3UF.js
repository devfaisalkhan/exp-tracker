import{a as B,b as v,c as R,d as k,f as U,g as V,h as G,i as A,j as K,k as $,l as j,m as z,n as q,p as J}from"./chunk-U4TGZ3G4.js";import{a as D}from"./chunk-CZV4CW5C.js";import{b as T}from"./chunk-ZG5GLZP6.js";import{Ea as S,Ia as u,Mb as O,Nb as E,Ob as Y,Sa as y,Ta as l,Tb as N,Ua as n,Va as t,Vb as w,Wa as f,Ya as b,Za as _,bb as C,cb as I,db as x,eb as r,fb as M,gb as s,hb as P,ob as F,pb as p,rb as g,ta as a,ya as h}from"./chunk-SNEZJZPV.js";var L=(m,i,e)=>({"bg-success":m,"bg-warning":i,"bg-danger":e});function Q(m,i){if(m&1&&(n(0,"option",23),r(1),t()),m&2){let e=i.$implicit;l("value",e),a(),M(e)}}function W(m,i){if(m&1&&(n(0,"option",23),r(1),t()),m&2){let e=i.$implicit;l("value",e.value),a(),M(e.name)}}function X(m,i){m&1&&(n(0,"div",24),r(1," Please enter a valid income amount "),t())}function Z(m,i){if(m&1&&(n(0,"div",25)(1,"div",26)(2,"div",27)(3,"div",28)(4,"h5",29),r(5),t(),n(6,"div",1)(7,"div",30)(8,"h6"),r(9,"Income"),t(),n(10,"p",31),r(11),p(12,"number"),t()(),n(13,"div",30)(14,"h6"),r(15,"Spent"),t(),n(16,"p",32),r(17),p(18,"number"),t()(),n(19,"div",30)(20,"h6"),r(21,"Remaining"),t(),n(22,"p"),r(23),p(24,"number"),t()()(),n(25,"div",33)(26,"div",34)(27,"small"),r(28,"0%"),t(),n(29,"small"),r(30),p(31,"number"),t(),n(32,"small"),r(33,"100%"),t()(),n(34,"div",35),f(35,"div",36),t()()()()()()),m&2){let e=_();a(5),P("Current Month: ",e.getMonthName(e.currentMonth)," ",e.currentYear),a(6),s("PKR ",g(12,12,e.currentMonthIncome,"1.2-2")),a(6),s("PKR ",g(18,15,e.incomeService.getMonthlySpent(e.currentYear,e.currentMonth),"1.2-2")),a(5),x(e.incomeService.getRemainingBudget(e.currentYear,e.currentMonth)<0?"text-danger":"text-success"),a(),s(" PKR ",g(24,18,e.incomeService.getRemainingBudget(e.currentYear,e.currentMonth),"1.2-2")," "),a(7),s("",g(31,21,e.incomeService.getPercentageUsed(e.currentYear,e.currentMonth),"1.0-0"),"%"),a(5),C("width",e.incomeService.getPercentageUsed(e.currentYear,e.currentMonth),"%"),l("ngClass",F(24,L,e.incomeService.getPercentageUsed(e.currentYear,e.currentMonth)<50,e.incomeService.getPercentageUsed(e.currentYear,e.currentMonth)>=50&&e.incomeService.getPercentageUsed(e.currentYear,e.currentMonth)<80,e.incomeService.getPercentageUsed(e.currentYear,e.currentMonth)>=80)),y("aria-valuenow",e.incomeService.getPercentageUsed(e.currentYear,e.currentMonth))}}var H=class m{constructor(i,e,o){this.fb=i;this.incomeService=e;this.toastService=o;let c=new Date().getFullYear();for(let d=c-5;d<=c+5;d++)this.years.push(d)}incomeForm;currentMonthIncome=null;currentYear=new Date().getFullYear();currentMonth=new Date().getMonth()+1;months=[{value:1,name:"January"},{value:2,name:"February"},{value:3,name:"March"},{value:4,name:"April"},{value:5,name:"May"},{value:6,name:"June"},{value:7,name:"July"},{value:8,name:"August"},{value:9,name:"September"},{value:10,name:"October"},{value:11,name:"November"},{value:12,name:"December"}];years=[];ngOnInit(){this.initForm(),this.loadCurrentMonthIncome()}initForm(){this.incomeForm=this.fb.group({year:[this.currentYear,[v.required]],month:[this.currentMonth,[v.required]],amount:[0,[v.required,v.min(.01)]]})}loadCurrentMonthIncome(){let i=this.incomeService.getMonthlyIncome(this.currentYear,this.currentMonth);i&&(this.currentMonthIncome=i.amount,this.incomeForm.patchValue({amount:i.amount}))}onSubmit(){if(this.incomeForm.valid){let{year:i,month:e,amount:o}=this.incomeForm.value;this.incomeService.setMonthlyIncome(i,e,o),this.toastService.success(`Monthly income for ${this.getMonthName(e)} ${i} set to ${o} PKR!`),i===this.currentYear&&e===this.currentMonth&&(this.currentMonthIncome=o)}else this.toastService.error("Please enter a valid income amount.")}getMonthName(i){return this.months.find(e=>e.value===i)?.name||""}onMonthYearChange(){let{year:i,month:e}=this.incomeForm.value;if(i&&e){let o=this.incomeService.getMonthlyIncome(i,e);this.currentMonthIncome=o?o.amount:null}}static \u0275fac=function(e){return new(e||m)(h(q),h(T),h(D))};static \u0275cmp=S({type:m,selectors:[["app-set-monthly-income"]],decls:33,vars:8,consts:[[1,"container","mt-4"],[1,"row"],[1,"col-12"],[1,"text-muted"],[1,"col-md-6","offset-md-3"],[1,"card"],[1,"card-body"],["novalidate","",1,"needs-validation",3,"ngSubmit","formGroup"],[1,"row","mb-3"],[1,"col-md-6"],["for","year",1,"form-label"],["id","year","formControlName","year",1,"form-select",3,"change"],[3,"value",4,"ngFor","ngForOf"],["for","month",1,"form-label"],["id","month","formControlName","month",1,"form-select",3,"change"],[1,"mb-3"],["for","amount",1,"form-label"],["type","number","id","amount","formControlName","amount","min","0.01","step","0.01","placeholder","Enter your monthly income",1,"form-control","form-control-lg"],["class","invalid-feedback",4,"ngIf"],[1,"d-grid"],["type","submit",1,"btn","btn-primary","btn-lg",3,"disabled"],[1,"bi","bi-currency-exchange","me-2"],["class","row mt-4",4,"ngIf"],[3,"value"],[1,"invalid-feedback"],[1,"row","mt-4"],[1,"col-md-8","offset-md-2"],[1,"card","border-primary"],[1,"card-body","text-center"],[1,"card-title"],[1,"col-4"],[1,"text-primary","mb-0"],[1,"text-danger","mb-0"],[1,"mt-3"],[1,"d-flex","justify-content-between","mb-1"],[1,"progress",2,"height","20px"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar",3,"ngClass"]],template:function(e,o){if(e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),r(4,"Set Monthly Income"),t(),n(5,"p",3),r(6,"Define your monthly income to track expenses against your budget"),t()()(),n(7,"div",1)(8,"div",4)(9,"div",5)(10,"div",6)(11,"form",7),b("ngSubmit",function(){return o.onSubmit()}),n(12,"div",8)(13,"div",9)(14,"label",10),r(15,"Year"),t(),n(16,"select",11),b("change",function(){return o.onMonthYearChange()}),u(17,Q,2,2,"option",12),t()(),n(18,"div",9)(19,"label",13),r(20,"Month"),t(),n(21,"select",14),b("change",function(){return o.onMonthYearChange()}),u(22,W,2,2,"option",12),t()()(),n(23,"div",15)(24,"label",16),r(25,"Monthly Income (PKR)"),t(),f(26,"input",17),u(27,X,2,0,"div",18),t(),n(28,"div",19)(29,"button",20),f(30,"i",21),r(31,"Set Income "),t()()()()()()(),u(32,Z,36,28,"div",22),t()),e&2){let c,d;a(11),l("formGroup",o.incomeForm),a(6),l("ngForOf",o.years),a(5),l("ngForOf",o.months),a(4),I("is-invalid",((c=o.incomeForm.get("amount"))==null?null:c.invalid)&&((c=o.incomeForm.get("amount"))==null?null:c.touched)),a(),l("ngIf",((d=o.incomeForm.get("amount"))==null?null:d.invalid)&&((d=o.incomeForm.get("amount"))==null?null:d.touched)),a(2),l("disabled",o.incomeForm.invalid),a(3),l("ngIf",o.currentMonthIncome!==null)}},dependencies:[w,O,E,Y,J,U,$,j,B,V,K,R,k,z,G,A,N],styles:[".card[_ngcontent-%COMP%]{box-shadow:0 4px 6px #0000001a;border:none;margin-bottom:1.5rem}.card-header[_ngcontent-%COMP%]{font-weight:600;border-bottom:1px solid rgba(0,0,0,.125)}.form-control-lg[_ngcontent-%COMP%]{font-size:1.25rem;padding:.75rem 1rem}.btn-lg[_ngcontent-%COMP%]{padding:.75rem 1.5rem;font-size:1.25rem}.progress[_ngcontent-%COMP%]{background-color:#e9ecef;border-radius:.25rem}.text-primary[_ngcontent-%COMP%]{color:#0d6efd!important}.text-success[_ngcontent-%COMP%]{color:#198754!important}.text-danger[_ngcontent-%COMP%]{color:#dc3545!important}.text-warning[_ngcontent-%COMP%]{color:#ffc107!important}.bg-primary[_ngcontent-%COMP%]{background-color:#0d6efd!important}.bg-success[_ngcontent-%COMP%]{background-color:#198754!important}.bg-warning[_ngcontent-%COMP%]{background-color:#ffc107!important}.bg-danger[_ngcontent-%COMP%]{background-color:#dc3545!important}@media (max-width: 768px){.card-body[_ngcontent-%COMP%]{padding:1rem}.form-control-lg[_ngcontent-%COMP%]{font-size:1rem;padding:.5rem}.btn-lg[_ngcontent-%COMP%]{padding:.5rem 1rem;font-size:1rem}}"]})};export{H as SetMonthlyIncomeComponent};
