import{a as Xi}from"./chunk-JM6T4NGY.js";import{c as wn,d as De,f as ie,g as Ne}from"./chunk-PT2JM3JA.js";import{a as Bi,b as ji,c as Vi,d as Me,e as Ht,f as Se,g as Ae,h as Hi,i as Ui,j as Oe}from"./chunk-XBZE7J4I.js";import{a as Yi,c as Wi,e as $i,o as Gi}from"./chunk-MESOCZI5.js";import{b as zi}from"./chunk-DREWYT65.js";import{a as Re}from"./chunk-VSDMO5SJ.js";import{i as ht,j as gt,k as vt,l as Ri,m as Di,n as Ni,p as Pi,q as Li,s as q,w as Fi}from"./chunk-ZTY7VYUY.js";import{$ as bi,$a as vn,A as Zt,Aa as g,Bb as Ii,Cb as ki,D as li,Db as Mi,Ea as yi,F as bt,Fb as Ie,Ga as j,Ha as Ci,Hb as Vt,Ib as ke,Ja as xi,Jb as xn,M as di,Ma as S,Mb as Si,N as mi,Na as V,O as Jt,Oa as Lt,P as ui,R as mt,Ra as z,S as pi,Sb as Ai,Ta as Z,Tb as Oi,U as O,Ua as It,V as B,X as Pt,Y as te,Z as k,Za as wi,_ as Ee,a as oi,bb as y,cb as b,d as ro,da as R,db as f,e as so,ea as D,eb as x,f as ri,fa as ee,fb as _n,ga as Te,gb as yn,h as Dt,hb as Cn,ib as J,k as Nt,ka as fi,l as we,la as hi,lb as L,mb as Ei,nb as ot,ob as Ft,pb as Bt,qa as gn,rb as jt,s as at,sb as kt,t as si,tb as Mt,ua as gi,ub as ne,va as vi,w as ci,wa as _i,wb as ft,xb as w,yb as tt,z as pt,zb as Ti}from"./chunk-I6MSPIIX.js";var wa=ro((Ol,nn)=>{"use strict";(function(t,i,e,a){"use strict";var r=["","webkit","Moz","MS","ms","o"],l=i.createElement("div"),d="function",u=Math.round,h=Math.abs,C=Date.now;function F(n,o,s){return setTimeout(an(n,s),o)}function W(n,o,s){return Array.isArray(n)?(_(n,s[o],s),!0):!1}function _(n,o,s){var c;if(n)if(n.forEach)n.forEach(o,s);else if(n.length!==a)for(c=0;c<n.length;)o.call(s,n[c],c,n),c++;else for(c in n)n.hasOwnProperty(c)&&o.call(s,n[c],c,n)}function E(n,o,s){var c="DEPRECATED METHOD: "+o+`
`+s+` AT 
`;return function(){var m=new Error("get-stack-trace"),p=m&&m.stack?m.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",v=t.console&&(t.console.warn||t.console.log);return v&&v.call(t.console,c,p),n.apply(this,arguments)}}var T;typeof Object.assign!="function"?T=function(o){if(o===a||o===null)throw new TypeError("Cannot convert undefined or null to object");for(var s=Object(o),c=1;c<arguments.length;c++){var m=arguments[c];if(m!==a&&m!==null)for(var p in m)m.hasOwnProperty(p)&&(s[p]=m[p])}return s}:T=Object.assign;var st=E(function(o,s,c){for(var m=Object.keys(s),p=0;p<m.length;)(!c||c&&o[m[p]]===a)&&(o[m[p]]=s[m[p]]),p++;return o},"extend","Use `assign`."),Ea=E(function(o,s){return st(o,s,!0)},"merge","Use `assign`.");function G(n,o,s){var c=o.prototype,m;m=n.prototype=Object.create(c),m.constructor=n,m._super=c,s&&T(m,s)}function an(n,o){return function(){return n.apply(o,arguments)}}function on(n,o){return typeof n==d?n.apply(o&&o[0]||a,o):n}function Pn(n,o){return n===a?o:n}function ce(n,o,s){_(de(o),function(c){n.addEventListener(c,s,!1)})}function le(n,o,s){_(de(o),function(c){n.removeEventListener(c,s,!1)})}function Ln(n,o){for(;n;){if(n==o)return!0;n=n.parentNode}return!1}function xt(n,o){return n.indexOf(o)>-1}function de(n){return n.trim().split(/\s+/g)}function Ot(n,o,s){if(n.indexOf&&!s)return n.indexOf(o);for(var c=0;c<n.length;){if(s&&n[c][s]==o||!s&&n[c]===o)return c;c++}return-1}function me(n){return Array.prototype.slice.call(n,0)}function Fn(n,o,s){for(var c=[],m=[],p=0;p<n.length;){var v=o?n[p][o]:n[p];Ot(m,v)<0&&c.push(n[p]),m[p]=v,p++}return s&&(o?c=c.sort(function(P,U){return P[o]>U[o]}):c=c.sort()),c}function ue(n,o){for(var s,c,m=o[0].toUpperCase()+o.slice(1),p=0;p<r.length;){if(s=r[p],c=s?s+m:o,c in n)return c;p++}return a}var Ta=1;function Ia(){return Ta++}function Bn(n){var o=n.ownerDocument||n;return o.defaultView||o.parentWindow||t}var ka=/mobile|tablet|ip(ad|hone|od)|android/i,jn="ontouchstart"in t,Ma=ue(t,"PointerEvent")!==a,Sa=jn&&ka.test(navigator.userAgent),Yt="touch",Aa="pen",rn="mouse",Oa="kinect",Ra=25,H=1,wt=2,M=4,$=8,pe=1,Wt=2,$t=4,Gt=8,Xt=16,et=Wt|$t,Et=Gt|Xt,Vn=et|Et,Hn=["x","y"],be=["clientX","clientY"];function X(n,o){var s=this;this.manager=n,this.callback=o,this.element=n.element,this.target=n.options.inputTarget,this.domHandler=function(c){on(n.options.enable,[n])&&s.handler(c)},this.init()}X.prototype={handler:function(){},init:function(){this.evEl&&ce(this.element,this.evEl,this.domHandler),this.evTarget&&ce(this.target,this.evTarget,this.domHandler),this.evWin&&ce(Bn(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&le(this.element,this.evEl,this.domHandler),this.evTarget&&le(this.target,this.evTarget,this.domHandler),this.evWin&&le(Bn(this.element),this.evWin,this.domHandler)}};function Da(n){var o,s=n.options.inputClass;return s?o=s:Ma?o=cn:Sa?o=ge:jn?o=ln:o=he,new o(n,Na)}function Na(n,o,s){var c=s.pointers.length,m=s.changedPointers.length,p=o&H&&c-m===0,v=o&(M|$)&&c-m===0;s.isFirst=!!p,s.isFinal=!!v,p&&(n.session={}),s.eventType=o,Pa(n,s),n.emit("hammer.input",s),n.recognize(s),n.session.prevInput=s}function Pa(n,o){var s=n.session,c=o.pointers,m=c.length;s.firstInput||(s.firstInput=Un(o)),m>1&&!s.firstMultiple?s.firstMultiple=Un(o):m===1&&(s.firstMultiple=!1);var p=s.firstInput,v=s.firstMultiple,A=v?v.center:p.center,P=o.center=zn(c);o.timeStamp=C(),o.deltaTime=o.timeStamp-p.timeStamp,o.angle=sn(A,P),o.distance=fe(A,P),La(s,o),o.offsetDirection=Wn(o.deltaX,o.deltaY);var U=Yn(o.deltaTime,o.deltaX,o.deltaY);o.overallVelocityX=U.x,o.overallVelocityY=U.y,o.overallVelocity=h(U.x)>h(U.y)?U.x:U.y,o.scale=v?ja(v.pointers,c):1,o.rotation=v?Ba(v.pointers,c):0,o.maxPointers=s.prevInput?o.pointers.length>s.prevInput.maxPointers?o.pointers.length:s.prevInput.maxPointers:o.pointers.length,Fa(s,o);var it=n.element;Ln(o.srcEvent.target,it)&&(it=o.srcEvent.target),o.target=it}function La(n,o){var s=o.center,c=n.offsetDelta||{},m=n.prevDelta||{},p=n.prevInput||{};(o.eventType===H||p.eventType===M)&&(m=n.prevDelta={x:p.deltaX||0,y:p.deltaY||0},c=n.offsetDelta={x:s.x,y:s.y}),o.deltaX=m.x+(s.x-c.x),o.deltaY=m.y+(s.y-c.y)}function Fa(n,o){var s=n.lastInterval||o,c=o.timeStamp-s.timeStamp,m,p,v,A;if(o.eventType!=$&&(c>Ra||s.velocity===a)){var P=o.deltaX-s.deltaX,U=o.deltaY-s.deltaY,it=Yn(c,P,U);p=it.x,v=it.y,m=h(it.x)>h(it.y)?it.x:it.y,A=Wn(P,U),n.lastInterval=o}else m=s.velocity,p=s.velocityX,v=s.velocityY,A=s.direction;o.velocity=m,o.velocityX=p,o.velocityY=v,o.direction=A}function Un(n){for(var o=[],s=0;s<n.pointers.length;)o[s]={clientX:u(n.pointers[s].clientX),clientY:u(n.pointers[s].clientY)},s++;return{timeStamp:C(),pointers:o,center:zn(o),deltaX:n.deltaX,deltaY:n.deltaY}}function zn(n){var o=n.length;if(o===1)return{x:u(n[0].clientX),y:u(n[0].clientY)};for(var s=0,c=0,m=0;m<o;)s+=n[m].clientX,c+=n[m].clientY,m++;return{x:u(s/o),y:u(c/o)}}function Yn(n,o,s){return{x:o/n||0,y:s/n||0}}function Wn(n,o){return n===o?pe:h(n)>=h(o)?n<0?Wt:$t:o<0?Gt:Xt}function fe(n,o,s){s||(s=Hn);var c=o[s[0]]-n[s[0]],m=o[s[1]]-n[s[1]];return Math.sqrt(c*c+m*m)}function sn(n,o,s){s||(s=Hn);var c=o[s[0]]-n[s[0]],m=o[s[1]]-n[s[1]];return Math.atan2(m,c)*180/Math.PI}function Ba(n,o){return sn(o[1],o[0],be)+sn(n[1],n[0],be)}function ja(n,o){return fe(o[0],o[1],be)/fe(n[0],n[1],be)}var Va={mousedown:H,mousemove:wt,mouseup:M},Ha="mousedown",Ua="mousemove mouseup";function he(){this.evEl=Ha,this.evWin=Ua,this.pressed=!1,X.apply(this,arguments)}G(he,X,{handler:function(o){var s=Va[o.type];s&H&&o.button===0&&(this.pressed=!0),s&wt&&o.which!==1&&(s=M),this.pressed&&(s&M&&(this.pressed=!1),this.callback(this.manager,s,{pointers:[o],changedPointers:[o],pointerType:rn,srcEvent:o}))}});var za={pointerdown:H,pointermove:wt,pointerup:M,pointercancel:$,pointerout:$},Ya={2:Yt,3:Aa,4:rn,5:Oa},$n="pointerdown",Gn="pointermove pointerup pointercancel";t.MSPointerEvent&&!t.PointerEvent&&($n="MSPointerDown",Gn="MSPointerMove MSPointerUp MSPointerCancel");function cn(){this.evEl=$n,this.evWin=Gn,X.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}G(cn,X,{handler:function(o){var s=this.store,c=!1,m=o.type.toLowerCase().replace("ms",""),p=za[m],v=Ya[o.pointerType]||o.pointerType,A=v==Yt,P=Ot(s,o.pointerId,"pointerId");p&H&&(o.button===0||A)?P<0&&(s.push(o),P=s.length-1):p&(M|$)&&(c=!0),!(P<0)&&(s[P]=o,this.callback(this.manager,p,{pointers:s,changedPointers:[o],pointerType:v,srcEvent:o}),c&&s.splice(P,1))}});var Wa={touchstart:H,touchmove:wt,touchend:M,touchcancel:$},$a="touchstart",Ga="touchstart touchmove touchend touchcancel";function Xn(){this.evTarget=$a,this.evWin=Ga,this.started=!1,X.apply(this,arguments)}G(Xn,X,{handler:function(o){var s=Wa[o.type];if(s===H&&(this.started=!0),!!this.started){var c=Xa.call(this,o,s);s&(M|$)&&c[0].length-c[1].length===0&&(this.started=!1),this.callback(this.manager,s,{pointers:c[0],changedPointers:c[1],pointerType:Yt,srcEvent:o})}}});function Xa(n,o){var s=me(n.touches),c=me(n.changedTouches);return o&(M|$)&&(s=Fn(s.concat(c),"identifier",!0)),[s,c]}var Ka={touchstart:H,touchmove:wt,touchend:M,touchcancel:$},qa="touchstart touchmove touchend touchcancel";function ge(){this.evTarget=qa,this.targetIds={},X.apply(this,arguments)}G(ge,X,{handler:function(o){var s=Ka[o.type],c=Qa.call(this,o,s);c&&this.callback(this.manager,s,{pointers:c[0],changedPointers:c[1],pointerType:Yt,srcEvent:o})}});function Qa(n,o){var s=me(n.touches),c=this.targetIds;if(o&(H|wt)&&s.length===1)return c[s[0].identifier]=!0,[s,s];var m,p,v=me(n.changedTouches),A=[],P=this.target;if(p=s.filter(function(U){return Ln(U.target,P)}),o===H)for(m=0;m<p.length;)c[p[m].identifier]=!0,m++;for(m=0;m<v.length;)c[v[m].identifier]&&A.push(v[m]),o&(M|$)&&delete c[v[m].identifier],m++;if(A.length)return[Fn(p.concat(A),"identifier",!0),A]}var Za=2500,Kn=25;function ln(){X.apply(this,arguments);var n=an(this.handler,this);this.touch=new ge(this.manager,n),this.mouse=new he(this.manager,n),this.primaryTouch=null,this.lastTouches=[]}G(ln,X,{handler:function(o,s,c){var m=c.pointerType==Yt,p=c.pointerType==rn;if(!(p&&c.sourceCapabilities&&c.sourceCapabilities.firesTouchEvents)){if(m)Ja.call(this,s,c);else if(p&&to.call(this,c))return;this.callback(o,s,c)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function Ja(n,o){n&H?(this.primaryTouch=o.changedPointers[0].identifier,qn.call(this,o)):n&(M|$)&&qn.call(this,o)}function qn(n){var o=n.changedPointers[0];if(o.identifier===this.primaryTouch){var s={x:o.clientX,y:o.clientY};this.lastTouches.push(s);var c=this.lastTouches,m=function(){var p=c.indexOf(s);p>-1&&c.splice(p,1)};setTimeout(m,Za)}}function to(n){for(var o=n.srcEvent.clientX,s=n.srcEvent.clientY,c=0;c<this.lastTouches.length;c++){var m=this.lastTouches[c],p=Math.abs(o-m.x),v=Math.abs(s-m.y);if(p<=Kn&&v<=Kn)return!0}return!1}var Qn=ue(l.style,"touchAction"),Zn=Qn!==a,Jn="compute",ti="auto",dn="manipulation",Tt="none",Kt="pan-x",qt="pan-y",ve=no();function mn(n,o){this.manager=n,this.set(o)}mn.prototype={set:function(n){n==Jn&&(n=this.compute()),Zn&&this.manager.element.style&&ve[n]&&(this.manager.element.style[Qn]=n),this.actions=n.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var n=[];return _(this.manager.recognizers,function(o){on(o.options.enable,[o])&&(n=n.concat(o.getTouchAction()))}),eo(n.join(" "))},preventDefaults:function(n){var o=n.srcEvent,s=n.offsetDirection;if(this.manager.session.prevented){o.preventDefault();return}var c=this.actions,m=xt(c,Tt)&&!ve[Tt],p=xt(c,qt)&&!ve[qt],v=xt(c,Kt)&&!ve[Kt];if(m){var A=n.pointers.length===1,P=n.distance<2,U=n.deltaTime<250;if(A&&P&&U)return}if(!(v&&p)&&(m||p&&s&et||v&&s&Et))return this.preventSrc(o)},preventSrc:function(n){this.manager.session.prevented=!0,n.preventDefault()}};function eo(n){if(xt(n,Tt))return Tt;var o=xt(n,Kt),s=xt(n,qt);return o&&s?Tt:o||s?o?Kt:qt:xt(n,dn)?dn:ti}function no(){if(!Zn)return!1;var n={},o=t.CSS&&t.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(s){n[s]=o?t.CSS.supports("touch-action",s):!0}),n}var _e=1,K=2,Rt=4,ut=8,ct=ut,Qt=16,nt=32;function lt(n){this.options=T({},this.defaults,n||{}),this.id=Ia(),this.manager=null,this.options.enable=Pn(this.options.enable,!0),this.state=_e,this.simultaneous={},this.requireFail=[]}lt.prototype={defaults:{},set:function(n){return T(this.options,n),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(n){if(W(n,"recognizeWith",this))return this;var o=this.simultaneous;return n=ye(n,this),o[n.id]||(o[n.id]=n,n.recognizeWith(this)),this},dropRecognizeWith:function(n){return W(n,"dropRecognizeWith",this)?this:(n=ye(n,this),delete this.simultaneous[n.id],this)},requireFailure:function(n){if(W(n,"requireFailure",this))return this;var o=this.requireFail;return n=ye(n,this),Ot(o,n)===-1&&(o.push(n),n.requireFailure(this)),this},dropRequireFailure:function(n){if(W(n,"dropRequireFailure",this))return this;n=ye(n,this);var o=Ot(this.requireFail,n);return o>-1&&this.requireFail.splice(o,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(n){return!!this.simultaneous[n.id]},emit:function(n){var o=this,s=this.state;function c(m){o.manager.emit(m,n)}s<ut&&c(o.options.event+ei(s)),c(o.options.event),n.additionalEvent&&c(n.additionalEvent),s>=ut&&c(o.options.event+ei(s))},tryEmit:function(n){if(this.canEmit())return this.emit(n);this.state=nt},canEmit:function(){for(var n=0;n<this.requireFail.length;){if(!(this.requireFail[n].state&(nt|_e)))return!1;n++}return!0},recognize:function(n){var o=T({},n);if(!on(this.options.enable,[this,o])){this.reset(),this.state=nt;return}this.state&(ct|Qt|nt)&&(this.state=_e),this.state=this.process(o),this.state&(K|Rt|ut|Qt)&&this.tryEmit(o)},process:function(n){},getTouchAction:function(){},reset:function(){}};function ei(n){return n&Qt?"cancel":n&ut?"end":n&Rt?"move":n&K?"start":""}function ni(n){return n==Xt?"down":n==Gt?"up":n==Wt?"left":n==$t?"right":""}function ye(n,o){var s=o.manager;return s?s.get(n):n}function Q(){lt.apply(this,arguments)}G(Q,lt,{defaults:{pointers:1},attrTest:function(n){var o=this.options.pointers;return o===0||n.pointers.length===o},process:function(n){var o=this.state,s=n.eventType,c=o&(K|Rt),m=this.attrTest(n);return c&&(s&$||!m)?o|Qt:c||m?s&M?o|ut:o&K?o|Rt:K:nt}});function Ce(){Q.apply(this,arguments),this.pX=null,this.pY=null}G(Ce,Q,{defaults:{event:"pan",threshold:10,pointers:1,direction:Vn},getTouchAction:function(){var n=this.options.direction,o=[];return n&et&&o.push(qt),n&Et&&o.push(Kt),o},directionTest:function(n){var o=this.options,s=!0,c=n.distance,m=n.direction,p=n.deltaX,v=n.deltaY;return m&o.direction||(o.direction&et?(m=p===0?pe:p<0?Wt:$t,s=p!=this.pX,c=Math.abs(n.deltaX)):(m=v===0?pe:v<0?Gt:Xt,s=v!=this.pY,c=Math.abs(n.deltaY))),n.direction=m,s&&c>o.threshold&&m&o.direction},attrTest:function(n){return Q.prototype.attrTest.call(this,n)&&(this.state&K||!(this.state&K)&&this.directionTest(n))},emit:function(n){this.pX=n.deltaX,this.pY=n.deltaY;var o=ni(n.direction);o&&(n.additionalEvent=this.options.event+o),this._super.emit.call(this,n)}});function un(){Q.apply(this,arguments)}G(un,Q,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Tt]},attrTest:function(n){return this._super.attrTest.call(this,n)&&(Math.abs(n.scale-1)>this.options.threshold||this.state&K)},emit:function(n){if(n.scale!==1){var o=n.scale<1?"in":"out";n.additionalEvent=this.options.event+o}this._super.emit.call(this,n)}});function pn(){lt.apply(this,arguments),this._timer=null,this._input=null}G(pn,lt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[ti]},process:function(n){var o=this.options,s=n.pointers.length===o.pointers,c=n.distance<o.threshold,m=n.deltaTime>o.time;if(this._input=n,!c||!s||n.eventType&(M|$)&&!m)this.reset();else if(n.eventType&H)this.reset(),this._timer=F(function(){this.state=ct,this.tryEmit()},o.time,this);else if(n.eventType&M)return ct;return nt},reset:function(){clearTimeout(this._timer)},emit:function(n){this.state===ct&&(n&&n.eventType&M?this.manager.emit(this.options.event+"up",n):(this._input.timeStamp=C(),this.manager.emit(this.options.event,this._input)))}});function bn(){Q.apply(this,arguments)}G(bn,Q,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Tt]},attrTest:function(n){return this._super.attrTest.call(this,n)&&(Math.abs(n.rotation)>this.options.threshold||this.state&K)}});function fn(){Q.apply(this,arguments)}G(fn,Q,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:et|Et,pointers:1},getTouchAction:function(){return Ce.prototype.getTouchAction.call(this)},attrTest:function(n){var o=this.options.direction,s;return o&(et|Et)?s=n.overallVelocity:o&et?s=n.overallVelocityX:o&Et&&(s=n.overallVelocityY),this._super.attrTest.call(this,n)&&o&n.offsetDirection&&n.distance>this.options.threshold&&n.maxPointers==this.options.pointers&&h(s)>this.options.velocity&&n.eventType&M},emit:function(n){var o=ni(n.offsetDirection);o&&this.manager.emit(this.options.event+o,n),this.manager.emit(this.options.event,n)}});function xe(){lt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}G(xe,lt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[dn]},process:function(n){var o=this.options,s=n.pointers.length===o.pointers,c=n.distance<o.threshold,m=n.deltaTime<o.time;if(this.reset(),n.eventType&H&&this.count===0)return this.failTimeout();if(c&&m&&s){if(n.eventType!=M)return this.failTimeout();var p=this.pTime?n.timeStamp-this.pTime<o.interval:!0,v=!this.pCenter||fe(this.pCenter,n.center)<o.posThreshold;this.pTime=n.timeStamp,this.pCenter=n.center,!v||!p?this.count=1:this.count+=1,this._input=n;var A=this.count%o.taps;if(A===0)return this.hasRequireFailures()?(this._timer=F(function(){this.state=ct,this.tryEmit()},o.interval,this),K):ct}return nt},failTimeout:function(){return this._timer=F(function(){this.state=nt},this.options.interval,this),nt},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==ct&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function dt(n,o){return o=o||{},o.recognizers=Pn(o.recognizers,dt.defaults.preset),new hn(n,o)}dt.VERSION="2.0.7",dt.defaults={domEvents:!1,touchAction:Jn,enable:!0,inputTarget:null,inputClass:null,preset:[[bn,{enable:!1}],[un,{enable:!1},["rotate"]],[fn,{direction:et}],[Ce,{direction:et},["swipe"]],[xe],[xe,{event:"doubletap",taps:2},["tap"]],[pn]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var io=1,ii=2;function hn(n,o){this.options=T({},dt.defaults,o||{}),this.options.inputTarget=this.options.inputTarget||n,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=n,this.input=Da(this),this.touchAction=new mn(this,this.options.touchAction),ai(this,!0),_(this.options.recognizers,function(s){var c=this.add(new s[0](s[1]));s[2]&&c.recognizeWith(s[2]),s[3]&&c.requireFailure(s[3])},this)}hn.prototype={set:function(n){return T(this.options,n),n.touchAction&&this.touchAction.update(),n.inputTarget&&(this.input.destroy(),this.input.target=n.inputTarget,this.input.init()),this},stop:function(n){this.session.stopped=n?ii:io},recognize:function(n){var o=this.session;if(!o.stopped){this.touchAction.preventDefaults(n);var s,c=this.recognizers,m=o.curRecognizer;(!m||m&&m.state&ct)&&(m=o.curRecognizer=null);for(var p=0;p<c.length;)s=c[p],o.stopped!==ii&&(!m||s==m||s.canRecognizeWith(m))?s.recognize(n):s.reset(),!m&&s.state&(K|Rt|ut)&&(m=o.curRecognizer=s),p++}},get:function(n){if(n instanceof lt)return n;for(var o=this.recognizers,s=0;s<o.length;s++)if(o[s].options.event==n)return o[s];return null},add:function(n){if(W(n,"add",this))return this;var o=this.get(n.options.event);return o&&this.remove(o),this.recognizers.push(n),n.manager=this,this.touchAction.update(),n},remove:function(n){if(W(n,"remove",this))return this;if(n=this.get(n),n){var o=this.recognizers,s=Ot(o,n);s!==-1&&(o.splice(s,1),this.touchAction.update())}return this},on:function(n,o){if(n!==a&&o!==a){var s=this.handlers;return _(de(n),function(c){s[c]=s[c]||[],s[c].push(o)}),this}},off:function(n,o){if(n!==a){var s=this.handlers;return _(de(n),function(c){o?s[c]&&s[c].splice(Ot(s[c],o),1):delete s[c]}),this}},emit:function(n,o){this.options.domEvents&&ao(n,o);var s=this.handlers[n]&&this.handlers[n].slice();if(!(!s||!s.length)){o.type=n,o.preventDefault=function(){o.srcEvent.preventDefault()};for(var c=0;c<s.length;)s[c](o),c++}},destroy:function(){this.element&&ai(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function ai(n,o){var s=n.element;if(s.style){var c;_(n.options.cssProps,function(m,p){c=ue(s.style,p),o?(n.oldCssProps[c]=s.style[c],s.style[c]=m):s.style[c]=n.oldCssProps[c]||""}),o||(n.oldCssProps={})}}function ao(n,o){var s=i.createEvent("Event");s.initEvent(n,!0,!0),s.gesture=o,o.target.dispatchEvent(s)}T(dt,{INPUT_START:H,INPUT_MOVE:wt,INPUT_END:M,INPUT_CANCEL:$,STATE_POSSIBLE:_e,STATE_BEGAN:K,STATE_CHANGED:Rt,STATE_ENDED:ut,STATE_RECOGNIZED:ct,STATE_CANCELLED:Qt,STATE_FAILED:nt,DIRECTION_NONE:pe,DIRECTION_LEFT:Wt,DIRECTION_RIGHT:$t,DIRECTION_UP:Gt,DIRECTION_DOWN:Xt,DIRECTION_HORIZONTAL:et,DIRECTION_VERTICAL:Et,DIRECTION_ALL:Vn,Manager:hn,Input:X,TouchAction:mn,TouchInput:ge,MouseInput:he,PointerEventInput:cn,TouchMouseInput:ln,SingleTouchInput:Xn,Recognizer:lt,AttrRecognizer:Q,Tap:xe,Pan:Ce,Swipe:fn,Pinch:un,Rotate:bn,Press:pn,on:ce,off:le,each:_,merge:Ea,extend:st,assign:T,inherit:G,bindFn:an,prefixed:ue});var oo=typeof t<"u"?t:typeof self<"u"?self:{};oo.Hammer=dt,typeof define=="function"&&define.amd?define(function(){return dt}):typeof nn<"u"&&nn.exports?nn.exports=dt:t[e]=dt})(window,document,"Hammer")});var En="Service workers are disabled or not supported by this browser",Ut=class{serviceWorker;worker;registration;events;constructor(i,e){if(this.serviceWorker=i,!i)this.worker=this.events=this.registration=new Dt(a=>a.error(new mt(5601,!1)));else{let a=null,r=new Nt;this.worker=new Dt(C=>(a!==null&&C.next(a),r.subscribe(F=>C.next(F))));let l=()=>{let{controller:C}=i;C!==null&&(a=C,r.next(a))};i.addEventListener("controllerchange",l),l(),this.registration=this.worker.pipe(Jt(()=>i.getRegistration().then(C=>{if(!C)throw new mt(5601,!1);return C})));let d=new Nt;this.events=d.asObservable();let u=C=>{let{data:F}=C;F?.type&&d.next(F)};i.addEventListener("message",u),e?.get(vn,null,{optional:!0})?.onDestroy(()=>{i.removeEventListener("controllerchange",l),i.removeEventListener("message",u)})}}postMessage(i,e){return new Promise(a=>{this.worker.pipe(bt(1)).subscribe(r=>{r.postMessage(oi({action:i},e)),a()})})}postMessageWithOperation(i,e,a){let r=this.waitForOperationCompleted(a),l=this.postMessage(i,e);return Promise.all([l,r]).then(([,d])=>d)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(i){let e;return typeof i=="string"?e=a=>a.type===i:e=a=>i.includes(a.type),this.events.pipe(Zt(e))}nextEventOfType(i){return this.eventsOfType(i).pipe(bt(1))}waitForOperationCompleted(i){return new Promise((e,a)=>{this.eventsOfType("OPERATION_COMPLETED").pipe(Zt(r=>r.nonce===i),bt(1),at(r=>{if(r.result!==void 0)return r.result;throw new Error(r.error)})).subscribe({next:e,error:a})})}get isEnabled(){return!!this.serviceWorker}},co=(()=>{class t{sw;messages;notificationClicks;notificationCloses;pushSubscriptionChanges;subscription;get isEnabled(){return this.sw.isEnabled}pushManager=null;subscriptionChanges=new Nt;constructor(e){if(this.sw=e,!e.isEnabled){this.messages=pt,this.notificationClicks=pt,this.notificationCloses=pt,this.pushSubscriptionChanges=pt,this.subscription=pt;return}this.messages=this.sw.eventsOfType("PUSH").pipe(at(r=>r.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(at(r=>r.data)),this.notificationCloses=this.sw.eventsOfType("NOTIFICATION_CLOSE").pipe(at(r=>r.data)),this.pushSubscriptionChanges=this.sw.eventsOfType("PUSH_SUBSCRIPTION_CHANGE").pipe(at(r=>r.data)),this.pushManager=this.sw.registration.pipe(at(r=>r.pushManager));let a=this.pushManager.pipe(Jt(r=>r.getSubscription()));this.subscription=new Dt(r=>{let l=a.subscribe(r),d=this.subscriptionChanges.subscribe(r);return()=>{l.unsubscribe(),d.unsubscribe()}})}requestSubscription(e){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(En));let a={userVisibleOnly:!0},r=this.decodeBase64(e.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),l=new Uint8Array(new ArrayBuffer(r.length));for(let d=0;d<r.length;d++)l[d]=r.charCodeAt(d);return a.applicationServerKey=l,new Promise((d,u)=>{this.pushManager.pipe(Jt(h=>h.subscribe(a)),bt(1)).subscribe({next:h=>{this.subscriptionChanges.next(h),d(h)},error:u})})}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(En));let e=a=>{if(a===null)throw new mt(5602,!1);return a.unsubscribe().then(r=>{if(!r)throw new mt(5603,!1);this.subscriptionChanges.next(null)})};return new Promise((a,r)=>{this.subscription.pipe(bt(1),Jt(e)).subscribe({next:a,error:r})})}decodeBase64(e){return atob(e)}static \u0275fac=function(a){return new(a||t)(te(Ut))};static \u0275prov=O({token:t,factory:t.\u0275fac})}return t})(),lo=(()=>{class t{sw;versionUpdates;unrecoverable;get isEnabled(){return this.sw.isEnabled}ongoingCheckForUpdate=null;constructor(e){if(this.sw=e,!e.isEnabled){this.versionUpdates=pt,this.unrecoverable=pt;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED","VERSION_FAILED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(En));if(this.ongoingCheckForUpdate)return this.ongoingCheckForUpdate;let e=this.sw.generateNonce();return this.ongoingCheckForUpdate=this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:e},e).finally(()=>{this.ongoingCheckForUpdate=null}),this.ongoingCheckForUpdate}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new mt(5601,!1));let e=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:e},e)}static \u0275fac=function(a){return new(a||t)(te(Ut))};static \u0275prov=O({token:t,factory:t.\u0275fac})}return t})();var qi=new Pt("");function mo(){let t=k(ae);if(!("serviceWorker"in navigator&&t.enabled!==!1))return;let i=k(qi),e=k(It),a=k(vn);e.runOutsideAngular(()=>{let r=navigator.serviceWorker,l=()=>r.controller?.postMessage({action:"INITIALIZE"});r.addEventListener("controllerchange",l),a.onDestroy(()=>{r.removeEventListener("controllerchange",l)})}),e.runOutsideAngular(()=>{let r,{registrationStrategy:l}=t;if(typeof l=="function")r=new Promise(d=>l().subscribe(()=>d()));else{let[d,...u]=(l||"registerWhenStable:30000").split(":");switch(d){case"registerImmediately":r=Promise.resolve();break;case"registerWithDelay":r=Ki(+u[0]||0);break;case"registerWhenStable":r=Promise.race([a.whenStable(),Ki(+u[0])]);break;default:throw new mt(5600,!1)}}r.then(()=>{a.destroyed||navigator.serviceWorker.register(i,{scope:t.scope,updateViaCache:t.updateViaCache,type:t.type}).catch(d=>console.error(pi(5604,!1)))})})}function Ki(t){return new Promise(i=>setTimeout(i,t))}function uo(t,i){return new Ut(t.enabled!==!1?navigator.serviceWorker:void 0,i)}var ae=class{enabled;updateViaCache;type;scope;registrationStrategy};function Qi(t,i={}){return Ee([co,lo,{provide:qi,useValue:t},{provide:ae,useValue:i},{provide:Ut,useFactory:uo,deps:[ae,ee]},wi(mo)])}var Pe=class t{constructor(i){this.el=i}swipe=new Z;swipeMove=new Z;swipeStart=new Z;swipeEnd=new Z;startX=0;startY=0;hasEmittedSwipe=!1;ngOnInit(){this.el.nativeElement.addEventListener("touchstart",i=>{i.touches.length===1&&(this.startX=i.touches[0].clientX,this.startY=i.touches[0].clientY,this.hasEmittedSwipe=!1,this.swipeStart.emit({x:this.startX,y:this.startY}))}),this.el.nativeElement.addEventListener("touchmove",i=>{if(i.touches.length===1&&!this.hasEmittedSwipe){let e=i.touches[0].clientX,a=i.touches[0].clientY,r=e-this.startX,l=a-this.startY;this.swipeMove.emit({x:e,y:a,deltaX:r,deltaY:l})}}),this.el.nativeElement.addEventListener("touchend",i=>{let e=i.changedTouches[0].clientX,a=i.changedTouches[0].clientY,r=e-this.startX,l=a-this.startY;this.swipeEnd.emit({x:e,y:a}),!this.hasEmittedSwipe&&Math.abs(r)>Math.abs(l)&&Math.abs(r)>50&&Math.abs(l)<100&&(r>0?this.swipe.emit("right"):this.swipe.emit("left"),this.hasEmittedSwipe=!0)}),this.el.nativeElement.addEventListener("mousedown",i=>{this.startX=i.clientX,this.startY=i.clientY,this.hasEmittedSwipe=!1,this.swipeStart.emit({x:this.startX,y:this.startY});let e=r=>{if(!this.hasEmittedSwipe){let l=r.clientX-this.startX,d=r.clientY-this.startY;this.swipeMove.emit({x:r.clientX,y:r.clientY,deltaX:l,deltaY:d})}};document.addEventListener("mousemove",e);let a=r=>{document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",a);let l=r.clientX-this.startX,d=r.clientY-this.startY;this.swipeEnd.emit({x:r.clientX,y:r.clientY}),!this.hasEmittedSwipe&&Math.abs(l)>Math.abs(d)&&Math.abs(l)>50&&Math.abs(d)<100&&(l>0?this.swipe.emit("right"):this.swipe.emit("left"),this.hasEmittedSwipe=!0)};document.addEventListener("mouseup",a,{once:!0})})}static \u0275fac=function(e){return new(e||t)(j(gn))};static \u0275dir=Lt({type:t,selectors:[["","appSwipe",""]],outputs:{swipe:"swipe",swipeMove:"swipeMove",swipeStart:"swipeStart",swipeEnd:"swipeEnd"}})};var po=["swipeContainer"],bo=["swipeContent"],fo=["*"],Le=class t{swipeEnabled=!0;onSwipeEvent=new Z;swipeContainer;swipeContent;isSwiping=!1;startTranslateX=0;containerWidth=0;ngAfterViewInit(){this.containerWidth=this.swipeContainer.nativeElement.clientWidth}swipeHandled=!1;onSwipe(i){this.swipeEnabled&&!this.swipeHandled&&(this.swipeHandled=!0,this.onSwipeEvent.emit(i),this.swipeContent&&(this.swipeContent.nativeElement.style.transition="transform 0.3s ease-out",setTimeout(()=>{this.swipeContent.nativeElement.style.transform="translateX(0)",setTimeout(()=>{this.swipeContent.nativeElement.style.transition=""},300)},10)))}onSwipeStart(i){if(this.swipeEnabled&&this.swipeContent){this.isSwiping=!0,this.swipeHandled=!1;let e=window.getComputedStyle(this.swipeContent.nativeElement),a=new DOMMatrixReadOnly(e.transform);this.startTranslateX=a.m41,this.swipeContent.nativeElement.style.transition="none"}}onSwipeMove(i){if(this.swipeEnabled&&this.isSwiping&&this.swipeContent){let e=this.startTranslateX+i.deltaX;this.swipeContent.nativeElement.style.transform=`translateX(${e}px)`}}onSwipeEnd(i){if(this.swipeEnabled&&this.isSwiping&&this.swipeContent){this.isSwiping=!1,this.swipeContent.nativeElement.style.transition="transform 0.3s ease-out";let e=window.getComputedStyle(this.swipeContent.nativeElement),r=new DOMMatrixReadOnly(e.transform).m41,l=this.containerWidth*.3;if(Math.abs(r)>l){let d=r>0?"right":"left",u=d==="left"?-this.containerWidth:this.containerWidth;this.swipeContent.nativeElement.style.transform=`translateX(${u}px)`,setTimeout(()=>{this.swipeHandled||(this.onSwipeEvent.emit(d),this.swipeHandled=!0),this.swipeContent.nativeElement.style.transform="translateX(0)",this.swipeContent.nativeElement.style.transition=""},300)}else this.swipeContent.nativeElement.style.transform="translateX(0)",this.swipeContent.nativeElement.style.transition="transform 0.3s ease-out"}setTimeout(()=>{this.swipeHandled=!1},350)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=S({type:t,selectors:[["app-swipe-container"]],viewQuery:function(e,a){if(e&1&&(jt(po,5),jt(bo,5)),e&2){let r;kt(r=Mt())&&(a.swipeContainer=r.first),kt(r=Mt())&&(a.swipeContent=r.first)}},inputs:{swipeEnabled:"swipeEnabled"},outputs:{onSwipeEvent:"onSwipeEvent"},ngContentSelectors:fo,decls:5,vars:0,consts:[["swipeContainer",""],["swipeContent",""],["appSwipe","",1,"swipe-container",3,"swipe","swipeMove","swipeStart","swipeEnd"],[1,"swipe-content"]],template:function(e,a){if(e&1){let r=J();Ft(),b(0,"div",2,0),L("swipe",function(d){return R(r),D(a.onSwipe(d))})("swipeMove",function(d){return R(r),D(a.onSwipeMove(d))})("swipeStart",function(d){return R(r),D(a.onSwipeStart(d))})("swipeEnd",function(d){return R(r),D(a.onSwipeEnd(d))}),b(2,"div",3,1),Bt(4),f()()}},dependencies:[Pe],styles:['.swipe-container[_ngcontent-%COMP%]{width:100%;height:100%;overflow-x:hidden;overflow-y:auto;-webkit-overflow-scrolling:touch;touch-action:pan-y;position:relative}.swipe-content[_ngcontent-%COMP%]{width:100%;height:100%;position:relative;transition:transform .3s ease-out}.swipe-container[_ngcontent-%COMP%]:active{transition:none}@media (max-width: 768px){.swipe-container[_ngcontent-%COMP%]{position:relative}.swipe-container[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;bottom:0;width:10px;background:linear-gradient(to right,rgba(0,0,0,.1),transparent);left:0;opacity:0;transition:opacity .2s;pointer-events:none;z-index:100}.swipe-container.swipe-left[_ngcontent-%COMP%]:before{opacity:1}.swipe-container[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;bottom:0;width:10px;background:linear-gradient(to left,rgba(0,0,0,.1),transparent);right:0;opacity:0;transition:opacity .2s;pointer-events:none;z-index:100}.swipe-container.swipe-right[_ngcontent-%COMP%]:after{opacity:1}}']})};var Fe=class t{constructor(i){this.router=i;this.updateIndexFromCurrentRoute(),this.router.events.pipe(Zt(e=>e instanceof Vi)).subscribe(e=>{this.updateIndexFromCurrentRoute()})}currentIndexSubject=new we(0);currentIndex$=this.currentIndexSubject.asObservable();navigationRoutes=["/dashboard","/add","/expenses","/budgets","/incomes"];updateIndexFromCurrentRoute(){let i=this.router.url,e=this.navigationRoutes.indexOf(i);e!==-1&&this.currentIndexSubject.next(e)}setCurrentIndex(i){i>=0&&i<this.navigationRoutes.length&&this.currentIndexSubject.next(i)}getCurrentIndex(){return this.currentIndexSubject.value}getCurrentRoute(){return this.navigationRoutes[this.currentIndexSubject.value]||"/dashboard"}getNextRoute(){let e=(this.currentIndexSubject.value+1)%this.navigationRoutes.length;return this.navigationRoutes[e]}getPreviousRoute(){let e=this.currentIndexSubject.value-1,a=e<0?this.navigationRoutes.length-1:e;return this.navigationRoutes[a]}getIndexForRoute(i){return this.navigationRoutes.indexOf(i)}getRoutesCount(){return this.navigationRoutes.length}getRouteAt(i){return i<0||i>=this.navigationRoutes.length?null:this.navigationRoutes[i]}static \u0275fac=function(e){return new(e||t)(te(Ht))};static \u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})};var je=class t{constructor(i,e){this.router=i;this.swipeService=e}subscription=new ri;ngOnInit(){this.subscription.add(this.swipeService.currentIndex$.subscribe(i=>{let e=this.swipeService.getRouteAt(i);e&&this.router.url!==e&&this.router.navigate([e],{replaceUrl:!0})}))}ngOnDestroy(){this.subscription.unsubscribe()}handleSwipe(i){let e=null;if(i==="left"?e=this.swipeService.getNextRoute():i==="right"&&(e=this.swipeService.getPreviousRoute()),e&&this.router.url!==e){let a=this.swipeService.getIndexForRoute(e);a!==-1&&(this.swipeService.setCurrentIndex(a),this.router.navigate([e],{queryParamsHandling:"preserve",replaceUrl:!0}))}}static \u0275fac=function(e){return new(e||t)(j(Ht),j(Fe))};static \u0275cmp=S({type:t,selectors:[["app-swipe-layout"]],decls:3,vars:0,consts:[[1,"swipe-layout-container",3,"onSwipeEvent"],[1,"layout-content"]],template:function(e,a){e&1&&(b(0,"app-swipe-container",0),L("onSwipeEvent",function(l){return a.handleSwipe(l)}),b(1,"div",1),x(2,"router-outlet"),f()())},dependencies:[Le,Me],styles:[".swipe-layout-container[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;overflow:hidden;position:relative}.layout-content[_ngcontent-%COMP%]{flex:1;overflow-y:auto;-webkit-overflow-scrolling:touch;position:relative;transition:all .3s ease}.layout-content[_ngcontent-%COMP%]    >*{animation:_ngcontent-%COMP%_fadeIn .3s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:.8;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}"]})};var Zi=[{path:"",redirectTo:"dashboard",pathMatch:"full"},{path:"welcome",loadComponent:()=>import("./chunk-AVWC6YQ7.js").then(t=>t.WelcomeComponent)},{path:"",component:je,children:[{path:"dashboard",loadComponent:()=>import("./chunk-3ABI4HZT.js").then(t=>t.DashboardComponent)},{path:"add",loadComponent:()=>import("./chunk-Z2WXPDHT.js").then(t=>t.AddExpense)},{path:"expenses",loadComponent:()=>import("./chunk-RTZTBCLG.js").then(t=>t.ExpensesList)},{path:"budgets",loadComponent:()=>import("./chunk-TXJ7A2XZ.js").then(t=>t.BudgetsComponent)},{path:"incomes",loadComponent:()=>import("./chunk-RUGEGH3Q.js").then(t=>t.IncomeListComponent)}]},{path:"set-income",loadComponent:()=>import("./chunk-YLDFLW5T.js").then(t=>t.SetMonthlyIncomeComponent)},{path:"profile",loadComponent:()=>import("./chunk-MXQ325W4.js").then(t=>t.UserProfileComponent)}];var go="@",vo=(()=>{class t{doc;delegate;zone;animationType;moduleImpl;_rendererFactoryPromise=null;scheduler=null;injector=k(ee);loadingSchedulerFn=k(_o,{optional:!0});_engine;constructor(e,a,r,l,d){this.doc=e,this.delegate=a,this.zone=r,this.animationType=l,this.moduleImpl=d}ngOnDestroy(){this._engine?.flush()}loadImpl(){let e=()=>this.moduleImpl??import("./chunk-OTZDUOZO.js").then(r=>r),a;return this.loadingSchedulerFn?a=this.loadingSchedulerFn(e):a=e(),a.catch(r=>{throw new mt(5300,!1)}).then(({\u0275createEngine:r,\u0275AnimationRendererFactory:l})=>{this._engine=r(this.animationType,this.doc);let d=new l(this.delegate,this._engine,this.zone);return this.delegate=d,d})}createRenderer(e,a){let r=this.delegate.createRenderer(e,a);if(r.\u0275type===0)return r;typeof r.throwOnSyntheticProps=="boolean"&&(r.throwOnSyntheticProps=!1);let l=new Tn(r);return a?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(d=>{let u=d.createRenderer(e,a);l.use(u),this.scheduler??=this.injector.get(hi,null,{optional:!0}),this.scheduler?.notify(10)}).catch(d=>{l.use(r)}),l}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}componentReplaced(e){this._engine?.flush(),this.delegate.componentReplaced?.(e)}static \u0275fac=function(a){Ci()};static \u0275prov=O({token:t,factory:t.\u0275fac})}return t})(),Tn=class{delegate;replay=[];\u0275type=1;constructor(i){this.delegate=i}use(i){if(this.delegate=i,this.replay!==null){for(let e of this.replay)e(i);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(i,e){return this.delegate.createElement(i,e)}createComment(i){return this.delegate.createComment(i)}createText(i){return this.delegate.createText(i)}get destroyNode(){return this.delegate.destroyNode}appendChild(i,e){this.delegate.appendChild(i,e)}insertBefore(i,e,a,r){this.delegate.insertBefore(i,e,a,r)}removeChild(i,e,a){this.delegate.removeChild(i,e,a)}selectRootElement(i,e){return this.delegate.selectRootElement(i,e)}parentNode(i){return this.delegate.parentNode(i)}nextSibling(i){return this.delegate.nextSibling(i)}setAttribute(i,e,a,r){this.delegate.setAttribute(i,e,a,r)}removeAttribute(i,e,a){this.delegate.removeAttribute(i,e,a)}addClass(i,e){this.delegate.addClass(i,e)}removeClass(i,e){this.delegate.removeClass(i,e)}setStyle(i,e,a,r){this.delegate.setStyle(i,e,a,r)}removeStyle(i,e,a){this.delegate.removeStyle(i,e,a)}setProperty(i,e,a){this.shouldReplay(e)&&this.replay.push(r=>r.setProperty(i,e,a)),this.delegate.setProperty(i,e,a)}setValue(i,e){this.delegate.setValue(i,e)}listen(i,e,a,r){return this.shouldReplay(e)&&this.replay.push(l=>l.listen(i,e,a,r)),this.delegate.listen(i,e,a,r)}shouldReplay(i){return this.replay!==null&&i.startsWith(go)}},_o=new Pt("");function Ji(t="animations"){return xi("NgAsyncAnimations"),Ee([{provide:yi,useFactory:(i,e,a)=>new vo(i,e,a,t),deps:[Te,Bi,It]},{provide:vi,useValue:t==="noop"?"NoopAnimations":"BrowserAnimations"}])}var ta={providers:[Si(),Hi(Zi,Ui()),Qi("ngsw-worker.js",{enabled:!Ai(),registrationStrategy:"registerWhenStable:30000"}),Ji(),bi()]};function Co(t,i){t&1&&x(0,"i",11)}function xo(t,i){t&1&&x(0,"i",12)}function wo(t,i){t&1&&x(0,"i",13)}function Eo(t,i){t&1&&x(0,"i",14)}function To(t,i){if(t&1){let e=J();b(0,"div",2)(1,"div",3)(2,"span",4),z(3,Co,1,0,"i",5)(4,xo,1,0,"i",6)(5,wo,1,0,"i",7)(6,Eo,1,0,"i",8),f(),b(7,"span",9),w(8),f(),b(9,"button",10),L("click",function(){let r=R(e).$implicit,l=ot();return D(l.removeToast(r.id))}),f()()()}if(t&2){let e=i.$implicit;y("ngClass","toast-"+e.type)("@toastAnimation",void 0),g(2),y("ngSwitch",e.type),g(),y("ngSwitchCase","success"),g(),y("ngSwitchCase","error"),g(),y("ngSwitchCase","warning"),g(),y("ngSwitchCase","info"),g(2),tt(e.message)}}var Ve=class t{constructor(i){this.toastService=i}removeToast(i){this.toastService.remove(i)}trackById(i,e){return e.id}static \u0275fac=function(e){return new(e||t)(j(Re))};static \u0275cmp=S({type:t,selectors:[["app-toast"]],decls:3,vars:4,consts:[[1,"toast-container","position-fixed","top-0","end-0","p-3",2,"z-index","1090"],["class","toast align-items-center mb-2","role","alert","aria-live","assertive","aria-atomic","true","style","min-width: 300px; max-width: 400px; display: block;",3,"ngClass",4,"ngFor","ngForOf","ngForTrackBy"],["role","alert","aria-live","assertive","aria-atomic","true",1,"toast","align-items-center","mb-2",2,"min-width","300px","max-width","400px","display","block",3,"ngClass"],[1,"toast-body","d-flex","align-items-center"],[1,"me-2",3,"ngSwitch"],["class","bi bi-check-circle-fill text-success fs-5",4,"ngSwitchCase"],["class","bi bi-x-circle-fill text-danger fs-5",4,"ngSwitchCase"],["class","bi bi-exclamation-triangle-fill text-warning fs-5",4,"ngSwitchCase"],["class","bi bi-info-circle-fill text-info fs-5",4,"ngSwitchCase"],[1,"flex-grow-1"],["type","button","aria-label","Close",1,"btn-close","ms-2",3,"click"],[1,"bi","bi-check-circle-fill","text-success","fs-5"],[1,"bi","bi-x-circle-fill","text-danger","fs-5"],[1,"bi","bi-exclamation-triangle-fill","text-warning","fs-5"],[1,"bi","bi-info-circle-fill","text-info","fs-5"]],template:function(e,a){e&1&&(b(0,"div",0),z(1,To,10,8,"div",1),Vt(2,"async"),f()),e&2&&(g(),y("ngForOf",ke(2,2,a.toastService.toasts$))("ngForTrackBy",a.trackById))},dependencies:[q,ht,gt,Ri,Di,Ni],styles:[".toast-container[_ngcontent-%COMP%]{z-index:1090}.toast-container[_ngcontent-%COMP%]   .toast[_ngcontent-%COMP%]{border:none;box-shadow:0 .5rem 1rem #00000026;border-radius:.5rem;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.toast-container[_ngcontent-%COMP%]   .toast.toast-success[_ngcontent-%COMP%]{background-color:#198754e6;color:#fff}.toast-container[_ngcontent-%COMP%]   .toast.toast-error[_ngcontent-%COMP%]{background-color:#dc3545e6;color:#fff}.toast-container[_ngcontent-%COMP%]   .toast.toast-warning[_ngcontent-%COMP%]{background-color:#ffc107e6;color:#212529}.toast-container[_ngcontent-%COMP%]   .toast.toast-info[_ngcontent-%COMP%]{background-color:#0d6efde6;color:#fff}.toast-container[_ngcontent-%COMP%]   .toast[_ngcontent-%COMP%]   .toast-body[_ngcontent-%COMP%]{padding:.75rem 1rem}"],data:{animation:[wn("toastAnimation",[Ne(":enter",[ie({transform:"translateX(100%)",opacity:0}),De("300ms ease-out",ie({transform:"translateX(0)",opacity:1}))]),Ne(":leave",[De("300ms ease-in",ie({transform:"translateX(100%)",opacity:0}))])])]}})};var In;try{In=typeof Intl<"u"&&Intl.v8BreakIterator}catch{In=!1}var Ue=(()=>{class t{_platformId=k(gi);isBrowser=this._platformId?Fi(this._platformId):typeof document=="object"&&!!document;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!!(window.chrome||In)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(){}static \u0275fac=function(a){return new(a||t)};static \u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function kn(t){return Array.isArray(t)?t:[t]}var ea=new Set,At,Io=(()=>{class t{_platform=k(Ue);_nonce=k(_i,{optional:!0});_matchMedia;constructor(){this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Mo}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&ko(e,this._nonce),this._matchMedia(e)}static \u0275fac=function(a){return new(a||t)};static \u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function ko(t,i){if(!ea.has(t))try{At||(At=document.createElement("style"),i&&At.setAttribute("nonce",i),At.setAttribute("type","text/css"),document.head.appendChild(At)),At.sheet&&(At.sheet.insertRule(`@media ${t} {body{ }}`,0),ea.add(t))}catch(e){console.error(e)}}function Mo(t){return{matches:t==="all"||t==="",media:t,addListener:()=>{},removeListener:()=>{}}}var ia=(()=>{class t{_mediaMatcher=k(Io);_zone=k(It);_queries=new Map;_destroySubject=new Nt;constructor(){}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return na(kn(e)).some(r=>this._registerQuery(r).mql.matches)}observe(e){let r=na(kn(e)).map(d=>this._registerQuery(d).observable),l=si(r);return l=ci(l.pipe(bt(1)),l.pipe(di(1),li(0))),l.pipe(at(d=>{let u={matches:!1,breakpoints:{}};return d.forEach(({matches:h,query:C})=>{u.matches=u.matches||h,u.breakpoints[C]=h}),u}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);let a=this._mediaMatcher.matchMedia(e),l={observable:new Dt(d=>{let u=h=>this._zone.run(()=>d.next(h));return a.addListener(u),()=>{a.removeListener(u)}}).pipe(mi(a),at(({matches:d})=>({query:e,matches:d})),ui(this._destroySubject)),mql:a};return this._queries.set(e,l),l}static \u0275fac=function(a){return new(a||t)};static \u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function na(t){return t.map(i=>i.split(",")).reduce((i,e)=>i.concat(e)).map(i=>i.trim())}var _t=(function(t){return t[t.NONE=0]="NONE",t[t.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",t[t.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",t})(_t||{}),aa="cdk-high-contrast-black-on-white",oa="cdk-high-contrast-white-on-black",Mn="cdk-high-contrast-active",Sn=(()=>{class t{_platform=k(Ue);_hasCheckedHighContrastMode;_document=k(Te);_breakpointSubscription;constructor(){this._breakpointSubscription=k(ia).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return _t.NONE;let e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);let a=this._document.defaultView||window,r=a&&a.getComputedStyle?a.getComputedStyle(e):null,l=(r&&r.backgroundColor||"").replace(/ /g,"");switch(e.remove(),l){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return _t.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return _t.BLACK_ON_WHITE}return _t.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let e=this._document.body.classList;e.remove(Mn,aa,oa),this._hasCheckedHighContrastMode=!0;let a=this.getHighContrastMode();a===_t.BLACK_ON_WHITE?e.add(Mn,aa):a===_t.WHITE_ON_BLACK&&e.add(Mn,oa)}}static \u0275fac=function(a){return new(a||t)};static \u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var An=(()=>{class t{static \u0275fac=function(a){return new(a||t)};static \u0275mod=V({type:t});static \u0275inj=B({})}return t})();var Y=(()=>{class t{constructor(){k(Sn)._applyBodyHighContrastModeCssClasses()}static \u0275fac=function(a){return new(a||t)};static \u0275mod=V({type:t});static \u0275inj=B({imports:[An,An]})}return t})();var ca=(()=>{class t{static \u0275fac=function(a){return new(a||t)};static \u0275mod=V({type:t});static \u0275inj=B({imports:[Y,Y]})}return t})();var Do=()=>({exact:!0});function No(t,i){t&1&&x(0,"div",14)}function Po(t,i){if(t&1&&(b(0,"a",11,0),x(2,"i",12),b(3,"span"),w(4),f(),z(5,No,1,0,"div",13),f()),t&2){let e=i.$implicit,a=ne(1);y("routerLink",e.path)("routerLinkActiveOptions",Ie(5,Do)),g(2),y("ngClass","bi me-2 "+(a.isActive?e.activeIcon:e.icon)),g(2),tt(e.label||(e.path==="/dashboard"?"Dashboard":e.path==="/expenses"?"Expenses":"Settings")),g(),y("ngIf",a.isActive)}}var ze=class t{links=[];selectedIndex=0;static \u0275fac=function(e){return new(e||t)};static \u0275cmp=S({type:t,selectors:[["app-desktop-nav"]],inputs:{links:"links",selectedIndex:"selectedIndex"},decls:11,vars:1,consts:[["rla","routerLinkActive"],[1,"desktop-nav-container","glass-nav"],[1,"container-fluid","d-flex","align-items-center","h-100"],[1,"brand","me-5"],[1,"mb-0","fw-bold","text-gradient"],[1,"d-flex","gap-4"],["routerLinkActive","active","class","nav-link-item",3,"routerLink","routerLinkActiveOptions",4,"ngFor","ngForOf"],[1,"ms-auto","d-flex","align-items-center","gap-3"],[1,"user-profile","d-flex","align-items-center","gap-2"],[1,"avatar","bg-primary-gradient","text-white","rounded-circle","d-flex","align-items-center","justify-content-center",2,"width","32px","height","32px"],[1,"bi","bi-person-fill"],["routerLinkActive","active",1,"nav-link-item",3,"routerLink","routerLinkActiveOptions"],[3,"ngClass"],["class","active-indicator",4,"ngIf"],[1,"active-indicator"]],template:function(e,a){e&1&&(b(0,"div",1)(1,"div",2)(2,"div",3)(3,"h4",4),w(4,"ExpTracker"),f()(),b(5,"nav",5),z(6,Po,6,6,"a",6),f(),b(7,"div",7)(8,"div",8)(9,"div",9),x(10,"i",10),f()()()()()),e&2&&(g(6),y("ngForOf",a.links))},dependencies:[q,ht,gt,vt,Oe,Se,Ae,ca],styles:["[_nghost-%COMP%]{display:block;position:fixed;top:0;left:0;right:0;z-index:1000}.desktop-nav-container[_ngcontent-%COMP%]{height:60px;background:#0f172ad9;backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px);border-bottom:1px solid rgba(255,255,255,.1)}.nav-link-item[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;color:var(--text-secondary);text-decoration:none;font-weight:500;padding:0 8px;height:60px;transition:color .2s}.nav-link-item[_ngcontent-%COMP%]:hover{color:#fff}.nav-link-item.active[_ngcontent-%COMP%]{color:var(--text-accent)}.nav-link-item.active[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{background:var(--accent-gradient);-webkit-background-clip:text;-webkit-text-fill-color:transparent}.active-indicator[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;right:0;height:3px;background:var(--accent-gradient);border-top-left-radius:3px;border-top-right-radius:3px;box-shadow:0 -2px 8px #6366f180}.text-gradient[_ngcontent-%COMP%]{background:var(--accent-gradient);-webkit-background-clip:text;-webkit-text-fill-color:transparent}.bg-primary-gradient[_ngcontent-%COMP%]{background:var(--accent-gradient)}"]})};var la=(()=>{class t{static \u0275fac=function(a){return new(a||t)};static \u0275mod=V({type:t});static \u0275inj=B({imports:[Y,Y]})}return t})();var da=(()=>{class t{static \u0275fac=function(a){return new(a||t)};static \u0275mod=V({type:t});static \u0275inj=B({imports:[Y,Y]})}return t})();var ma=(()=>{class t{static \u0275fac=function(a){return new(a||t)};static \u0275mod=V({type:t});static \u0275inj=B({imports:[Y,Y]})}return t})();var ua=(()=>{class t{static \u0275fac=function(a){return new(a||t)};static \u0275mod=V({type:t});static \u0275inj=B({imports:[Y,ma,Y]})}return t})();var Lo=()=>({exact:!0});function Fo(t,i){t&1&&x(0,"div",7)}function Bo(t,i){if(t&1&&(b(0,"div",3,0)(2,"div",4),x(3,"i",5),f(),z(4,Fo,1,0,"div",6),f()),t&2){let e=i.$implicit,a=ne(1);y("routerLink",e.path)("routerLinkActiveOptions",Ie(4,Lo)),g(3),y("ngClass","bi "+(a.isActive?e.activeIcon:e.icon)),g(),y("ngIf",a.isActive)}}var Ye=class t{links=[];static \u0275fac=function(e){return new(e||t)};static \u0275cmp=S({type:t,selectors:[["app-mobile-nav"]],inputs:{links:"links"},decls:2,vars:1,consts:[["rla","routerLinkActive"],[1,"mobile-nav-container","glass-nav"],["class","nav-item","routerLinkActive","active",3,"routerLink","routerLinkActiveOptions",4,"ngFor","ngForOf"],["routerLinkActive","active",1,"nav-item",3,"routerLink","routerLinkActiveOptions"],[1,"icon-container"],[3,"ngClass"],["class","active-indicator",4,"ngIf"],[1,"active-indicator"]],template:function(e,a){e&1&&(b(0,"div",1),z(1,Bo,5,5,"div",2),f()),e&2&&(g(),y("ngForOf",a.links))},dependencies:[q,ht,gt,vt,Oe,Se,Ae,la,da,ua],styles:["[_nghost-%COMP%]{position:fixed;bottom:0;left:0;right:0;z-index:1000;padding-bottom:env(safe-area-inset-bottom)}.mobile-nav-container[_ngcontent-%COMP%]{height:64px;display:flex;justify-content:space-around;align-items:center;background:#0f172ad9;backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px);border-top:1px solid rgba(255,255,255,.1);padding:0 16px}.nav-item[_ngcontent-%COMP%]{position:relative;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;flex:1;cursor:pointer;color:var(--text-secondary);transition:all .3s ease}.nav-item[_ngcontent-%COMP%]   .icon-container[_ngcontent-%COMP%]{font-size:1.5rem;transition:transform .2s}.nav-item.active[_ngcontent-%COMP%]{color:var(--text-accent)}.nav-item.active[_ngcontent-%COMP%]   .icon-container[_ngcontent-%COMP%]{transform:translateY(-4px);background:var(--accent-gradient);-webkit-background-clip:text;-webkit-text-fill-color:transparent}.nav-item[_ngcontent-%COMP%]:active{transform:scale(.95)}.active-indicator[_ngcontent-%COMP%]{position:absolute;bottom:0;width:20px;height:3px;background:var(--accent-gradient);border-top-left-radius:3px;border-top-right-radius:3px;box-shadow:0 -2px 8px #6366f180}"]})};var pa=["user","model","function","system"];var We=(function(t){return t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.OTHER="OTHER",t})(We||{});var N=class extends Error{constructor(i){super(`[GoogleGenerativeAI Error]: ${i}`)}},yt=class extends N{constructor(i,e){super(i),this.response=e}},Ge=class extends N{constructor(i,e,a,r){super(i),this.status=e,this.statusText=a,this.errorDetails=r}},rt=class extends N{},Xe=class extends N{};var jo="https://generativelanguage.googleapis.com",Vo="v1beta",Ho="0.24.1",Uo="genai-js",zt=(function(t){return t.GENERATE_CONTENT="generateContent",t.STREAM_GENERATE_CONTENT="streamGenerateContent",t.COUNT_TOKENS="countTokens",t.EMBED_CONTENT="embedContent",t.BATCH_EMBED_CONTENTS="batchEmbedContents",t})(zt||{}),On=class{constructor(i,e,a,r,l){this.model=i,this.task=e,this.apiKey=a,this.stream=r,this.requestOptions=l}toString(){var i,e;let a=((i=this.requestOptions)===null||i===void 0?void 0:i.apiVersion)||Vo,l=`${((e=this.requestOptions)===null||e===void 0?void 0:e.baseUrl)||jo}/${a}/${this.model}:${this.task}`;return this.stream&&(l+="?alt=sse"),l}};function zo(t){let i=[];return t?.apiClient&&i.push(t.apiClient),i.push(`${Uo}/${Ho}`),i.join(" ")}async function Yo(t){var i;let e=new Headers;e.append("Content-Type","application/json"),e.append("x-goog-api-client",zo(t.requestOptions)),e.append("x-goog-api-key",t.apiKey);let a=(i=t.requestOptions)===null||i===void 0?void 0:i.customHeaders;if(a){if(!(a instanceof Headers))try{a=new Headers(a)}catch(r){throw new rt(`unable to convert customHeaders value ${JSON.stringify(a)} to Headers: ${r.message}`)}for(let[r,l]of a.entries()){if(r==="x-goog-api-key")throw new rt(`Cannot set reserved header name ${r}`);if(r==="x-goog-api-client")throw new rt(`Header name ${r} can only be set using the apiClient field`);e.append(r,l)}}return e}async function Wo(t,i,e,a,r,l){let d=new On(t,i,e,a,l);return{url:d.toString(),fetchOptions:Object.assign(Object.assign({},Ko(l)),{method:"POST",headers:await Yo(d),body:r})}}async function se(t,i,e,a,r,l={},d=fetch){let{url:u,fetchOptions:h}=await Wo(t,i,e,a,r,l);return $o(u,h,d)}async function $o(t,i,e=fetch){let a;try{a=await e(t,i)}catch(r){Go(r,t)}return a.ok||await Xo(a,t),a}function Go(t,i){let e=t;throw e.name==="AbortError"?(e=new Xe(`Request aborted when fetching ${i.toString()}: ${t.message}`),e.stack=t.stack):t instanceof Ge||t instanceof rt||(e=new N(`Error fetching from ${i.toString()}: ${t.message}`),e.stack=t.stack),e}async function Xo(t,i){let e="",a;try{let r=await t.json();e=r.error.message,r.error.details&&(e+=` ${JSON.stringify(r.error.details)}`,a=r.error.details)}catch{}throw new Ge(`Error fetching from ${i.toString()}: [${t.status} ${t.statusText}] ${e}`,t.status,t.statusText,a)}function Ko(t){let i={};if(t?.signal!==void 0||t?.timeout>=0){let e=new AbortController;t?.timeout>=0&&setTimeout(()=>e.abort(),t.timeout),t?.signal&&t.signal.addEventListener("abort",()=>{e.abort()}),i.signal=e.signal}return i}function Dn(t){return t.text=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),$e(t.candidates[0]))throw new yt(`${Ct(t)}`,t);return qo(t)}else if(t.promptFeedback)throw new yt(`Text not available. ${Ct(t)}`,t);return""},t.functionCall=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),$e(t.candidates[0]))throw new yt(`${Ct(t)}`,t);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),ba(t)[0]}else if(t.promptFeedback)throw new yt(`Function call not available. ${Ct(t)}`,t)},t.functionCalls=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),$e(t.candidates[0]))throw new yt(`${Ct(t)}`,t);return ba(t)}else if(t.promptFeedback)throw new yt(`Function call not available. ${Ct(t)}`,t)},t}function qo(t){var i,e,a,r;let l=[];if(!((e=(i=t.candidates)===null||i===void 0?void 0:i[0].content)===null||e===void 0)&&e.parts)for(let d of(r=(a=t.candidates)===null||a===void 0?void 0:a[0].content)===null||r===void 0?void 0:r.parts)d.text&&l.push(d.text),d.executableCode&&l.push("\n```"+d.executableCode.language+`
`+d.executableCode.code+"\n```\n"),d.codeExecutionResult&&l.push("\n```\n"+d.codeExecutionResult.output+"\n```\n");return l.length>0?l.join(""):""}function ba(t){var i,e,a,r;let l=[];if(!((e=(i=t.candidates)===null||i===void 0?void 0:i[0].content)===null||e===void 0)&&e.parts)for(let d of(r=(a=t.candidates)===null||a===void 0?void 0:a[0].content)===null||r===void 0?void 0:r.parts)d.functionCall&&l.push(d.functionCall);if(l.length>0)return l}var Qo=[We.RECITATION,We.SAFETY,We.LANGUAGE];function $e(t){return!!t.finishReason&&Qo.includes(t.finishReason)}function Ct(t){var i,e,a;let r="";if((!t.candidates||t.candidates.length===0)&&t.promptFeedback)r+="Response was blocked",!((i=t.promptFeedback)===null||i===void 0)&&i.blockReason&&(r+=` due to ${t.promptFeedback.blockReason}`),!((e=t.promptFeedback)===null||e===void 0)&&e.blockReasonMessage&&(r+=`: ${t.promptFeedback.blockReasonMessage}`);else if(!((a=t.candidates)===null||a===void 0)&&a[0]){let l=t.candidates[0];$e(l)&&(r+=`Candidate was blocked due to ${l.finishReason}`,l.finishMessage&&(r+=`: ${l.finishMessage}`))}return r}function oe(t){return this instanceof oe?(this.v=t,this):new oe(t)}function Zo(t,i,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=e.apply(t,i||[]),r,l=[];return r={},d("next"),d("throw"),d("return"),r[Symbol.asyncIterator]=function(){return this},r;function d(_){a[_]&&(r[_]=function(E){return new Promise(function(T,st){l.push([_,E,T,st])>1||u(_,E)})})}function u(_,E){try{h(a[_](E))}catch(T){W(l[0][3],T)}}function h(_){_.value instanceof oe?Promise.resolve(_.value.v).then(C,F):W(l[0][2],_)}function C(_){u("next",_)}function F(_){u("throw",_)}function W(_,E){_(E),l.shift(),l.length&&u(l[0][0],l[0][1])}}var fa=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function Jo(t){let i=t.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),e=nr(i),[a,r]=e.tee();return{stream:er(a),response:tr(r)}}async function tr(t){let i=[],e=t.getReader();for(;;){let{done:a,value:r}=await e.read();if(a)return Dn(ir(i));i.push(r)}}function er(t){return Zo(this,arguments,function*(){let e=t.getReader();for(;;){let{value:a,done:r}=yield oe(e.read());if(r)break;yield yield oe(Dn(a))}})}function nr(t){let i=t.getReader();return new ReadableStream({start(a){let r="";return l();function l(){return i.read().then(({value:d,done:u})=>{if(u){if(r.trim()){a.error(new N("Failed to parse stream"));return}a.close();return}r+=d;let h=r.match(fa),C;for(;h;){try{C=JSON.parse(h[1])}catch{a.error(new N(`Error parsing JSON response: "${h[1]}"`));return}a.enqueue(C),r=r.substring(h[0].length),h=r.match(fa)}return l()}).catch(d=>{let u=d;throw u.stack=d.stack,u.name==="AbortError"?u=new Xe("Request aborted when reading from the stream"):u=new N("Error reading from the stream"),u})}}})}function ir(t){let i=t[t.length-1],e={promptFeedback:i?.promptFeedback};for(let a of t){if(a.candidates){let r=0;for(let l of a.candidates)if(e.candidates||(e.candidates=[]),e.candidates[r]||(e.candidates[r]={index:r}),e.candidates[r].citationMetadata=l.citationMetadata,e.candidates[r].groundingMetadata=l.groundingMetadata,e.candidates[r].finishReason=l.finishReason,e.candidates[r].finishMessage=l.finishMessage,e.candidates[r].safetyRatings=l.safetyRatings,l.content&&l.content.parts){e.candidates[r].content||(e.candidates[r].content={role:l.content.role||"user",parts:[]});let d={};for(let u of l.content.parts)u.text&&(d.text=u.text),u.functionCall&&(d.functionCall=u.functionCall),u.executableCode&&(d.executableCode=u.executableCode),u.codeExecutionResult&&(d.codeExecutionResult=u.codeExecutionResult),Object.keys(d).length===0&&(d.text=""),e.candidates[r].content.parts.push(d)}r++}a.usageMetadata&&(e.usageMetadata=a.usageMetadata)}return e}async function ya(t,i,e,a){let r=await se(i,zt.STREAM_GENERATE_CONTENT,t,!0,JSON.stringify(e),a);return Jo(r)}async function Ca(t,i,e,a){let l=await(await se(i,zt.GENERATE_CONTENT,t,!1,JSON.stringify(e),a)).json();return{response:Dn(l)}}function xa(t){if(t!=null){if(typeof t=="string")return{role:"system",parts:[{text:t}]};if(t.text)return{role:"system",parts:[t]};if(t.parts)return t.role?t:{role:"system",parts:t.parts}}}function re(t){let i=[];if(typeof t=="string")i=[{text:t}];else for(let e of t)typeof e=="string"?i.push({text:e}):i.push(e);return ar(i)}function ar(t){let i={role:"user",parts:[]},e={role:"function",parts:[]},a=!1,r=!1;for(let l of t)"functionResponse"in l?(e.parts.push(l),r=!0):(i.parts.push(l),a=!0);if(a&&r)throw new N("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!a&&!r)throw new N("No content is provided for sending chat message.");return a?i:e}function or(t,i){var e;let a={model:i?.model,generationConfig:i?.generationConfig,safetySettings:i?.safetySettings,tools:i?.tools,toolConfig:i?.toolConfig,systemInstruction:i?.systemInstruction,cachedContent:(e=i?.cachedContent)===null||e===void 0?void 0:e.name,contents:[]},r=t.generateContentRequest!=null;if(t.contents){if(r)throw new rt("CountTokensRequest must have one of contents or generateContentRequest, not both.");a.contents=t.contents}else if(r)a=Object.assign(Object.assign({},a),t.generateContentRequest);else{let l=re(t);a.contents=[l]}return{generateContentRequest:a}}function ha(t){let i;return t.contents?i=t:i={contents:[re(t)]},t.systemInstruction&&(i.systemInstruction=xa(t.systemInstruction)),i}function rr(t){return typeof t=="string"||Array.isArray(t)?{content:re(t)}:t}var ga=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],sr={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function cr(t){let i=!1;for(let e of t){let{role:a,parts:r}=e;if(!i&&a!=="user")throw new N(`First content should be with role 'user', got ${a}`);if(!pa.includes(a))throw new N(`Each item should include role field. Got ${a} but valid roles are: ${JSON.stringify(pa)}`);if(!Array.isArray(r))throw new N("Content should have 'parts' property with an array of Parts");if(r.length===0)throw new N("Each Content should have at least one part");let l={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(let u of r)for(let h of ga)h in u&&(l[h]+=1);let d=sr[a];for(let u of ga)if(!d.includes(u)&&l[u]>0)throw new N(`Content with role '${a}' can't contain '${u}' part`);i=!0}}function va(t){var i;if(t.candidates===void 0||t.candidates.length===0)return!1;let e=(i=t.candidates[0])===null||i===void 0?void 0:i.content;if(e===void 0||e.parts===void 0||e.parts.length===0)return!1;for(let a of e.parts)if(a===void 0||Object.keys(a).length===0||a.text!==void 0&&a.text==="")return!1;return!0}var _a="SILENT_ERROR",Rn=class{constructor(i,e,a,r={}){this.model=e,this.params=a,this._requestOptions=r,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=i,a?.history&&(cr(a.history),this._history=a.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(i,e={}){var a,r,l,d,u,h;await this._sendPromise;let C=re(i),F={safetySettings:(a=this.params)===null||a===void 0?void 0:a.safetySettings,generationConfig:(r=this.params)===null||r===void 0?void 0:r.generationConfig,tools:(l=this.params)===null||l===void 0?void 0:l.tools,toolConfig:(d=this.params)===null||d===void 0?void 0:d.toolConfig,systemInstruction:(u=this.params)===null||u===void 0?void 0:u.systemInstruction,cachedContent:(h=this.params)===null||h===void 0?void 0:h.cachedContent,contents:[...this._history,C]},W=Object.assign(Object.assign({},this._requestOptions),e),_;return this._sendPromise=this._sendPromise.then(()=>Ca(this._apiKey,this.model,F,W)).then(E=>{var T;if(va(E.response)){this._history.push(C);let st=Object.assign({parts:[],role:"model"},(T=E.response.candidates)===null||T===void 0?void 0:T[0].content);this._history.push(st)}else{let st=Ct(E.response);st&&console.warn(`sendMessage() was unsuccessful. ${st}. Inspect response object for details.`)}_=E}).catch(E=>{throw this._sendPromise=Promise.resolve(),E}),await this._sendPromise,_}async sendMessageStream(i,e={}){var a,r,l,d,u,h;await this._sendPromise;let C=re(i),F={safetySettings:(a=this.params)===null||a===void 0?void 0:a.safetySettings,generationConfig:(r=this.params)===null||r===void 0?void 0:r.generationConfig,tools:(l=this.params)===null||l===void 0?void 0:l.tools,toolConfig:(d=this.params)===null||d===void 0?void 0:d.toolConfig,systemInstruction:(u=this.params)===null||u===void 0?void 0:u.systemInstruction,cachedContent:(h=this.params)===null||h===void 0?void 0:h.cachedContent,contents:[...this._history,C]},W=Object.assign(Object.assign({},this._requestOptions),e),_=ya(this._apiKey,this.model,F,W);return this._sendPromise=this._sendPromise.then(()=>_).catch(E=>{throw new Error(_a)}).then(E=>E.response).then(E=>{if(va(E)){this._history.push(C);let T=Object.assign({},E.candidates[0].content);T.role||(T.role="model"),this._history.push(T)}else{let T=Ct(E);T&&console.warn(`sendMessageStream() was unsuccessful. ${T}. Inspect response object for details.`)}}).catch(E=>{E.message!==_a&&console.error(E)}),_}};async function lr(t,i,e,a){return(await se(i,zt.COUNT_TOKENS,t,!1,JSON.stringify(e),a)).json()}async function dr(t,i,e,a){return(await se(i,zt.EMBED_CONTENT,t,!1,JSON.stringify(e),a)).json()}async function mr(t,i,e,a){let r=e.requests.map(d=>Object.assign(Object.assign({},d),{model:i}));return(await se(i,zt.BATCH_EMBED_CONTENTS,t,!1,JSON.stringify({requests:r}),a)).json()}var Ke=class{constructor(i,e,a={}){this.apiKey=i,this._requestOptions=a,e.model.includes("/")?this.model=e.model:this.model=`models/${e.model}`,this.generationConfig=e.generationConfig||{},this.safetySettings=e.safetySettings||[],this.tools=e.tools,this.toolConfig=e.toolConfig,this.systemInstruction=xa(e.systemInstruction),this.cachedContent=e.cachedContent}async generateContent(i,e={}){var a;let r=ha(i),l=Object.assign(Object.assign({},this._requestOptions),e);return Ca(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(a=this.cachedContent)===null||a===void 0?void 0:a.name},r),l)}async generateContentStream(i,e={}){var a;let r=ha(i),l=Object.assign(Object.assign({},this._requestOptions),e);return ya(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(a=this.cachedContent)===null||a===void 0?void 0:a.name},r),l)}startChat(i){var e;return new Rn(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(e=this.cachedContent)===null||e===void 0?void 0:e.name},i),this._requestOptions)}async countTokens(i,e={}){let a=or(i,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),r=Object.assign(Object.assign({},this._requestOptions),e);return lr(this.apiKey,this.model,a,r)}async embedContent(i,e={}){let a=rr(i),r=Object.assign(Object.assign({},this._requestOptions),e);return dr(this.apiKey,this.model,a,r)}async batchEmbedContents(i,e={}){let a=Object.assign(Object.assign({},this._requestOptions),e);return mr(this.apiKey,this.model,i,a)}};var qe=class{constructor(i){this.apiKey=i}getGenerativeModel(i,e){if(!i.model)throw new N("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new Ke(this.apiKey,i,e)}getGenerativeModelFromCachedContent(i,e,a){if(!i.name)throw new rt("Cached content must contain a `name` field.");if(!i.model)throw new rt("Cached content must contain a `model` field.");let r=["model","systemInstruction"];for(let d of r)if(e?.[d]&&i[d]&&e?.[d]!==i[d]){if(d==="model"){let u=e.model.startsWith("models/")?e.model.replace("models/",""):e.model,h=i.model.startsWith("models/")?i.model.replace("models/",""):i.model;if(u===h)continue}throw new rt(`Different value for "${d}" specified in modelParams (${e[d]}) and cachedContent (${i[d]})`)}let l=Object.assign(Object.assign({},e),{model:i.model,tools:i.tools,toolConfig:i.toolConfig,systemInstruction:i.systemInstruction,cachedContent:i});return new Ke(this.apiKey,l,a)}};var Nn={production:!0,geminiApiKey:"AIzaSyDy5FZWgJJqKNd9oexHo9pZBsHSzhy3k4Q"};var Qe=class t{genAI=null;constructor(){Nn.geminiApiKey&&this.initializeAI(Nn.geminiApiKey)}initializeAI(i){this.genAI=new qe(i)}hasApiKey(){return this.genAI!==null}async parseExpense(i){if(!this.genAI)return{error:"API Key not configured"};try{let e=this.genAI.getGenerativeModel({model:"gemini-2.5-flash"}),a=new Date,r=a.toISOString().split("T")[0],l=a.getFullYear(),d=a.getMonth()+1,u=a.getDate(),h=`
        You are the AI engine of an expense-tracking application.
        Your job is to read a user's natural-language expense message and convert it into a structured Expense object.

        CURRENT DATE CONTEXT:
        Today's date is: ${r} (${l}-${d.toString().padStart(2,"0")}-${u.toString().padStart(2,"0")})
        Current year: ${l}
        Current month: ${d}

        EXPENSE OBJECT FORMAT (output must match EXACTLY):
        {
          "id": 0,
          "title": "",
          "amount": 0,
          "date": "",
          "category": "",
          "notes": "",
          "paymentMethod": "",
          "receipt": "",
          "tags": [],
          "groupId": null,
          "recurringId": null,
          "createdAt": "",
          "updatedAt": ""
        }

        FIELD RULES:
        id: Generate a random integer (example: 53211)
        title: 1\u20133 words summarizing the expense
        amount: Extract numeric amount. If "Rs 200", "200 rupees", detect it.
        date: Convert "today", "yesterday", etc. to YYYY-MM-DD. 
              - "today" = ${r}
              - "yesterday" = subtract 1 day from ${r}
              - If no date mentioned, use ${r}
              - IMPORTANT: Always use ${l} as the year unless user explicitly mentions a different year
        category: Use EXACT enum values: "Food", "Transport", "Bills", "Entertainment", "Shopping", "Healthcare", "Education", "Travel", "Gifts", "Utilities", "Insurance", "Other". Infer based on keywords.
        notes: Full interpreted explanation (e.g., "User spent 200 PKR on chai today using cash.").
        paymentMethod: Infer "Cash", "Credit Card", "Debit Card", "Bank Transfer", "Mobile Payment", "Other". Default to "".
        tags: Extract max 3 keyword tags.
        receipt: Link/file if mentioned, else "".
        groupId: Integer if grouping mentioned, else null.
        recurringId: Integer if recurring mentioned, else null.
        createdAt & updatedAt: Current ISO timestamp.

        VERY IMPORTANT RULES:
        1. Output must always be VALID JSON.
        2. Output must contain ONLY JSON. No text outside JSON.
        3. If NOT an expense \u2192 return { "error": "Not an expense entry" }
        4. ALWAYS use the current year (${l}) unless user explicitly states otherwise

        User Message: "${i}"
      `,_=(await(await e.generateContent(h)).response).text().replace(/```json/g,"").replace(/```/g,"").trim();return JSON.parse(_)}catch(e){return console.error("Error parsing expense with Gemini:",e),{error:"Failed to process request"}}}static \u0275fac=function(e){return new(e||t)};static \u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})};var pr=["scrollContainer"];function br(t,i){t&1&&(b(0,"div",19)(1,"div",20),x(2,"i",21),f(),b(3,"p",22),w(4,"Hi! I can help you track expenses."),f(),b(5,"p",23),w(6,'Try "Spent 500 on lunch" or "Paid 2000 for petrol"'),f()())}function fr(t,i){if(t&1&&(b(0,"div",24)(1,"div",25)(2,"p",26),w(3),f()(),b(4,"small",27),w(5),Vt(6,"date"),f()()),t&2){let e=i.$implicit;ft("user",e.sender==="user")("ai",e.sender==="ai"),g(),y("ngClass",e.sender==="user"?"bg-primary-gradient text-white":"bg-white-10 text-white"),g(2),tt(e.text),g(),ft("text-end",e.sender==="user"),g(),Ti(" ",xn(6,9,e.timestamp,"shortTime")," ")}}function hr(t,i){t&1&&(b(0,"div",28)(1,"div",29)(2,"div",30),x(3,"span")(4,"span")(5,"span"),f()()())}function gr(t,i){if(t&1){let e=J();b(0,"div",31)(1,"h6",32),w(2,"Confirm Expense"),f(),b(3,"div",33)(4,"span",34),w(5,"Title"),f(),b(6,"span",35),w(7),f()(),b(8,"div",33)(9,"span",34),w(10,"Amount"),f(),b(11,"span",36),w(12),Vt(13,"number"),f()(),b(14,"div",33)(15,"span",34),w(16,"Category"),f(),b(17,"span",35),w(18),f()(),b(19,"div",37)(20,"span",34),w(21,"Date"),f(),b(22,"span",35),w(23),Vt(24,"date"),f()(),b(25,"div",38)(26,"button",39),L("click",function(){R(e);let r=ot();return D(r.discardExpense())}),w(27,"Discard"),f(),b(28,"button",40),L("click",function(){R(e);let r=ot();return D(r.confirmExpense())}),w(29,"Add Expense"),f()()()}if(t&2){let e=ot();g(7),tt(e.pendingExpense.title),g(5),tt(xn(13,4,e.pendingExpense.amount,"1.0-0")),g(6),tt(e.pendingExpense.category),g(5),tt(ke(24,7,e.pendingExpense.date))}}var Ze=class t{constructor(i,e,a,r){this.geminiService=i;this.expenseService=e;this.toastService=a;this.cdr=r}isOpen=!1;close=new Z;scrollContainer;messages=[];userInput="";isProcessing=!1;pendingExpense=null;ngOnInit(){}closeChat(){this.close.emit()}async sendMessage(){if(!this.userInput.trim()||this.isProcessing)return;let i=this.userInput.trim();this.addMessage(i,"user"),this.userInput="",this.isProcessing=!0,this.scrollToBottom();try{let e=await this.geminiService.parseExpense(i);"error"in e?this.addMessage(`I couldn't understand that as an expense. ${e.error}`,"ai"):(this.pendingExpense=e,this.addMessage("I found an expense! Please confirm the details below.","ai"))}catch{this.addMessage("Sorry, something went wrong. Please try again.","ai")}finally{this.isProcessing=!1,this.cdr.markForCheck(),this.scrollToBottom()}}confirmExpense(){this.pendingExpense&&(this.expenseService.addExpense(this.pendingExpense),this.toastService.success("Expense added successfully!"),this.addMessage("Expense added! You can add another one.","ai"),this.pendingExpense=null,this.cdr.markForCheck(),this.scrollToBottom())}discardExpense(){this.pendingExpense=null,this.addMessage("Expense discarded. What else?","ai"),this.cdr.markForCheck(),this.scrollToBottom()}addMessage(i,e){this.messages.push({text:i,sender:e,timestamp:new Date}),this.cdr.markForCheck()}scrollToBottom(){setTimeout(()=>{this.scrollContainer&&(this.scrollContainer.nativeElement.scrollTop=this.scrollContainer.nativeElement.scrollHeight)},100)}static \u0275fac=function(e){return new(e||t)(j(Qe),j(zi),j(Re),j(Oi))};static \u0275cmp=S({type:t,selectors:[["app-chat-interface"]],viewQuery:function(e,a){if(e&1&&jt(pr,5),e&2){let r;kt(r=Mt())&&(a.scrollContainer=r.first)}},inputs:{isOpen:"isOpen"},outputs:{close:"close"},decls:20,vars:9,consts:[["scrollContainer",""],[1,"chat-container","glass-card"],[1,"chat-header","d-flex","justify-content-between","align-items-center","p-3","border-bottom","border-white-10"],[1,"d-flex","align-items-center"],[1,"icon-circle","bg-primary-gradient","me-2",2,"width","32px","height","32px"],[1,"bi","bi-robot","text-white","small"],[1,"text-white","mb-0"],[1,"btn","btn-icon","btn-sm","text-secondary",3,"click"],[1,"bi","bi-x-lg"],[1,"chat-messages","p-3"],["class","text-center py-4",4,"ngIf"],["class","message mb-3",3,"user","ai",4,"ngFor","ngForOf"],["class","message ai mb-3",4,"ngIf"],["class","expense-preview glass-card p-3 mt-2 border border-accent",4,"ngIf"],[1,"chat-input","p-3","border-top","border-white-10"],[1,"input-group"],["type","text","placeholder","Type an expense...",1,"form-control","bg-transparent","text-white","border-white-10",3,"ngModelChange","keyup.enter","ngModel","disabled"],[1,"btn","btn-primary-gradient",3,"click","disabled"],[1,"bi","bi-send"],[1,"text-center","py-4"],[1,"icon-box","bg-white-5","mx-auto","mb-3","rounded-circle",2,"width","48px","height","48px"],[1,"bi","bi-stars","text-accent","fs-4"],[1,"text-white","small","mb-1"],[1,"text-secondary","x-small"],[1,"message","mb-3"],[1,"message-content","p-3","rounded-3",3,"ngClass"],[1,"mb-0","small"],[1,"text-secondary","x-small","mt-1","d-block"],[1,"message","ai","mb-3"],[1,"message-content","p-3","rounded-3","bg-white-10"],[1,"typing-indicator"],[1,"expense-preview","glass-card","p-3","mt-2","border","border-accent"],[1,"text-accent","mb-2","small","fw-bold","text-uppercase"],[1,"d-flex","justify-content-between","mb-1"],[1,"text-secondary","small"],[1,"text-white","small"],[1,"text-white","small","fw-bold"],[1,"d-flex","justify-content-between","mb-3"],[1,"d-flex","gap-2"],[1,"btn","btn-sm","btn-outline-danger","flex-grow-1",3,"click"],[1,"btn","btn-sm","btn-success","flex-grow-1",3,"click"]],template:function(e,a){if(e&1){let r=J();b(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4),x(4,"i",5),f(),b(5,"h6",6),w(6,"AI Assistant"),f()(),b(7,"button",7),L("click",function(){return R(r),D(a.closeChat())}),x(8,"i",8),f()(),b(9,"div",9,0),z(11,br,7,0,"div",10)(12,fr,7,12,"div",11)(13,hr,6,0,"div",12)(14,gr,30,9,"div",13),f(),b(15,"div",14)(16,"div",15)(17,"input",16),Mi("ngModelChange",function(d){return R(r),ki(a.userInput,d)||(a.userInput=d),D(d)}),L("keyup.enter",function(){return R(r),D(a.sendMessage())}),f(),b(18,"button",17),L("click",function(){return R(r),D(a.sendMessage())}),x(19,"i",18),f()()()()}e&2&&(ft("open",a.isOpen),g(11),y("ngIf",a.messages.length===0),g(),y("ngForOf",a.messages),g(),y("ngIf",a.isProcessing),g(),y("ngIf",a.pendingExpense),g(3),Ii("ngModel",a.userInput),y("disabled",a.isProcessing||!!a.pendingExpense),g(),y("disabled",!a.userInput.trim()||a.isProcessing||!!a.pendingExpense))},dependencies:[q,ht,gt,vt,Gi,Yi,Wi,$i,Li,Pi],styles:[".chat-container[_ngcontent-%COMP%]{position:fixed;bottom:100px;right:20px;width:350px;height:500px;z-index:1050;display:flex;flex-direction:column;transform:translateY(20px);opacity:0;pointer-events:none;transition:all .3s cubic-bezier(.4,0,.2,1)}.chat-container.open[_ngcontent-%COMP%]{transform:translateY(0);opacity:1;pointer-events:all}@media (max-width: 576px){.chat-container[_ngcontent-%COMP%]{width:calc(100% - 40px);bottom:80px;height:60vh}}.chat-messages[_ngcontent-%COMP%]{flex-grow:1;overflow-y:auto}.chat-messages[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px}.chat-messages[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#ffffff0d}.chat-messages[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#fff3;border-radius:2px}.message[_ngcontent-%COMP%]{max-width:85%}.message.user[_ngcontent-%COMP%]{margin-left:auto}.message.user[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]{border-bottom-right-radius:4px!important}.message.ai[_ngcontent-%COMP%]{margin-right:auto}.message.ai[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]{border-bottom-left-radius:4px!important}.typing-indicator[_ngcontent-%COMP%]{display:flex;gap:4px;padding:4px 0}.typing-indicator[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:6px;height:6px;background:#ffffff80;border-radius:50%;animation:_ngcontent-%COMP%_bounce 1.4s infinite ease-in-out both}.typing-indicator[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(1){animation-delay:-.32s}.typing-indicator[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){animation-delay:-.16s}@keyframes _ngcontent-%COMP%_bounce{0%,80%,to{transform:scale(0)}40%{transform:scale(1)}}.x-small[_ngcontent-%COMP%]{font-size:.7rem}.form-control[_ngcontent-%COMP%]::placeholder{color:#fff!important;opacity:1}"],changeDetection:0})};var Je=class t{toggle=new Z;toggleChat(){this.toggle.emit()}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=S({type:t,selectors:[["app-chat-fab"]],outputs:{toggle:"toggle"},decls:2,vars:0,consts:[[1,"chat-fab","btn","btn-primary-gradient","rounded-circle","shadow-lg","d-flex","align-items-center","justify-content-center",3,"click"],[1,"bi","bi-stars","fs-4","text-white"]],template:function(e,a){e&1&&(_n(0,"button",0),Ei("click",function(){return a.toggleChat()}),Cn(1,"i",1),yn())},dependencies:[q],styles:[".chat-fab[_ngcontent-%COMP%]{position:fixed;bottom:20px;right:20px;width:60px;height:60px;z-index:1060;transition:transform .2s cubic-bezier(.4,0,.2,1)}.chat-fab[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.chat-fab[_ngcontent-%COMP%]:active{transform:scale(.95)}@media (max-width: 576px){.chat-fab[_ngcontent-%COMP%]{bottom:80px}}"],changeDetection:0})};var tn=class t{networkStatus=new we(navigator.onLine);networkStatus$=this.networkStatus.asObservable();constructor(){window.addEventListener("online",()=>{this.networkStatus.next(!0)}),window.addEventListener("offline",()=>{this.networkStatus.next(!1)})}isOnline(){return navigator.onLine}static \u0275fac=function(e){return new(e||t)};static \u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})};function _r(t,i){if(t&1){let e=J();b(0,"div",8)(1,"small"),x(2,"i",9),w(3," Install Expense Tracker for offline use "),b(4,"button",10),L("click",function(){R(e);let r=ot();return D(r.installPWA())}),w(5,"Install"),f()()()}}function yr(t,i){t&1&&(b(0,"div",11)(1,"small"),x(2,"i",12),w(3," You are offline. Data may not be up to date."),f()())}function Cr(t,i){if(t&1){let e=J();b(0,"app-chat-fab",13),L("toggle",function(){R(e);let r=ot();return D(r.toggleChat())}),f()}}var en=class t{constructor(i,e,a){this.router=i;this.networkService=e;this.pwaService=a}title=fi("exp-tracker");isOnline=!0;showInstallButton=!1;isMobile=!1;isChatOpen=!1;links=[{path:"/dashboard",label:"Dashboard",icon:"bi-house-door",activeIcon:"bi-house-door-fill"},{path:"/add",label:"Add Expense",icon:"bi-plus-circle",activeIcon:"bi-plus-circle-fill"},{path:"/expenses",label:"Expenses",icon:"bi-collection",activeIcon:"bi-collection-fill"},{path:"/budgets",label:"Budgets",icon:"bi-wallet",activeIcon:"bi-wallet-fill"},{path:"/incomes",label:"Incomes",icon:"bi-piggy-bank",activeIcon:"bi-piggy-bank-fill"}];ngOnInit(){this.isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),this.networkService.networkStatus$.subscribe(e=>{this.isOnline=e}),window.addEventListener("beforeinstallprompt",e=>{this.showInstallButton=this.pwaService.isInstallable()&&!this.hasSeenInstallBanner()}),window.addEventListener("appinstalled",()=>{this.showInstallButton=!1});let i=()=>{let e=this.pwaService.isInstallable();this.pwaService.canInstall()&&!this.hasSeenInstallBanner()&&(this.showInstallButton=!0)};setTimeout(i,1e3),setInterval(i,5e3)}toggleChat(){this.isChatOpen=!this.isChatOpen}installPWA(){}hasSeenInstallBanner(){return localStorage.getItem("installBannerSeen")==="true"}setInstallBannerSeen(){localStorage.setItem("installBannerSeen","true")}static \u0275fac=function(e){return new(e||t)(j(Ht),j(tn),j(Xi))};static \u0275cmp=S({type:t,selectors:[["app-root"]],decls:11,vars:6,consts:[["class","alert alert-info text-center py-2 m-0",4,"ngIf"],["class","alert alert-warning text-center py-1 m-0",4,"ngIf"],[1,"d-none","d-md-block"],[3,"links"],[1,"main-content"],[1,"d-block","d-md-none"],[3,"close","isOpen"],[3,"toggle",4,"ngIf"],[1,"alert","alert-info","text-center","py-2","m-0"],[1,"bi","bi-download","me-1"],[1,"btn","btn-sm","btn-primary","ms-2",3,"click"],[1,"alert","alert-warning","text-center","py-1","m-0"],[1,"bi","bi-wifi-off","me-1"],[3,"toggle"]],template:function(e,a){e&1&&(z(0,_r,6,0,"div",0)(1,yr,4,0,"div",1),b(2,"div",2),x(3,"app-desktop-nav",3),f(),b(4,"div",4),x(5,"router-outlet"),f(),b(6,"div",5),x(7,"app-mobile-nav",3),f(),x(8,"app-toast"),b(9,"app-chat-interface",6),L("close",function(){return a.isChatOpen=!1}),f(),z(10,Cr,1,0,"app-chat-fab",7)),e&2&&(y("ngIf",a.showInstallButton&&!a.isOnline),g(),y("ngIf",!a.isOnline&&!a.showInstallButton),g(2),y("links",a.links),g(4),y("links",a.links),g(2),y("isOpen",a.isChatOpen),g(),y("ngIf",!a.isChatOpen))},dependencies:[q,vt,Ve,ze,Ye,Me,Ze,Je],styles:[".main-content[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;overflow-x:hidden;overflow-y:auto;height:calc(100vh - 60px);position:relative;z-index:1}app-swipe-layout[_ngcontent-%COMP%]{display:block;flex:1;height:100%;overflow:hidden}app-swipe-container[_ngcontent-%COMP%]{touch-action:pan-y}@media (max-width: 768px){.main-content[_ngcontent-%COMP%]{height:calc(100vh - 56px)}app-swipe-layout[_ngcontent-%COMP%]{padding-bottom:56px;height:calc(100vh - 56px)}}@media (min-width: 769px){app-swipe-layout[_ngcontent-%COMP%]{padding-top:48px;height:calc(100vh - 48px)}}"]})};var Pl=so(wa());ji(en,ta).catch(t=>console.error(t));
