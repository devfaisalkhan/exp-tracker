import{a as L}from"./chunk-7YV3BKTT.js";import{a as k,b as c,c as j,d as T,f as B,h as V,i as G,j as R,k as q,l as K,n as W,p as z}from"./chunk-CQQBNYNJ.js";import{a as N,b as D}from"./chunk-VNNQ3FS5.js";import{$a as F,$b as A,Ca as g,Ia as E,Ma as p,T as P,Tb as O,Ub as M,X as x,Xa as m,Ya as r,Za as e,_a as s,a as d,ab as S,b as u,bb as I,ca as U,da as C,lb as l,mb as y,nb as _,xa as a}from"./chunk-FMDOM5OR.js";var h=class n{constructor(t,i){this.toastService=t;this.storageService=i}localStorageKey="userProfile";defaultUser={id:1,name:"Default User",email:"user@example.com",currency:"PKR",theme:"light",createdAt:new Date,updatedAt:new Date};loadUser(){let t=this.storageService.getItem(this.localStorageKey);if(t){let i=t;return u(d({},i),{createdAt:new Date(i.createdAt),updatedAt:new Date(i.updatedAt)})}return null}saveUser(t){this.storageService.setItem(this.localStorageKey,t)}getUser(){return this.loadUser()||this.defaultUser}updateUser(t){let i=this.getUser(),o=u(d(d({},i),t),{updatedAt:new Date});return this.saveUser(o),this.toastService.success("Profile updated successfully!"),o}setUser(t){this.saveUser(t),this.toastService.success("User profile saved successfully!")}static \u0275fac=function(i){return new(i||n)(x(N),x(D))};static \u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"})};function Q(n,t){if(n&1){let i=F();r(0,"div",36)(1,"div",7)(2,"div",37)(3,"div",38),s(4,"i",39),e(),r(5,"div",40)(6,"div")(7,"h5",41),l(8,"Install App"),e(),r(9,"p",42),l(10,"Add to home screen for offline access."),e()(),r(11,"button",43),S("click",function(){U(i);let f=I();return C(f.installPWA())}),s(12,"i",44),l(13,"Install "),e()()()()()}}function X(n,t){n&1&&(r(0,"div",45),l(1," Name is required (min 2 chars) "),e())}function Y(n,t){n&1&&(r(0,"div",45),l(1," Valid email required "),e())}function Z(n,t){if(n&1&&(r(0,"option",46),l(1),e()),n&2){let i=t.$implicit;m("value",i.value),a(),_(" ",i.label," ")}}function ee(n,t){if(n&1&&(r(0,"option",46),l(1),e()),n&2){let i=t.$implicit;m("value",i.value),a(),_(" ",i.label," ")}}var $=class n{constructor(t,i,o){this.fb=t;this.userService=i;this.pwaService=o}profileForm;user=null;themes=[{value:"light",label:"Light"},{value:"dark",label:"Dark"}];currencies=[{value:"PKR",label:"Pakistani Rupee (PKR)"},{value:"USD",label:"US Dollar (USD)"},{value:"EUR",label:"Euro (EUR)"},{value:"GBP",label:"British Pound (GBP)"}];showInstallButton=!1;ngOnInit(){this.user=this.userService.getUser(),this.initForm(),this.showInstallButton=this.pwaService.canInstall(),console.log("Profile component - show install button:",this.showInstallButton)}initForm(){this.user&&(this.profileForm=this.fb.group({name:[this.user.name,[c.required,c.minLength(2)]],email:[this.user.email,[c.required,c.email]],currency:[this.user.currency,[c.required]],theme:[this.user.theme,[c.required]]}))}onSubmit(){if(this.profileForm.valid&&this.user){let t=this.profileForm.value,i=u(d({},this.user),{name:t.name,email:t.email,currency:t.currency,theme:t.theme});this.userService.updateUser(i),this.user=i,alert("Profile updated successfully!")}}installPWA(){console.log("Manual install triggered from profile"),this.pwaService.showInstallPrompt()}static \u0275fac=function(i){return new(i||n)(g(W),g(h),g(L))};static \u0275cmp=E({type:n,selectors:[["app-user-profile"]],decls:54,vars:9,consts:[[1,"container-fluid","dashboard-container"],[1,"d-flex","align-items-center","mb-4"],["routerLink","/dashboard",1,"btn","btn-icon","btn-sm","me-3","text-white"],[1,"bi","bi-arrow-left","fs-4"],[1,"mb-0","fw-bold","text-gradient"],["class","row justify-content-center mb-4",4,"ngIf"],[1,"row","justify-content-center"],[1,"col-12","col-lg-6"],[1,"glass-card","p-4"],[1,"text-center","mb-5"],[1,"avatar-circle","mx-auto","mb-3"],[1,"bi","bi-person-fill","text-white","fs-1"],[1,"text-white","mb-1"],[1,"text-secondary","small"],["novalidate","",3,"ngSubmit","formGroup"],[1,"mb-4"],["for","name",1,"form-label","text-secondary","small","fw-bold","text-uppercase"],[1,"input-group"],[1,"input-group-text","bg-transparent","border-end-0","text-accent","border-white-10"],[1,"bi","bi-person"],["type","text","id","name","formControlName","name","placeholder","Enter your full name",1,"form-control","bg-transparent","text-white","border-start-0","ps-0","border-white-10"],["class","text-danger small mt-1",4,"ngIf"],["for","email",1,"form-label","text-secondary","small","fw-bold","text-uppercase"],[1,"bi","bi-envelope"],["type","email","id","email","formControlName","email","placeholder","Enter your email",1,"form-control","bg-transparent","text-white","border-start-0","ps-0","border-white-10"],["for","currency",1,"form-label","text-secondary","small","fw-bold","text-uppercase"],[1,"bi","bi-currency-exchange"],["id","currency","formControlName","currency",1,"form-select","bg-transparent","text-white","border-start-0","ps-0","border-white-10"],["class","text-dark",3,"value",4,"ngFor","ngForOf"],[1,"mb-5"],["for","theme",1,"form-label","text-secondary","small","fw-bold","text-uppercase"],[1,"bi","bi-palette"],["id","theme","formControlName","theme",1,"form-select","bg-transparent","text-white","border-start-0","ps-0","border-white-10"],[1,"d-grid"],["type","submit",1,"btn","btn-primary-gradient","btn-lg","rounded-pill","py-3","fw-bold",3,"disabled"],[1,"bi","bi-save","me-2"],[1,"row","justify-content-center","mb-4"],[1,"glass-card","p-4","position-relative","overflow-hidden"],[1,"position-absolute","top-0","end-0","p-3","opacity-10"],[1,"bi","bi-download","fs-1","text-white"],[1,"d-flex","justify-content-between","align-items-center","position-relative","z-1"],[1,"text-white","mb-2","fw-bold"],[1,"text-secondary","mb-0","small"],[1,"btn","btn-primary-gradient","btn-sm","rounded-pill","px-4","py-2","fw-bold","shadow-sm",3,"click"],[1,"bi","bi-download","me-2"],[1,"text-danger","small","mt-1"],[1,"text-dark",3,"value"]],template:function(i,o){if(i&1&&(r(0,"div",0)(1,"div",1)(2,"a",2),s(3,"i",3),e(),r(4,"h2",4),l(5,"User Profile"),e()(),p(6,Q,14,0,"div",5),r(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"div",10),s(12,"i",11),e(),r(13,"h5",12),l(14),e(),r(15,"p",13),l(16),e()(),r(17,"form",14),S("ngSubmit",function(){return o.onSubmit()}),r(18,"div",15)(19,"label",16),l(20,"Full Name"),e(),r(21,"div",17)(22,"span",18),s(23,"i",19),e(),s(24,"input",20),e(),p(25,X,2,0,"div",21),e(),r(26,"div",15)(27,"label",22),l(28,"Email Address"),e(),r(29,"div",17)(30,"span",18),s(31,"i",23),e(),s(32,"input",24),e(),p(33,Y,2,0,"div",21),e(),r(34,"div",15)(35,"label",25),l(36,"Preferred Currency"),e(),r(37,"div",17)(38,"span",18),s(39,"i",26),e(),r(40,"select",27),p(41,Z,2,2,"option",28),e()()(),r(42,"div",29)(43,"label",30),l(44,"Theme"),e(),r(45,"div",17)(46,"span",18),s(47,"i",31),e(),r(48,"select",32),p(49,ee,2,2,"option",28),e()()(),r(50,"div",33)(51,"button",34),s(52,"i",35),l(53,"Update Profile "),e()()()()()()()),i&2){let f,w,v,b;a(6),m("ngIf",o.showInstallButton),a(8),y(((f=o.profileForm.get("name"))==null?null:f.value)||"User"),a(2),y(((w=o.profileForm.get("email"))==null?null:w.value)||"email@example.com"),a(),m("formGroup",o.profileForm),a(8),m("ngIf",((v=o.profileForm.get("name"))==null?null:v.invalid)&&((v=o.profileForm.get("name"))==null?null:v.touched)),a(8),m("ngIf",((b=o.profileForm.get("email"))==null?null:b.invalid)&&((b=o.profileForm.get("email"))==null?null:b.touched)),a(8),m("ngForOf",o.currencies),a(8),m("ngForOf",o.themes),a(2),m("disabled",o.profileForm.invalid)}},dependencies:[A,O,M,z,B,q,K,k,R,j,T,V,G],styles:[".form-control[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%]{border:1px solid rgba(255,255,255,.1);color:#fff}.form-control[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus{background:#ffffff1a;border-color:var(--text-accent);box-shadow:0 0 0 4px #6366f11a;color:#fff}.form-control[_ngcontent-%COMP%]::placeholder, .form-select[_ngcontent-%COMP%]::placeholder{color:#ffffff4d}.input-group-text[_ngcontent-%COMP%]{border:1px solid rgba(255,255,255,.1);border-right:none}.form-control[_ngcontent-%COMP%]:focus + .input-group-text[_ngcontent-%COMP%], .form-control[_ngcontent-%COMP%]:focus ~ .input-group-text[_ngcontent-%COMP%]{border-color:var(--text-accent)}select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{background-color:#1e293b;color:#fff;padding:10px}.btn-icon[_ngcontent-%COMP%]{width:40px;height:40px;display:flex;align-items:center;justify-content:center;border-radius:50%;background:#ffffff0d;transition:all .2s}.btn-icon[_ngcontent-%COMP%]:hover{background:#ffffff1a;transform:translate(-2px)}.avatar-circle[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:50%;background:var(--accent-gradient);display:flex;align-items:center;justify-content:center;box-shadow:0 0 20px #6366f14d}.border-white-10[_ngcontent-%COMP%]{border-color:#ffffff1a!important}.text-accent[_ngcontent-%COMP%]{color:var(--text-accent)!important}.opacity-10[_ngcontent-%COMP%]{opacity:.1}.z-1[_ngcontent-%COMP%]{z-index:1}"]})};export{$ as UserProfileComponent};
