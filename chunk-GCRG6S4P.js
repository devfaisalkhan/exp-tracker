import{a as k,b as h,c as U,d as V,f as G,g as j,h as A,i as K,j as $,k as z,l as q,m as J,n as H,p as L}from"./chunk-KZAXOK47.js";import{a as R}from"./chunk-YRVHUX5N.js";import{b as B}from"./chunk-7NW2QL4B.js";import{a as T}from"./chunk-7SCPLULR.js";import{Ca as u,Ia as y,Ma as s,Tb as O,Ub as Y,Vb as N,Wa as _,Xa as c,Ya as n,Za as t,_a as f,_b as w,ab as b,ac as D,bb as I,jb as x,kb as C,lb as P,mb as o,nb as M,ob as p,pb as F,vb as E,wb as g,xa as m,yb as v}from"./chunk-XBWGRGMV.js";var W=(a,i,e)=>({"bg-success":a,"bg-warning":i,"bg-danger":e});function X(a,i){if(a&1&&(n(0,"option",23),o(1),t()),a&2){let e=i.$implicit;c("value",e),m(),M(e)}}function Z(a,i){if(a&1&&(n(0,"option",23),o(1),t()),a&2){let e=i.$implicit;c("value",e.value),m(),M(e.name)}}function ee(a,i){a&1&&(n(0,"div",24),o(1," Please enter a valid income amount "),t())}function te(a,i){if(a&1&&(n(0,"div",25)(1,"div",26)(2,"div",27)(3,"div",28)(4,"h5",29),o(5),t(),n(6,"div",1)(7,"div",30)(8,"h6"),o(9,"Income"),t(),n(10,"p",31),o(11),g(12,"number"),t()(),n(13,"div",30)(14,"h6"),o(15,"Spent"),t(),n(16,"p",32),o(17),g(18,"number"),t()(),n(19,"div",30)(20,"h6"),o(21,"Remaining"),t(),n(22,"p"),o(23),g(24,"number"),t()()(),n(25,"div",33)(26,"div",34)(27,"small"),o(28,"0%"),t(),n(29,"small"),o(30),g(31,"number"),t(),n(32,"small"),o(33,"100%"),t()(),n(34,"div",35),f(35,"div",36),t()()()()()()),a&2){let e=I();m(5),F("Current Month: ",e.getMonthName(e.currentMonth)," ",e.currentYear),m(6),p("PKR ",v(12,12,e.currentMonthIncome,"1.2-2")),m(6),p("PKR ",v(18,15,e.expenseService.getMonthlySpent(e.currentYear,e.currentMonth),"1.2-2")),m(5),P(e.incomeService.getRemainingBudget(e.currentYear,e.currentMonth)<0?"text-danger":"text-success"),m(),p(" PKR ",v(24,18,e.incomeService.getRemainingBudget(e.currentYear,e.currentMonth),"1.2-2")," "),m(7),p("",v(31,21,e.incomeService.getPercentageUsed(e.currentYear,e.currentMonth),"1.0-0"),"%"),m(5),x("width",e.incomeService.getPercentageUsed(e.currentYear,e.currentMonth),"%"),c("ngClass",E(24,W,e.incomeService.getPercentageUsed(e.currentYear,e.currentMonth)<50,e.incomeService.getPercentageUsed(e.currentYear,e.currentMonth)>=50&&e.incomeService.getPercentageUsed(e.currentYear,e.currentMonth)<80,e.incomeService.getPercentageUsed(e.currentYear,e.currentMonth)>=80)),_("aria-valuenow",e.incomeService.getPercentageUsed(e.currentYear,e.currentMonth))}}var Q=class a{constructor(i,e,r,l){this.fb=i;this.incomeService=e;this.toastService=r;this.expenseService=l;let d=new Date().getFullYear();for(let S=d-5;S<=d+5;S++)this.years.push(S)}incomeForm;currentMonthIncome=null;currentYear=new Date().getFullYear();currentMonth=new Date().getMonth()+1;months=[{value:1,name:"January"},{value:2,name:"February"},{value:3,name:"March"},{value:4,name:"April"},{value:5,name:"May"},{value:6,name:"June"},{value:7,name:"July"},{value:8,name:"August"},{value:9,name:"September"},{value:10,name:"October"},{value:11,name:"November"},{value:12,name:"December"}];years=[];ngOnInit(){this.initForm(),this.loadCurrentMonthIncome()}initForm(){this.incomeForm=this.fb.group({year:[this.currentYear,[h.required]],month:[this.currentMonth,[h.required]],amount:[0,[h.required,h.min(.01)]]})}loadCurrentMonthIncome(){let i=this.incomeService.getMonthlyIncome(this.currentYear,this.currentMonth);i&&(this.currentMonthIncome=i.amount,this.incomeForm.patchValue({amount:i.amount}))}onSubmit(){if(this.incomeForm.valid){let{year:i,month:e,amount:r}=this.incomeForm.value;this.incomeService.setMonthlyIncome(i,e,r),this.toastService.success(`Monthly income for ${this.getMonthName(e)} ${i} set to ${r} PKR!`),i===this.currentYear&&e===this.currentMonth&&(this.currentMonthIncome=r)}else this.toastService.error("Please enter a valid income amount.")}getMonthName(i){return this.months.find(e=>e.value===i)?.name||""}onMonthYearChange(){let{year:i,month:e}=this.incomeForm.value;if(i&&e){let r=this.incomeService.getMonthlyIncome(i,e);this.currentMonthIncome=r?r.amount:null}}static \u0275fac=function(e){return new(e||a)(u(H),u(R),u(T),u(B))};static \u0275cmp=y({type:a,selectors:[["app-set-monthly-income"]],decls:33,vars:8,consts:[[1,"container","mt-4"],[1,"row"],[1,"col-12"],[1,"text-muted"],[1,"col-md-6","offset-md-3"],[1,"card"],[1,"card-body"],["novalidate","",1,"needs-validation",3,"ngSubmit","formGroup"],[1,"row","mb-3"],[1,"col-md-6"],["for","year",1,"form-label"],["id","year","formControlName","year",1,"form-select",3,"change"],[3,"value",4,"ngFor","ngForOf"],["for","month",1,"form-label"],["id","month","formControlName","month",1,"form-select",3,"change"],[1,"mb-3"],["for","amount",1,"form-label"],["type","number","id","amount","formControlName","amount","min","0.01","step","0.01","placeholder","Enter your monthly income",1,"form-control","form-control-lg"],["class","invalid-feedback",4,"ngIf"],[1,"d-grid"],["type","submit",1,"btn","btn-primary","btn-lg",3,"disabled"],[1,"bi","bi-currency-exchange","me-2"],["class","row mt-4",4,"ngIf"],[3,"value"],[1,"invalid-feedback"],[1,"row","mt-4"],[1,"col-md-8","offset-md-2"],[1,"card","border-primary"],[1,"card-body","text-center"],[1,"card-title"],[1,"col-4"],[1,"text-primary","mb-0"],[1,"text-danger","mb-0"],[1,"mt-3"],[1,"d-flex","justify-content-between","mb-1"],[1,"progress",2,"height","20px"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar",3,"ngClass"]],template:function(e,r){if(e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),o(4,"Set Monthly Income"),t(),n(5,"p",3),o(6,"Define your monthly income to track expenses against your budget"),t()()(),n(7,"div",1)(8,"div",4)(9,"div",5)(10,"div",6)(11,"form",7),b("ngSubmit",function(){return r.onSubmit()}),n(12,"div",8)(13,"div",9)(14,"label",10),o(15,"Year"),t(),n(16,"select",11),b("change",function(){return r.onMonthYearChange()}),s(17,X,2,2,"option",12),t()(),n(18,"div",9)(19,"label",13),o(20,"Month"),t(),n(21,"select",14),b("change",function(){return r.onMonthYearChange()}),s(22,Z,2,2,"option",12),t()()(),n(23,"div",15)(24,"label",16),o(25,"Monthly Income (PKR)"),t(),f(26,"input",17),s(27,ee,2,0,"div",18),t(),n(28,"div",19)(29,"button",20),f(30,"i",21),o(31,"Set Income "),t()()()()()()(),s(32,te,36,28,"div",22),t()),e&2){let l,d;m(11),c("formGroup",r.incomeForm),m(6),c("ngForOf",r.years),m(5),c("ngForOf",r.months),m(4),C("is-invalid",((l=r.incomeForm.get("amount"))==null?null:l.invalid)&&((l=r.incomeForm.get("amount"))==null?null:l.touched)),m(),c("ngIf",((d=r.incomeForm.get("amount"))==null?null:d.invalid)&&((d=r.incomeForm.get("amount"))==null?null:d.touched)),m(2),c("disabled",r.incomeForm.invalid),m(3),c("ngIf",r.currentMonthIncome!==null)}},dependencies:[D,O,Y,N,L,G,z,q,k,j,$,U,V,J,A,K,w],styles:[".card[_ngcontent-%COMP%]{box-shadow:0 4px 6px #0000001a;border:none;margin-bottom:1.5rem}.card-header[_ngcontent-%COMP%]{font-weight:600;border-bottom:1px solid rgba(0,0,0,.125)}.form-control-lg[_ngcontent-%COMP%]{font-size:1.25rem;padding:.75rem 1rem}.btn-lg[_ngcontent-%COMP%]{padding:.75rem 1.5rem;font-size:1.25rem}.progress[_ngcontent-%COMP%]{background-color:#e9ecef;border-radius:.25rem}.text-primary[_ngcontent-%COMP%]{color:#0d6efd!important}.text-success[_ngcontent-%COMP%]{color:#198754!important}.text-danger[_ngcontent-%COMP%]{color:#dc3545!important}.text-warning[_ngcontent-%COMP%]{color:#ffc107!important}.bg-primary[_ngcontent-%COMP%]{background-color:#0d6efd!important}.bg-success[_ngcontent-%COMP%]{background-color:#198754!important}.bg-warning[_ngcontent-%COMP%]{background-color:#ffc107!important}.bg-danger[_ngcontent-%COMP%]{background-color:#dc3545!important}@media (max-width: 768px){.card-body[_ngcontent-%COMP%]{padding:1rem}.form-control-lg[_ngcontent-%COMP%]{font-size:1rem;padding:.5rem}.btn-lg[_ngcontent-%COMP%]{padding:.5rem 1rem;font-size:1rem}}"]})};export{Q as SetMonthlyIncomeComponent};
